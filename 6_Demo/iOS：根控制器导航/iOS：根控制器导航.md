> 原文：[iOS: Root Controller Navigation](https://stasost.medium.com/ios-root-controller-navigation-3625eedbbff)
> 如何在应用程序各部分之间切换并处理启动选项。

这是我6月11日文章的续篇，当时我们创建了一个通用管理器来处理所有类型的深度链接(notifications, shortcuts, universal links, deeplinks)。我们唯一没有讨论的问题是：

> “一旦处理了深度链接，我们如何导航到合适的页面上？”

在本文中，我们将更详细地以一种清晰而灵活的方式实现 App Root 导航，其中包括 Deeplink 导航。你可以从应用程序内部或任何类型的外部 Deeplink 访问应用程序的任何部分。

大多数现代应用程序至少有两个主要部分：身份验证部分（登录前）和保护部分（登录后）。一些应用程序的结构甚至更复杂：同一登录中有多个配置文件，基于条件的启动后导航（Deeplink）。

在本教程中，我们将设计如何构建您的应用程序，这样您就可以避免一些最常见的错误，这些错误可能会导致内存泄漏、破坏应用程序架构模式、破坏现有的导航结构，或者干脆让您的用户流泪。



我在很多应用程序中都见到过，有两种常见的方式可以在应用程序各个模块之间导航：

1. 使用单个导航堆栈来呈现或推送新的 View Controller，而不需要返回导航界面。这种方法通常会将旧的视图控制器保留在内存中。
2. 使用 key window 切换 `window.rootViewController`。这种方法将扼杀旧的 ViewController，但从 UI 的角度来看，它看起来并不好。这也不允许您在需要时轻松地前后导航。

但是，如何构建易于维护的应用程序结构呢，使你可以轻松地在多个模块之间切换，无需编写意大利面条代码，甚至可以为其添加一个很好的导航功能呢？



让我们假设我们正在构建包含以下部分的应用程序：Splash Screen：该屏幕将在应用程序启动后立即呈现，我们可以在此处添加动画或进行一些服务API调用。身份验证部分：用于登录、注册、重置密码、确认电子邮件等的标准屏幕。用户会话将被保存，因此他不必每次打开应用程序时都登录。主要部分：应用程序本身。



