**åˆå§‹åŒ–**æ˜¯ä¸ºç±»ã€ç»“æ„ä½“æˆ–è€…æšä¸¾å‡†å¤‡å®ä¾‹çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹éœ€è¦ç»™å®ä¾‹é‡Œçš„æ¯ä¸€ä¸ªå­˜å‚¨å±æ€§è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼å¹¶ä¸”åœ¨æ–°å®ä¾‹å¯ä»¥ä½¿ç”¨ä¹‹å‰æ‰§è¡Œä»»ä½•å…¶ä»–æ‰€å¿…é¡»çš„é…ç½®æˆ–åˆå§‹åŒ–ã€‚

ä½ é€šè¿‡å®šä¹‰åˆå§‹åŒ–å™¨æ¥å®ç°è¿™ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªç”¨æ¥åˆ›å»ºç‰¹å®šç±»å‹æ–°å®ä¾‹çš„ç‰¹æ®Šçš„æ–¹æ³•ã€‚ä¸åŒäº Objective-C çš„åˆå§‹åŒ–å™¨ï¼Œ**Swift åˆå§‹åŒ–å™¨ä¸è¿”å›å€¼**ã€‚è¿™äº›åˆå§‹åŒ–å™¨ä¸»è¦çš„è§’è‰²å°±æ˜¯ç¡®ä¿åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨ä¹‹å‰æŸç±»å‹çš„æ–°å®ä¾‹èƒ½å¤Ÿæ­£ç¡®åˆå§‹åŒ–ã€‚

`Class` ç±»å‹çš„å®ä¾‹åŒæ ·å¯ä»¥å®ç°ä¸€ä¸ª**ååˆå§‹åŒ–å™¨**ï¼Œå®ƒä¼šåœ¨è¿™ä¸ªç±»çš„å®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰æ‰§è¡Œä»»æ„çš„è‡ªå®šä¹‰æ¸…ç†æ“ä½œã€‚


## 1. ä¸ºå­˜å‚¨å±æ€§è®¾ç½®åˆå§‹åŒ–å€¼

åœ¨åˆ›å»ºç±»å’Œç»“æ„ä½“çš„å®ä¾‹æ—¶å¿…é¡»ä¸ºæ‰€æœ‰çš„å­˜å‚¨å±æ€§è®¾ç½®ä¸€ä¸ªåˆé€‚çš„åˆå§‹å€¼ã€‚å­˜å‚¨å±æ€§ä¸èƒ½é—ç•™åœ¨ä¸ç¡®å®šçš„çŠ¶æ€ä¸­ã€‚

ä½ å¯ä»¥åœ¨åˆå§‹åŒ–å™¨é‡Œä¸ºå­˜å‚¨å±æ€§è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼Œæˆ–è€…é€šè¿‡åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å±æ€§å€¼ä½œä¸ºå±æ€§å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚åœ¨ä¸‹é¢çš„å°èŠ‚ä¸­ä¼šæè¿°è¿™äº›åŠ¨ä½œã€‚

### åˆå§‹åŒ–å™¨

> ğŸ’¡ åœ¨ `init` æ–¹æ³•ä¸­åˆå§‹åŒ–å­˜å‚¨å±æ€§çš„å€¼ã€‚

**åˆå§‹åŒ–å™¨** åœ¨åˆ›å»ºç‰¹å®šç±»å‹çš„å®ä¾‹æ—¶è¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸ªç®€å•çš„å½¢å¼ä¸­ï¼Œåˆå§‹åŒ–å™¨å°±åƒ**ä¸€ä¸ªæ²¡æœ‰å½¢å¼å‚æ•°çš„å®ä¾‹æ–¹æ³•**ï¼Œä½¿ç”¨ `init` å…³é”®å­—æ¥å†™ï¼š

```swift
init() {
    // åœ¨è¿™é‡Œæ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œ
}
```

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `Fahrenheit` ç»“æ„ä½“ä»¥å‚¨å­˜åæ°åº¦è¡¨ç¤ºçš„æ¸©åº¦ã€‚ `Fahrenheit` ç»“æ„ä½“æœ‰ä¸€ä¸ª `Double` ç±»å‹çš„å­˜å‚¨å±æ€§ `temperature`ï¼š

```swift
struct Fahrenheit {
    var temperature: Double
    init() {
        temperature = 32.0
    }
}

var f = Fahrenheit()
print("The default temperature is \(f.temperature)Â° Fahrenheit")
// The default temperature is 32.0Â° Fahrenheit
```

è¿™ä¸ªç»“æ„ä½“å®šä¹‰äº†ä¸€ä¸ªåˆå§‹åŒ–å™¨ `init`ï¼Œæ²¡æœ‰å½¢å¼å‚æ•°ï¼Œå®ƒåˆå§‹åŒ–å‚¨å­˜æ¸©åº¦çš„å€¼ä¸º `32.0` (åœ¨åæ°æ¸©åº¦ä¸‹æ°´çš„å†°ç‚¹)ã€‚

### é»˜è®¤çš„å±æ€§å€¼

> ğŸ’¡ åœ¨å±æ€§å£°æ˜ä¸­åˆå§‹åŒ–é»˜è®¤å€¼ã€‚


å¦‚ä¸Šæ‰€è¿°ï¼Œä½ å¯ä»¥åœ¨åˆå§‹åŒ–å™¨é‡Œä¸ºå­˜å‚¨å±æ€§è®¾ç½®åˆå§‹å€¼ã€‚

å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªé»˜è®¤å±æ€§å€¼ä½œä¸ºå±æ€§å£°æ˜çš„ä¸€éƒ¨åˆ†ã€‚å½“å±æ€§è¢«å®šä¹‰çš„æ—¶å€™ä½ å¯ä»¥é€šè¿‡ä¸ºè¿™ä¸ªå±æ€§åˆ†é…ä¸€ä¸ªåˆå§‹å€¼æ¥æŒ‡å®šé»˜è®¤çš„å±æ€§å€¼ã€‚

> æ³¨æ„
> 
> å¦‚æœä¸€ä¸ªå±æ€§ä¸€ç›´ä¿æŒç›¸åŒçš„åˆå§‹å€¼ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼è€Œä¸æ˜¯åœ¨åˆå§‹åŒ–å™¨é‡Œè®¾ç½®è¿™ä¸ªå€¼ã€‚æœ€ç»ˆç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯é»˜è®¤å€¼å°†å±æ€§çš„åˆå§‹åŒ–ä¸å£°æ˜æ›´ç´§å¯†åœ°è”ç³»åˆ°ä¸€èµ·ã€‚å®ƒä½¿å¾—ä½ çš„åˆå§‹åŒ–å™¨æ›´çŸ­æ›´æ¸…æ™°ï¼Œå¹¶ä¸”å¯ä»¥è®©ä½ å±æ€§æ ¹æ®é»˜è®¤å€¼æ¨æ–­ç±»å‹ã€‚å¦‚åè¾¹çš„ç« èŠ‚æ‰€è¿°ï¼Œé»˜è®¤å€¼ä¹Ÿè®©ä½ ä½¿ç”¨é»˜è®¤åˆå§‹åŒ–å™¨å’Œåˆå§‹åŒ–å™¨ç»§æ‰¿æ›´åŠ å®¹æ˜“ã€‚

```swift
struct Fahrenheit {
    var temperature = 32.0
}
```

## 2. è‡ªå®šä¹‰åˆå§‹åŒ–

å¦‚åŒä¸‹é¢ç« èŠ‚æ‰€è¿°ï¼Œä½ å¯ä»¥é€šè¿‡è¾“å…¥**å½¢å¼å‚æ•°**å’Œ**å¯é€‰ç±»å‹**æ¥è‡ªå®šä¹‰åˆå§‹åŒ–è¿‡ç¨‹ï¼Œæˆ–è€…åœ¨åˆå§‹åŒ–çš„æ—¶å€™åˆ†é…å¸¸é‡å±æ€§ã€‚

### åˆå§‹åŒ–å½¢å¼å‚æ•°

ä½ å¯ä»¥æä¾› **åˆå§‹åŒ–å½¢å¼å‚æ•°** ä½œä¸ºåˆå§‹åŒ–å™¨çš„ä¸€éƒ¨åˆ†ï¼Œæ¥å®šä¹‰åˆå§‹åŒ–è¿‡ç¨‹ä¸­çš„ç±»å‹å’Œå€¼çš„åç§°ã€‚åˆå§‹åŒ–å½¢å¼å‚æ•°ä¸å‡½æ•°å’Œæ–¹æ³•çš„å½¢å¼å‚æ•°å…·æœ‰ç›¸åŒçš„åŠŸèƒ½å’Œè¯­æ³•ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `Celsius` çš„ç»“æ„ä½“ï¼Œå®ƒç”¨æ‘„æ°åº¦è¡¨ç¤ºå‚¨å­˜æ¸©åº¦ã€‚ `Celsius` ç»“æ„ä½“å®ç°äº†ä¸¤ä¸ªè‡ªå®šä¹‰çš„åˆå§‹åŒ–å™¨ `init(fromFahrenheit:)` å’Œ `init(fromKelvin:)`ï¼Œ å®ƒä»¬ç”¨ä¸åŒçš„æ¸©åº¦å•ä½åˆå§‹åŒ–æ–°çš„ç»“æ„ä½“å®ä¾‹ï¼š

```swift
// è¯¥ç»“æ„ä½“ç”¨æ‘„æ°æ¸©åº¦è¡¨ç¤ºå­˜å‚¨æ¸©åº¦
struct Celsius {
    var temperatureInCelsius: Double
    init(fromFahrenheit fahrenheit: Double) {
        temperatureInCelsius = (fahrenheit - 32.0) / 1.8
    }
    init(fromKelvin kelvin: Double) {
        temperatureInCelsius = kelvin - 273.15
    }
}

let boilingPointOfWater = Celsius(fromFahrenheit: 212.0)
// boilingPointOfWater.temperatureInCelsius = 100.0
let freezingPointOfWater = Celsius(fromKelvin: 273.15)
// freezingPointOfWater.temperatureInCelsius = 0.0
```

ç¬¬ä¸€ä¸ªåˆå§‹åŒ–å™¨åªæœ‰ä¸€ä¸ªå¤–éƒ¨å˜é‡å `fromFahrenheit` å’Œä¸€ä¸ªå±€éƒ¨å˜é‡å `fahrenheit` çš„åˆå§‹åŒ–å½¢å¼å‚æ•°ã€‚
ç¬¬äºŒä¸ªåˆå§‹åŒ–å™¨åªæœ‰ä¸€ä¸ªå¤–éƒ¨å˜é‡å `fromKelvin` å’Œä¸€ä¸ªå±€éƒ¨å˜é‡å `kelvin` çš„åˆå§‹åŒ–å½¢å¼å‚æ•°ã€‚
è¿™ä¸¤ä¸ªåˆå§‹åŒ–å™¨éƒ½æŠŠå®ƒä»¬çš„å®é™…å‚æ•°è½¬æ¢ä¸ºäº†æ‘„æ°åº¦å¹¶ä¸”æŠŠè¿™ä¸ªå€¼å‚¨å­˜åˆ°äº†åä¸º `temperatureInCelsius` çš„å±æ€§é‡Œã€‚

### å½¢å¼å‚æ•°åå’Œå®é™…å‚æ•°æ ‡ç­¾

ä¸å‡½æ•°å’Œæ–¹æ³•çš„å½¢å¼å‚æ•°ä¸€æ ·ï¼Œåˆå§‹åŒ–å½¢å¼å‚æ•°ä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–å™¨å†…éƒ¨æœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡åä»¥åŠå®é™…å‚æ•°æ ‡ç­¾ä¾›è°ƒç”¨çš„æ—¶å€™ä½¿ç”¨ã€‚

æ€»ä¹‹ï¼Œåˆå§‹åŒ–å™¨å¹¶ä¸èƒ½åƒå‡½æ•°å’Œæ–¹æ³•é‚£æ ·åœ¨åœ†æ‹¬å·å‰é¢æœ‰ä¸€ä¸ªç”¨æ¥åŒºåˆ†çš„å‡½æ•°åã€‚å› æ­¤ï¼Œä¸€ä¸ªåˆå§‹åŒ–å™¨çš„å‚æ•°åç§°å’Œç±»å‹åœ¨è¯†åˆ«è¯¥è°ƒç”¨å“ªä¸ªåˆå§‹åŒ–å™¨çš„æ—¶å€™å°±æ‰®æ¼”äº†éå¸¸é‡è¦çš„è§’è‰²ã€‚å› æ­¤ï¼Œå¦‚æœä½ æ²¡æœ‰æä¾›å¤–éƒ¨åï¼ŒSwift ä¼šè‡ªåŠ¨ä¸ºæ¯ä¸€ä¸ªå½¢å¼å‚æ•°æä¾›ä¸€ä¸ªå¤–éƒ¨åç§°ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `Color` çš„ç»“æ„ä½“ï¼Œå®ƒæœ‰ä¸‰ä¸ªå¸¸é‡å±æ€§ï¼Œåˆ†åˆ«ä¸º `red`ï¼Œ`green` å’Œ `blue`ã€‚è¿™äº›å±æ€§å‚¨å­˜äº†ä¸€ä¸ªä»‹äº `0.0` åˆ° `1.0` ä¹‹é—´çš„å€¼æ¥è¡¨ç¤ºé¢œè‰²é‡Œçš„çº¢ã€ç»¿ã€è“ã€‚

`Color` ç»™å®ƒçš„çº¢ç»¿è“ç»„åˆæä¾›äº†ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œå®ƒå¸¦æœ‰ä¸‰ä¸ªåˆé€‚åç§°çš„ `Double` ç±»å‹å½¢å¼å‚æ•°ã€‚`Color` åŒæ ·æä¾›äº†ç¬¬äºŒä¸ªåªæœ‰ä¸€ä¸ª `white` å½¢å¼å‚æ•°çš„åˆå§‹åŒ–å™¨ï¼Œå®ƒç”¨æ¥ç»™ä¸‰ä¸ªé¢œè‰²ç»„åˆè®¾ç½®ç›¸åŒçš„å€¼ï¼š

```swift
struct Color {
    let red, green, blue: Double
    init(red: Double, green: Double, blue: Double) {
        self.red = red
        self.green = green
        self.blue = blue
    }
    init(white: Double) {
        red = white
        green = white
        blue = white
    }
}
```

é€šè¿‡ä¸ºæ¯ä¸€ä¸ªåˆå§‹åŒ–å™¨çš„å½¢å¼å‚æ•°æä¾›ä¸€ä¸ªåˆå§‹å€¼ï¼Œåˆå§‹åŒ–å™¨å¯ä»¥ç”¨æ¥åˆ›å»ºæ–°çš„ `Color` å®ä¾‹ï¼š

```swift
let megenta = Color(red: 1.0, green: 0.0, blue: 1.0)
let halfGray = Color(white: 0.5)
```

æ³¨æ„ï¼Œ**ä¸ä½¿ç”¨å¤–éƒ¨åç§°æ˜¯ä¸èƒ½è°ƒç”¨è¿™äº›åˆå§‹åŒ–å™¨çš„**ã€‚å¦‚æœå®šä¹‰äº†å¤–éƒ¨å‚æ•°åå°±å¿…é¡»ç”¨åœ¨åˆå§‹åŒ–å™¨é‡Œï¼Œå¦åˆ™ä¼šæŠ¥ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ï¼š

```swift
let veryGreen = Color(0.0, 1.0, 0.0)
// error: missing argument labels 'red:green:blue:' in call
```

### æ— å®é™…å‚æ•°æ ‡ç­¾çš„åˆå§‹åŒ–å™¨å½¢å¼å‚æ•°

å¦‚æœä½ ä¸æƒ³ä¸ºåˆå§‹åŒ–å™¨å½¢å¼å‚æ•°ä½¿ç”¨å®é™…å‚æ•°æ ‡ç­¾ï¼Œå¯ä»¥å†™ä¸€ä¸ªä¸‹åˆ’çº¿ (`_`) æ›¿ä»£æ˜ç¡®çš„å®é™…å‚æ•°æ ‡ç­¾ä»¥é‡å†™é»˜è®¤è¡Œä¸ºã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªä¹‹å‰ `Celsius` ç±»çš„æ‰©å±•ç‰ˆæœ¬ä¾‹å­ï¼Œå®ƒæœ‰ä¸€ä¸ªé¢å¤–çš„åˆå§‹åŒ–å™¨æ¥ä»å·²ç»æ˜¯æ‘„æ°åº¦çš„ `Double` å€¼åˆ›å»ºä¸€ä¸ªæ–°çš„ `Celsius` ç±»å®ä¾‹ï¼š

```swift
// è¯¥ç»“æ„ä½“ç”¨æ‘„æ°æ¸©åº¦è¡¨ç¤ºå­˜å‚¨æ¸©åº¦
struct Celsius {
    var temperatureInCelsius: Double
    init(fromFahrenheit fahrenheit: Double) {
        temperatureInCelsius = (fahrenheit - 32.0) / 1.8
    }
    init(fromKelvin kelvin: Double) {
        temperatureInCelsius = kelvin - 273.15
    }
    init(_ celsius: Double) {
        temperatureInCelsius = celsius
    }
}

let bodyTemperature = Celsius(37.0)
// bodyTemperature.temperatureInCelsius = 37.0
```

è°ƒç”¨åˆå§‹åŒ–å™¨ `Celsius(37.0)` æœ‰ç€æ¸…æ¥šçš„æ„å›¾è€Œä¸éœ€è¦å¤–éƒ¨å½¢å¼å‚æ•°åã€‚å› æ­¤ï¼ŒæŠŠåˆå§‹åŒ–å™¨å†™ä¸º `init(_ celsius: Double)` æ˜¯åˆé€‚çš„ï¼Œå®ƒä¹Ÿå°±å¯ä»¥é€šè¿‡æä¾›æœªå‘½åçš„ `Double` å€¼è¢«è°ƒç”¨äº†ã€‚

### å¯é€‰å±æ€§ç±»å‹

å¦‚æœä½ çš„è‡ªå®šä¹‰ç±»å‹æœ‰ä¸€ä¸ªé€»è¾‘ä¸Šæ˜¯å…è®¸ â€œæ— å€¼â€ çš„å­˜å‚¨å±æ€§ â€”â€” å¤§æ¦‚å› ä¸ºå®ƒçš„å€¼åœ¨åˆå§‹åŒ–æœŸé—´ä¸èƒ½è¢«è®¾ç½®ï¼Œæˆ–è€…å› ä¸ºå®ƒåœ¨ç¨åå…è®¸è®¾ç½®ä¸º â€œæ— å€¼â€â€”â€” å£°æ˜å±æ€§ä¸ºå¯é€‰ç±»å‹ã€‚å¯é€‰ç±»å‹çš„å±æ€§è‡ªåŠ¨åœ°åˆå§‹åŒ–ä¸º `nil`ï¼Œè¡¨ç¤ºè¯¥å±æ€§åœ¨åˆå§‹åŒ–æœŸé—´æ•…æ„è®¾ä¸º â€œè¿˜æ²¡æœ‰å€¼â€ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `SurveyQuestion` çš„ç±»ï¼Œæœ‰ä¸€ä¸ªå¯é€‰ `String` å±æ€§ï¼Œåä¸º `response` ï¼š

```swift
class SurveyQuestion {
    var text: String
    var response: String?
    init(text: String) {
        self.text = text
    }
    func ask() {
        print(text)
    }
}

let cheeseQuestion = SurveyQuestion(text: "Do you like cheese")
cheeseQuestion.ask()
// Do you like cheese
cheeseQuestion.response = "Yes, I do like cheese"
```

å¯¹è°ƒæŸ¥é—®é¢˜çš„å›ç­”ç›´åˆ°è¢«é—®çš„æ—¶å€™æ‰èƒ½çŸ¥é“ï¼Œæ‰€ä»¥ `response` å±æ€§è¢«å£°æ˜ä¸º `String?` ç±»å‹ï¼Œæˆ–è€…æ˜¯ â€œå¯é€‰ `Stirng` â€ã€‚å½“æ–°çš„ `SurveyQuestion` å®ä¾‹è¢«åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªä¸º `nil` çš„é»˜è®¤å€¼ï¼Œæ„å‘³ç€ â€œè¿˜æ²¡æœ‰å­—ç¬¦ä¸²â€ã€‚


### åœ¨åˆå§‹åŒ–ä¸­åˆ†é…å¸¸é‡å±æ€§

åœ¨åˆå§‹åŒ–çš„ä»»æ„æ—¶åˆ»ï¼Œä½ éƒ½å¯ä»¥ç»™å¸¸é‡å±æ€§èµ‹å€¼ï¼Œåªè¦å®ƒåœ¨åˆå§‹åŒ–ç»“æŸæ—¶è®¾ç½®äº†ç¡®å®šçš„å€¼å³å¯ã€‚ä¸€æ—¦å¸¸é‡å±æ€§è¢«èµ‹å€¼ï¼Œå®ƒå°±ä¸èƒ½å†è¢«ä¿®æ”¹äº†ã€‚

> æ³¨
> 
> å¯¹äºç±»å®ä¾‹æ¥è¯´ï¼Œå¸¸é‡å±æ€§åœ¨åˆå§‹åŒ–ä¸­åªèƒ½é€šè¿‡å¼•ç”¨çš„ç±»æ¥ä¿®æ”¹ã€‚å®ƒä¸èƒ½è¢«å­ç±»ä¿®æ”¹ã€‚

ä½ å¯ä»¥ä¿®æ”¹ä¸Šé¢ `SurveyQuestion` çš„ä¾‹å­ï¼Œç»™ `text` ä½¿ç”¨å¸¸é‡å±æ€§è€Œä¸æ˜¯å˜é‡å±æ€§æ¥è¡¨ç¤ºé—®é¢˜ï¼Œæ¥æ˜ç¡®ä¸€æ—¦ `SurveyQuestion` çš„å®ä¾‹è¢«åˆ›å»ºï¼Œé‚£ä¸ªé—®é¢˜å°†ä¸ä¼šæ”¹å˜ã€‚å°½ç®¡ç°åœ¨ `text` å±æ€§æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä½†æ˜¯å®ƒä¾ç„¶å¯ä»¥åœ¨ç±»çš„åˆå§‹åŒ–å™¨é‡Œè®¾ç½®ï¼š

```swift
class SurveyQuestion {
    let text: String // å®šä¹‰ä¸€ä¸ªå¸¸é‡å±æ€§
    var response: String?
    init(text: String) {
        self.text = text
    }
    func ask() {
        print(text)
    }
}

let cheeseQuestion = SurveyQuestion(text: "How about beets")
cheeseQuestion.ask()
// How about beets
cheeseQuestion.response = "I also like beets. (But not with cheese.)"
```


## 3. é»˜è®¤åˆå§‹åŒ–å™¨

Swift ä¸ºæ‰€æœ‰æ²¡æœ‰æä¾›åˆå§‹åŒ–å™¨çš„ç»“æ„ä½“æˆ–ç±»æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„åˆå§‹åŒ–å™¨æ¥ç»™æ‰€æœ‰çš„å±æ€§æä¾›äº†é»˜è®¤å€¼ã€‚è¿™ä¸ªé»˜è®¤çš„åˆå§‹åŒ–å™¨åªæ˜¯ç®€å•åœ°åˆ›å»ºäº†ä¸€ä¸ªæ‰€æœ‰å±æ€§éƒ½æœ‰é»˜è®¤å€¼çš„æ–°å®ä¾‹ã€‚

è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `ShoppingListItem` çš„ç±»ï¼Œå®ƒåœ¨è´­ç‰©åˆ—è¡¨çš„ç‰©å“é‡Œå°è£…äº†åç§°ï¼Œæ•°é‡å’Œè´­ä¹°çŠ¶æ€å±æ€§ï¼š

```swift
class ShoppingListItem {
    var name: String?
    var quantity = 1
    var pruchased = false
}

var item = ShoppingListItem()
```

ç”±äº `ShoppingListItem` ç±»çš„æ‰€æœ‰å±æ€§éƒ½æœ‰é»˜è®¤å€¼ï¼Œåˆç”±äºå®ƒæ˜¯ä¸€ä¸ªæ²¡æœ‰çˆ¶ç±»çš„åŸºç±»ï¼Œ `ShoppingListItem` ç±»è‡ªåŠ¨åœ°è·å¾—äº†ä¸€ä¸ªé»˜è®¤çš„åˆå§‹åŒ–å™¨ï¼Œä½¿ç”¨é»˜è®¤å€¼è®¾ç½®äº†å®ƒçš„æ‰€æœ‰å±æ€§ç„¶ååˆ›å»ºäº†æ–°çš„å®ä¾‹ã€‚( `name` å±æ€§æ˜¯ä¸€ä¸ªå¯é€‰ `String` å±æ€§ï¼Œæ‰€ä»¥å®ƒä¼šè‡ªåŠ¨è®¾ç½®ä¸º `nil` é»˜è®¤å€¼ï¼Œå°½ç®¡è¿™ä¸ªå€¼æ²¡æœ‰å†™åœ¨ä»£ç é‡Œã€‚) 

ä¸Šé¢çš„ä¾‹å­ç»™ `ShoppingListItem` ç±»ä½¿ç”¨é»˜è®¤åˆå§‹åŒ–å™¨ä»¥åŠåˆå§‹åŒ–å™¨è¯­æ³•åˆ›å»ºæ–°çš„å®ä¾‹ï¼Œå†™ä½œ `ShoppingListItem()`ï¼Œå¹¶ä¸”ç»™è¿™ä¸ªæ–°å®ä¾‹èµ‹äº†ä¸€ä¸ªåä¸º `item` çš„å˜é‡ã€‚


### ç»“æ„ä½“ç±»å‹çš„æˆå‘˜åˆå§‹åŒ–å™¨

**å¦‚æœç»“æ„ä½“ç±»å‹ä¸­æ²¡æœ‰å®šä¹‰ä»»ä½•è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ï¼Œå®ƒä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–å™¨**ã€‚ä¸åŒäºé»˜è®¤åˆå§‹åŒ–å™¨ï¼Œç»“æ„ä½“ä¼šæ¥æ”¶æˆå‘˜åˆå§‹åŒ–å™¨å³ä½¿å®ƒçš„å­˜å‚¨å±æ€§æ²¡æœ‰é»˜è®¤å€¼ã€‚

è¿™ä¸ªæˆå‘˜åˆå§‹åŒ–å™¨æ˜¯ä¸€ä¸ªå¿«é€Ÿåˆå§‹åŒ–æ–°ç»“æ„ä½“å®ä¾‹æˆå‘˜å±æ€§çš„æ–¹å¼ã€‚æ–°å®ä¾‹çš„å±æ€§åˆå§‹å€¼å¯ä»¥é€šè¿‡åç§°ä¼ é€’åˆ°æˆå‘˜åˆå§‹åŒ–å™¨é‡Œã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `Size` æœ‰ä¸¤ä¸ªå±æ€§åˆ†åˆ«æ˜¯ `width` å’Œ `height` çš„ç»“æ„ä½“ï¼Œè¿™ä¸¤ä¸ªå±æ€§é€šè¿‡åˆ†é…é»˜è®¤å€¼ `0.0`ï¼Œä»è€Œè¢«æ¨æ–­ä¸º `Double` ç±»å‹ã€‚

`Size` ç»“æ„ä½“è‡ªåŠ¨æ¥æ”¶ä¸€ä¸ª `init(width:heght:)` æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ `Size` å®ä¾‹ï¼š

```swift
struct Size {
    var width = 0.0, height = 0.0
}

let twoByTwo = Size(width: 2.0, height: 2.0)
```

å½“ä½ è°ƒç”¨æˆå‘˜åˆå§‹åŒ–å™¨æ—¶ï¼Œä½ å¯ä»¥çœç•¥ä»»ä½•æ‹¥æœ‰é»˜è®¤å€¼çš„å±æ€§ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ `Size` ç»“æ„ä½“çš„ `height` å’Œ `width` éƒ½æœ‰é»˜è®¤å€¼ã€‚ä½ å¯ä»¥çœç•¥å…¶ä¸­ä¸€ä¸ªæˆ–è€…éƒ½çœç•¥ï¼Œåˆå§‹åŒ–å™¨ä¼šä½¿ç”¨é»˜è®¤å€¼æ¥åˆå§‹åŒ–ä½ çœç•¥çš„é‚£ä¸ª â€”â€” æ¯”å¦‚è¯´ï¼š

```swift
let zeroByTwo = Size(height: 2.0)
print(zeroByTwo.width, zeroByTwo.height)
// 0.0 2.0

let zeroByZero = Size()
print(zeroByZero.width, zeroByZero.height)
// 0.0 0.0
```


## 4. å€¼ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜

**åˆå§‹åŒ–å™¨å¯ä»¥è°ƒç”¨å…¶ä»–åˆå§‹åŒ–å™¨æ¥æ‰§è¡Œéƒ¨åˆ†å®ä¾‹çš„åˆå§‹åŒ–**ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯æ‰€è°“çš„**åˆå§‹åŒ–å™¨å§”æ‰˜**ï¼Œé¿å…äº†å¤šä¸ªåˆå§‹åŒ–å™¨é‡Œå†—ä½™ä»£ç ã€‚

åˆå§‹åŒ–å™¨å§”æ‰˜çš„è¿ä½œï¼Œä»¥åŠå…è®¸å“ªäº›å½¢å¼çš„å§”æ‰˜ï¼Œè¿™äº›è§„åˆ™å¯¹äºå€¼ç±»å‹å’Œ `Class` ç±»å‹æ˜¯ä¸åŒçš„ã€‚å€¼ç±»å‹ (ç»“æ„ä½“å’Œæšä¸¾) ä¸æ”¯æŒç»§æ‰¿ï¼Œæ‰€ä»¥ä»–å®ƒä»¬çš„åˆå§‹åŒ–å™¨å§”æ‰˜çš„è¿‡ç¨‹ç›¸å½“ç®€å•ï¼Œå› ä¸ºå®ƒä»¬åªèƒ½æä¾›å®ƒä»¬è‡ªå·±ä¸ºå¦ä¸€ä¸ªåˆå§‹åŒ–å™¨å§”æ‰˜ã€‚å¦‚åŒç»§æ‰¿é‡Œæè¿°çš„é‚£æ ·ï¼Œæ€»ä¹‹ï¼Œç±»å¯ä»¥ä»å…¶ä»–ç±»ç»§æ‰¿ã€‚è¿™å°±æ„å‘³ç€ç±»æœ‰é¢å¤–çš„è´£ä»»æ¥ç¡®ä¿å®ƒä»¬ç»§æ‰¿çš„æ‰€æœ‰å­˜å‚¨å±æ€§åœ¨åˆå§‹åŒ–æœŸé—´éƒ½åˆ†é…äº†ä¸€ä¸ªåˆé€‚çš„å€¼ã€‚è¿™äº›è´£ä»»åœ¨ä¸‹è¾¹çš„ç±»çš„ç»§æ‰¿å’Œåˆå§‹åŒ–é‡Œåšè¯¦è¿°ã€‚

å¯¹äºå€¼ç±»å‹ï¼Œå½“ä½ å†™è‡ªå·±è‡ªå®šä¹‰çš„åˆå§‹åŒ–å™¨æ—¶å¯ä»¥ä½¿ç”¨ `self.init` ä»ç›¸åŒçš„å€¼ç±»å‹é‡Œå¼•ç”¨å…¶ä»–åˆå§‹åŒ–å™¨ã€‚ä½ åªèƒ½ä»åˆå§‹åŒ–å™¨é‡Œè°ƒç”¨ `self.init`ã€‚

æ³¨æ„ï¼š**å¦‚æœä½ ä¸ºå€¼ç±»å‹å®šä¹‰äº†è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ï¼Œä½ å°±ä¸èƒ½è®¿é—®é‚£ä¸ªç±»å‹çš„é»˜è®¤åˆå§‹åŒ–å™¨** (æˆ–è€…æ˜¯æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œå¦‚æœæ˜¯ç»“æ„ä½“çš„è¯)ã€‚è¿™ä¸ªé™åˆ¶é˜²æ­¢äº†åˆ«äººæ„å¤–åœ°ä½¿ç”¨è‡ªåŠ¨åˆå§‹åŒ–å™¨ä»è€Œç»•è¿‡å¤æ‚åˆå§‹åŒ–å™¨é‡Œæä¾›çš„é¢å¤–å¿…è¦é…ç½®è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚

> æ³¨æ„ï¼š
> 
> å¦‚æœä½ æƒ³è¦ä½ è‡ªå·±çš„è‡ªå®šä¹‰å€¼ç±»å‹èƒ½å¤Ÿä½¿ç”¨é»˜è®¤åˆå§‹åŒ–å™¨å’Œæˆå‘˜åˆå§‹åŒ–å™¨åˆå§‹åŒ–ï¼Œä»¥åŠä½ çš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨æ¥åˆå§‹åŒ–ï¼ŒæŠŠä½ çš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨å†™åœ¨**æ‰©å±•**é‡Œè€Œä¸æ˜¯ä½œä¸ºå€¼ç±»å‹åŸå§‹å®çš„ä¸€éƒ¨åˆ†ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ `Rect` ç»“æ„ä½“ä»£è¡¨å‡ ä½•çŸ©å½¢ã€‚è¿™ä¸ªä¾‹å­éœ€è¦ä¸¤ä¸ªç»“æ„ä½“ï¼Œåˆ†åˆ«æ˜¯ `Size` å’Œ `Point` ï¼Œéƒ½ä¸ºä»–ä»¬å„è‡ªçš„å±æ€§é»˜è®¤å€¼éƒ½æ˜¯ `0.0`ï¼š

```swift
struct Size {
    var width = 0.0, height = 0.0
}

struct Point {
    var x = 0.0, y = 0.0
}
```

ä½ å¯ä»¥ç”¨ä¸‰ä¸ªæ–¹å¼ä¸­çš„ä»»æ„ä¸€ä¸ªæ¥åˆå§‹åŒ–ä¸‹é¢çš„ `Rect` ç»“æ„ä½“ â€”â€” é€šè¿‡ä½¿ç”¨é»˜è®¤èµ‹é›¶åˆå§‹åŒ– `origin` å’Œ `size` å±æ€§å€¼ï¼Œé€šè¿‡æä¾›ä¸€ä¸ªå…·ä½“çš„åŸç‚¹åæ ‡å’Œå¤§å°ï¼Œæˆ–è€…æä¾›ä¸€ä¸ªå…·ä½“çš„ä¸­å¿ƒç‚¹å’Œå¤§å°ã€‚è¿™ä¸‰ç§åˆå§‹åŒ–é€‰é¡¹é€šè¿‡ä¸‰ä¸ªå†™åœ¨ `Rect` ç»“æ„ä½“å®šä¹‰é‡Œçš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ä»£è¡¨ï¼š

```swift
struct Rect {
    var origin = Point()
    var size = Size()
    init() {}
    init(origin: Point, size: Size) {
        self.origin = origin
        self.size = size
    }
    init(center: Point, size: Size) {
        let originX = center.x - (size.width / 2)
        let originY = center.y - (size.height / 2)
        self.init(origin: Point(x: originX, y: originY), size: size)
    }
}
```

ç¬¬ä¸€ä¸ª `Rect` åˆå§‹åŒ–å™¨ `init()`ï¼Œå’Œé»˜è®¤åˆå§‹åŒ–å™¨æœ‰ä¸€æ ·çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¦‚æœ `Rect` æ²¡æœ‰è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ï¼Œå®ƒå°†ä¼šä½¿ç”¨çš„é‚£ä¸ªé»˜è®¤åˆå§‹åŒ–å™¨ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨æ˜¯ç©ºçš„ï¼Œç”¨ä¸€ä¸ªå¤§æ‹¬å· `{}` æ¥è¡¨ç¤ºï¼Œå¹¶ä¸”ä¸ä¼šæ‰§è¡Œä»»ä½•åˆå§‹åŒ–ã€‚è°ƒç”¨è¿™ä¸ªåˆå§‹åŒ–å™¨ä¼šè¿”å›ä¸€ä¸ª `origin` å’Œ `size` å±æ€§éƒ½è¢«åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ `0.0` çš„ `Rect` å®ä¾‹ï¼š

```swift
let basicRect = Rect()
// basicRect's origin is (0.0, 0.0) and its size is (0.0, 0.0)
```

ç¬¬äºŒä¸ª `Rect` åˆå§‹åŒ–å™¨ `init(origin:size:)`ï¼Œå’Œæˆå‘˜åˆå§‹åŒ–å™¨åŠŸèƒ½ç›¸åŒï¼Œå°±æ˜¯å¦‚æœ `Rect` æ²¡æœ‰è‡ªå®šä¹‰çš„åˆå§‹åŒ–å™¨ï¼Œå®ƒå°†ä½¿ç”¨çš„é‚£ä¸ªåˆå§‹åŒ–å™¨ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨åªæ˜¯æŠŠ `origin` å’Œ `size` å®é™…å‚æ•°å€¼èµ‹å€¼ç»™åˆé€‚çš„å­˜å‚¨å±æ€§ï¼š

```swift
let originRect = Rect(origin: Point(x: 2.0, y: 2.0), size: Size(width: 5.0, height: 5.0))
// originRect's origin is (2.0, 2.0) and its size is (5.0, 5.0)
```

ç¬¬ä¸‰ä¸ª Rect çš„åˆå§‹åŒ–å™¨ `init(center:size:)`ï¼Œç•¥æ˜¾å¤æ‚ã€‚å®ƒä»¥è®¡ç®—ä¸€ä¸ªåŸºäº `center` å’Œ `size` å€¼çš„åŸç‚¹å¼€å§‹ã€‚ç„¶åè°ƒç”¨ (æˆ–æ˜¯ å§”æ‰˜) `init(origin:size:)` åˆå§‹åŒ–å™¨ï¼Œå®ƒåœ¨åˆé€‚çš„å±æ€§é‡Œå‚¨å­˜äº†æ–°çš„åŸç‚¹å’Œå¤§å°å€¼ï¼š

```swift
let centerRect = Rect(center: Point(x: 4.0, y: 4.0), size: Size(width: 3.0, height: 3.0))
// centerRect's origin is (2.5, 2.5) and its size is (3.0, 3.0)
```

`init(center:size:)` åˆå§‹åŒ–å™¨å¯èƒ½è‡ªå·±å·²ç»ä¸º `origin` å’Œ `size` å±æ€§èµ‹å€¼äº†æ–°å€¼ã€‚æ€»ä¹‹ï¼Œå¯¹äº `init(center:size:)` åˆå§‹åŒ–å™¨æ¥è¯´ï¼Œå¯ä»¥æ›´æ–¹ä¾¿ (æ›´æ¸…æ¥š) åœ°åˆ©ç”¨ç°æœ‰å·²ç»æä¾›äº†å‡†ç¡®åŠŸèƒ½çš„åˆå§‹åŒ–å™¨ã€‚



## 5. ç±»çš„ç»§æ‰¿å’Œåˆå§‹åŒ–


æ‰€æœ‰ç±»çš„å­˜å‚¨å±æ€§ â€”â€” åŒ…æ‹¬ä»å®ƒçš„çˆ¶ç±»ç»§æ‰¿çš„æ‰€æœ‰å±æ€§ â€”â€” éƒ½å¿…é¡»åœ¨åˆå§‹åŒ–æœŸé—´åˆ†é…åˆå§‹å€¼ã€‚

Swift ä¸º `Class` ç±»å‹å®šä¹‰äº†ä¸¤ç§åˆå§‹åŒ–å™¨ä»¥ç¡®ä¿æ‰€æœ‰çš„å­˜å‚¨å±æ€§æ¥æ”¶ä¸€ä¸ªåˆå§‹å€¼ã€‚è¿™äº›å°±æ˜¯æ‰€è°“çš„**æŒ‡å®šåˆå§‹åŒ–å™¨**å’Œ**ä¾¿æ·åˆå§‹åŒ–å™¨**ã€‚

### æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨

**æŒ‡å®šåˆå§‹åŒ–å™¨**æ˜¯ç±»çš„ä¸»è¦åˆå§‹åŒ–å™¨ã€‚æŒ‡å®šçš„åˆå§‹åŒ–å™¨å¯ä»¥åˆå§‹åŒ–æ‰€æœ‰é‚£ä¸ªç±»å¼•ç”¨çš„å±æ€§å¹¶ä¸”è°ƒç”¨åˆé€‚çš„çˆ¶ç±»åˆå§‹åŒ–å™¨æ¥ç»§ç»­è¿™ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ç»™çˆ¶ç±»é“¾ã€‚

ç±»åå‘äºå°‘é‡æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œå¹¶ä¸”ä¸€ä¸ªç±»é€šå¸¸åªæœ‰ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ã€‚æŒ‡å®šåˆå§‹åŒ–å™¨æ˜¯åˆå§‹åŒ–å¼€å§‹å¹¶æŒç»­åˆå§‹åŒ–è¿‡ç¨‹åˆ°çˆ¶ç±»é“¾çš„ â€œä¼ é€â€ ç‚¹ã€‚

æ¯ä¸ªç±»è‡³å°‘å¾—æœ‰ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ã€‚å¦‚åŒåœ¨åˆå§‹åŒ–å™¨çš„è‡ªåŠ¨ç»§æ‰¿é‡Œæè¿°çš„é‚£æ ·ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™äº›éœ€æ±‚é€šè¿‡ä»çˆ¶ç±»ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨æ¥æ»¡è¶³ã€‚

**ä¾¿æ·åˆå§‹åŒ–å™¨**æ˜¯æ¬¡è¦çš„ï¼Œä¸ºä¸€ä¸ªç±»æ”¯æŒåˆå§‹åŒ–å™¨ã€‚ä½ å¯ä»¥åœ¨ç›¸åŒçš„ç±»é‡Œå®šä¹‰ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨æ¥è°ƒç”¨ä¸€ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨ä½œä¸ºä¾¿æ·åˆå§‹åŒ–å™¨æ¥ç»™æŒ‡å®šåˆå§‹åŒ–å™¨è®¾ç½®é»˜è®¤å½¢å¼å‚æ•°ã€‚ä½ ä¹Ÿå¯ä»¥ä¸ºå…·ä½“çš„ä½¿ç”¨æƒ…å†µæˆ–è¾“å…¥çš„å€¼ç±»å‹å®šä¹‰ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ä»è€Œåˆ›å»ºè¿™ä¸ªç±»çš„å®ä¾‹ã€‚

å¦‚æœä½ çš„ç±»ä¸éœ€è¦ä¾¿æ·åˆå§‹åŒ–å™¨ä½ å¯ä»¥ä¸æä¾›å®ƒã€‚åœ¨ä¸ºé€šç”¨çš„åˆå§‹åŒ–æ¨¡å¼åˆ›å»ºå¿«æ·æ–¹å¼ä»¥èŠ‚çœæ—¶é—´æˆ–è€…ç±»çš„åˆå§‹åŒ–æ›´åŠ æ¸…æ™°æ˜äº†çš„æ—¶å€™ä½¿ç”¨ä¾¿æ·åˆå§‹åŒ–å™¨ã€‚


### æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨è¯­æ³•

ç”¨ä¸å€¼ç±»å‹çš„ç®€å•åˆå§‹åŒ–å™¨ç›¸åŒçš„æ–¹å¼æ¥å†™ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼š

```swift
init(parameters) {
    statements
}
```

ä¾¿æ·åˆå§‹åŒ–å™¨æœ‰ç€ç›¸åŒçš„ä¹¦å†™æ–¹å¼ï¼Œä½†æ˜¯è¦ç”¨ `convenience` ä¿®é¥°ç¬¦æ”¾åˆ° `init` å…³é”®å­—å‰ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼š

```swift
convenience init(parameters) {
    statements
}
```

### ç±»ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜

ä¸ºäº†ç®€åŒ–æŒ‡å®šå’Œä¾¿æ·åˆå§‹åŒ–å™¨ä¹‹é—´çš„è°ƒç”¨å…³ç³»ï¼ŒSwift åœ¨åˆå§‹åŒ–å™¨ä¹‹é—´çš„å§”æ‰˜è°ƒç”¨æœ‰ä¸‹é¢çš„ä¸‰ä¸ªè§„åˆ™:

1. æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»ä»å®ƒçš„ç›´ç³»çˆ¶ç±»è°ƒç”¨æŒ‡å®šåˆå§‹åŒ–å™¨ã€‚
2. ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»ä»ç›¸åŒçš„ç±»é‡Œè°ƒç”¨å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨ã€‚
3. ä¾¿æ·åˆå§‹åŒ–å™¨æœ€ç»ˆå¿…é¡»è°ƒç”¨ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ã€‚

ç®€å•è®°å¿†çš„è¿™äº›è§„åˆ™çš„æ–¹æ³•å¦‚ä¸‹ï¼š

* æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»æ€»æ˜¯å‘ä¸Šå§”æ‰˜ã€‚
* ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»æ€»æ˜¯æ¨ªå‘å§”æ‰˜ã€‚

ä¸‹é¢å›¾ä¸­è¡¨ç¤ºäº†è¿™äº›è§„åˆ™ï¼š

![](https://www.logcg.com/wp-content/uploads/2015/08/initializerDelegation01_2x.png)

å¦‚å›¾æ‰€ç¤ºï¼Œçˆ¶ç±»åŒ…å«ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¸¤ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ã€‚ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨è°ƒç”¨å¦ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ï¼Œè€Œåè€…åˆè°ƒç”¨äº†æŒ‡å®šåˆå§‹åŒ–å™¨ã€‚è¿™æ»¡è¶³äº†ä¸Šè¾¹çš„è§„åˆ™ 2 å’Œè§„åˆ™ 3ã€‚çˆ¶ç±»æœ¬èº«æ²¡æœ‰å…¶ä»–çˆ¶ç±»ï¼Œæ‰€ä»¥è§„åˆ™ 1 ä¸é€‚ç”¨ã€‚

è¿™ä¸ªå›¾ä¸­çš„å­ç±»æœ‰ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ã€‚ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»è°ƒç”¨è¿™ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ä¹‹ä¸€ï¼Œå› ä¸ºå®ƒåªèƒ½ä»åŒä¸€ä¸ªç±»ä¸­è°ƒç”¨åˆå§‹åŒ–å™¨ã€‚è¿™æ»¡è¶³äº†ä¸Šè¾¹çš„è§„åˆ™ 2 å’Œè§„åˆ™ 3ã€‚ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨åˆå¿…é¡»ä»çˆ¶ç±»è°ƒç”¨ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œè¿™æ»¡è¶³äº†ä¸Šè¾¹æ‰€è¯´çš„è§„åˆ™ 1ã€‚

ä¸‹å›¾å±•ç¤ºäº†å››ä¸ªç±»ä¹‹é—´æ›´å¤æ‚çš„å±‚çº§ç»“æ„ã€‚å®ƒæ¼”ç¤ºäº†æŒ‡å®šåˆå§‹åŒ–å™¨æ˜¯å¦‚ä½•åœ¨æ­¤å±‚çº§ç»“æ„ä¸­å……å½“â€ ç®¡é“â€ ä½œç”¨ï¼Œåœ¨ç±»çš„åˆå§‹åŒ–é“¾ä¸Šç®€åŒ–äº†ç±»ä¹‹é—´çš„å†…éƒ¨å…³ç³»ï¼š

![](https://www.logcg.com/wp-content/uploads/2015/08/initializerDelegation02_2x.png)


### ä¸¤æ®µå¼åˆå§‹åŒ–

Swift çš„ç±»åˆå§‹åŒ–æ˜¯ä¸€ä¸ªä¸¤æ®µå¼è¿‡ç¨‹ã€‚åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œæ¯ä¸€ä¸ªå­˜å‚¨å±æ€§è¢«å¼•å…¥ç±»å¹¶åˆ†é…äº†ä¸€ä¸ªåˆå§‹å€¼ã€‚ä¸€æ—¦æ¯ä¸ªå­˜å‚¨å±æ€§çš„åˆå§‹çŠ¶æ€è¢«ç¡®å®šï¼Œç¬¬äºŒä¸ªé˜¶æ®µå°±å¼€å§‹äº†ï¼Œæ¯ä¸ªç±»éƒ½æœ‰æœºä¼šåœ¨æ–°çš„å®ä¾‹å‡†å¤‡ä½¿ç”¨ä¹‹å‰æ¥å®šåˆ¶å®ƒçš„å­˜å‚¨å±æ€§ã€‚

ä¸¤æ®µå¼åˆå§‹åŒ–è¿‡ç¨‹çš„ä½¿ç”¨è®©åˆå§‹åŒ–æ›´åŠ å®‰å…¨ï¼ŒåŒæ—¶åœ¨æ¯ä¸ªç±»çš„å±‚çº§ç»“æ„ç»™ä¸äº†å®Œå¤‡çš„çµæ´»æ€§ã€‚ä¸¤æ®µå¼åˆå§‹åŒ–è¿‡ç¨‹å¯ä»¥é˜²æ­¢å±æ€§å€¼åœ¨åˆå§‹åŒ–ä¹‹å‰è¢«è®¿é—®ï¼Œè¿˜å¯ä»¥é˜²æ­¢å±æ€§å€¼è¢«å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨æ„å¤–åœ°èµ‹äºˆä¸åŒçš„å€¼ã€‚

Swift ç¼–è¯‘å™¨æ‰§è¡Œå››ç§æœ‰æ•ˆçš„å®‰å…¨æ£€æŸ¥æ¥ç¡®ä¿ä¸¤æ®µå¼åˆå§‹åŒ–è¿‡ç¨‹èƒ½å¤Ÿé¡ºåˆ©å®Œæˆï¼š

1. æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»ä¿è¯åœ¨å‘ä¸Šå§”æ‰˜ç»™çˆ¶ç±»åˆå§‹åŒ–å™¨ä¹‹å‰ï¼Œå…¶æ‰€åœ¨ç±»å¼•å…¥çš„æ‰€æœ‰å±æ€§éƒ½è¦åˆå§‹åŒ–å®Œæˆã€‚
2. æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»å…ˆå‘ä¸Šå§”æ‰˜çˆ¶ç±»åˆå§‹åŒ–å™¨ï¼Œç„¶åæ‰èƒ½ä¸ºç»§æ‰¿çš„å±æ€§è®¾ç½®æ–°å€¼ã€‚å¦‚æœä¸è¿™æ ·åšï¼ŒæŒ‡å®šåˆå§‹åŒ–å™¨èµ‹äºˆçš„æ–°å€¼å°†è¢«çˆ¶ç±»ä¸­çš„åˆå§‹åŒ–å™¨æ‰€è¦†ç›–ã€‚
3. ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»å…ˆå§”æ‰˜åŒç±»ä¸­çš„å…¶å®ƒåˆå§‹åŒ–å™¨ï¼Œç„¶åå†ä¸ºä»»æ„å±æ€§èµ‹æ–°å€¼ï¼ˆåŒ…æ‹¬åŒç±»é‡Œå®šä¹‰çš„å±æ€§ï¼‰ã€‚å¦‚æœæ²¡è¿™ä¹ˆåšï¼Œä¾¿æ·æ„åˆå§‹åŒ–å™¨èµ‹äºˆçš„æ–°å€¼å°†è¢«è‡ªå·±ç±»ä¸­å…¶å®ƒæŒ‡å®šåˆå§‹åŒ–å™¨æ‰€è¦†ç›–ã€‚
4. åˆå§‹åŒ–å™¨åœ¨ç¬¬ä¸€é˜¶æ®µåˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œä¸èƒ½è°ƒç”¨ä»»ä½•å®ä¾‹æ–¹æ³•ã€ä¸èƒ½è¯»å–ä»»ä½•å®ä¾‹å±æ€§çš„å€¼ï¼Œä¹Ÿä¸èƒ½å¼•ç”¨ `self` ä½œä¸ºå€¼ã€‚

 ç›´åˆ°ç¬¬ä¸€é˜¶æ®µç»“æŸç±»å®ä¾‹æ‰å®Œå…¨åˆæ³•ã€‚å±æ€§åªèƒ½è¢«è¯»å–ï¼Œæ–¹æ³•ä¹Ÿåªèƒ½è¢«è°ƒç”¨ï¼Œç›´åˆ°ç¬¬ä¸€é˜¶æ®µç»“æŸçš„æ—¶å€™ï¼Œè¿™ä¸ªç±»å®ä¾‹æ‰è¢«çœ‹åšæ˜¯åˆæ³•çš„ã€‚


**é˜¶æ®µ 1**ï¼š

* æŒ‡å®šæˆ–ä¾¿æ·åˆå§‹åŒ–å™¨åœ¨ç±»ä¸­è¢«è°ƒç”¨ï¼›
* ä¸ºè¿™ä¸ªç±»çš„æ–°å®ä¾‹åˆ†é…å†…å­˜ã€‚å†…å­˜è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼›
* è¿™ä¸ªç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç¡®ä¿æ‰€æœ‰ç”±æ­¤ç±»å¼•å…¥çš„å­˜å‚¨å±æ€§éƒ½æœ‰ä¸€ä¸ªå€¼ã€‚ç°åœ¨è¿™äº›å­˜å‚¨å±æ€§çš„å†…å­˜è¢«åˆå§‹åŒ–äº†ï¼›
* æŒ‡å®šåˆå§‹åŒ–å™¨ä¸Šäº¤çˆ¶ç±»çš„åˆå§‹åŒ–å™¨ä¸ºå…¶å­˜å‚¨å±æ€§æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ï¼›
* è¿™ä¸ªè°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–å™¨çš„è¿‡ç¨‹å°†æ²¿ç€åˆå§‹åŒ–å™¨é“¾ä¸€ç›´å‘ä¸Šè¿›è¡Œï¼Œç›´åˆ°åˆ°è¾¾åˆå§‹åŒ–å™¨é“¾çš„æœ€é¡¶éƒ¨ï¼›
* ä¸€æ—¦è¾¾äº†åˆå§‹åŒ–å™¨é“¾çš„æœ€é¡¶éƒ¨ï¼Œåœ¨é“¾é¡¶éƒ¨çš„ç±»ç¡®ä¿æ‰€æœ‰çš„å­˜å‚¨å±æ€§éƒ½æœ‰ä¸€ä¸ªå€¼ï¼Œæ­¤å®ä¾‹çš„å†…å­˜è¢«è®¤ä¸ºå®Œå…¨åˆå§‹åŒ–äº†ï¼Œæ­¤æ—¶ç¬¬ä¸€é˜¶æ®µå®Œæˆã€‚

**é˜¶æ®µ 2**ï¼š

* ä»é¡¶éƒ¨åˆå§‹åŒ–å™¨å¾€ä¸‹ï¼Œé“¾ä¸­çš„æ¯ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨éƒ½æœ‰æœºä¼šè¿›ä¸€æ­¥å®šåˆ¶å®ä¾‹ã€‚åˆå§‹åŒ–å™¨ç°åœ¨èƒ½å¤Ÿè®¿é—® `self` å¹¶ä¸”å¯ä»¥ä¿®æ”¹å®ƒçš„å±æ€§ï¼Œè°ƒç”¨å®ƒçš„å®ä¾‹æ–¹æ³•ç­‰ç­‰ï¼›
* æœ€ç»ˆï¼Œé“¾ä¸­ä»»ä½•ä¾¿æ·åˆå§‹åŒ–å™¨éƒ½æœ‰æœºä¼šå®šåˆ¶å®ä¾‹ä»¥åŠä½¿ç”¨ `self` ã€‚

ä¸‹é¢å±•ç¤ºäº†ç¬¬ä¸€é˜¶æ®µå‡å®šçš„å­ç±»å’Œçˆ¶ç±»ä¹‹é—´çš„åˆå§‹åŒ–è°ƒç”¨å…³ç³»ï¼š

![](https://www.logcg.com/wp-content/uploads/2015/08/twoPhaseInitialization01_2x.png)

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä»ä¸€ä¸ªå­ç±»çš„ä¾¿æ·åˆå§‹åŒ–å™¨å¼€å§‹ã€‚è¿™ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨è¿˜ä¸èƒ½ä¿®æ”¹ä»»ä½•å±æ€§ã€‚å®ƒå§”æ‰˜ç»™äº†åŒä¸€ç±»é‡Œçš„æŒ‡å®šåˆå§‹åŒ–å™¨ã€‚

æŒ‡å®šåˆå§‹åŒ–å™¨ç¡®ä¿æ‰€æœ‰çš„å­ç±»å±æ€§éƒ½æœ‰å€¼ï¼Œå¦‚å®‰å…¨æ£€æŸ¥ 1ã€‚ç„¶åå®ƒè°ƒç”¨çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨æ¥æ²¿ç€åˆå§‹åŒ–å™¨é“¾ä¸€ç›´å¾€ä¸Šå®Œæˆçˆ¶ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚

çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç¡®ä¿æ‰€æœ‰çš„çˆ¶ç±»å±æ€§éƒ½æœ‰å€¼ã€‚ç”±äºæ²¡æœ‰æ›´å¤šçš„çˆ¶ç±»æ¥åˆå§‹åŒ–ï¼Œä¹Ÿå°±ä¸éœ€è¦æ›´å¤šçš„å§”æ‰˜ã€‚

ä¸€æ—¦çˆ¶ç±»ä¸­æ‰€æœ‰å±æ€§éƒ½æœ‰åˆå§‹å€¼ï¼Œå®ƒçš„å†…å­˜å°±è¢«è®¤ä¸ºå®Œå…¨åˆå§‹åŒ–äº†ï¼Œç¬¬ä¸€é˜¶æ®µå®Œæˆã€‚

ä¸‹å›¾æ˜¯ç›¸åŒçš„åˆå§‹åŒ–è¿‡ç¨‹åœ¨ç¬¬äºŒé˜¶æ®µçš„æ ·å­ï¼š

![](https://www.logcg.com/wp-content/uploads/2015/08/twoPhaseInitialization02_2x.png)

ç°åœ¨çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨æœ‰æœºä¼šæ¥å®šåˆ¶æ›´å¤šå®ä¾‹ (å°½ç®¡æ²¡æœ‰è¿™ç§å¿…è¦)ã€‚

ä¸€æ—¦çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å®Œæˆäº†è°ƒç”¨ï¼Œå­ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å°±å¯ä»¥æ‰§è¡Œé¢å¤–çš„å®šåˆ¶ (åŒæ ·ï¼Œå°½ç®¡æ²¡æœ‰è¿™ç§å¿…è¦)ã€‚

æœ€åï¼Œä¸€æ—¦å­ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å®Œæˆï¼Œæœ€åˆè°ƒç”¨çš„ä¾¿æ·åˆå§‹åŒ–å™¨å°†ä¼šæ‰§è¡Œé¢å¤–çš„å®šåˆ¶æ“ä½œã€‚


### åˆå§‹åŒ–å™¨çš„ç»§æ‰¿å’Œé‡å†™

ä¸åƒåœ¨ Objective-C ä¸­çš„å­ç±»ï¼Œ**Swift çš„å­ç±»ä¸ä¼šé»˜è®¤ç»§æ‰¿çˆ¶ç±»çš„åˆå§‹åŒ–å™¨**ã€‚Swift çš„è¿™ç§æœºåˆ¶é˜²æ­¢çˆ¶ç±»çš„ç®€å•åˆå§‹åŒ–å™¨è¢«ä¸€ä¸ªæ›´ä¸“ç”¨çš„å­ç±»ç»§æ‰¿å¹¶è¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å®Œå…¨æˆ–é”™è¯¯åˆå§‹åŒ–çš„æ–°å®ä¾‹çš„æƒ…å†µå‘ç”Ÿã€‚

å¦‚æœä½ æƒ³è‡ªå®šä¹‰å­ç±»æ¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªå’Œçˆ¶ç±»ç›¸åŒçš„åˆå§‹åŒ–å™¨ï¼Œä½ å¯ä»¥åœ¨å­ç±»ä¸­ä¸ºé‚£äº›åˆå§‹åŒ–å™¨æä¾›å®šåˆ¶çš„å®ç°ã€‚

å½“ä½ å†™çš„å­ç±»åˆå§‹åŒ–å™¨åŒ¹é…çˆ¶ç±»æŒ‡å®šåˆå§‹åŒ–å™¨çš„æ—¶å€™ï¼Œä½ å®é™…ä¸Šå¯ä»¥é‡å†™é‚£ä¸ªåˆå§‹åŒ–å™¨ã€‚å› æ­¤ï¼Œåœ¨å­ç±»çš„åˆå§‹åŒ–å™¨å®šä¹‰ä¹‹å‰ä½ å¿…é¡»å†™ `override` ä¿®é¥°ç¬¦ã€‚å¦‚åŒé»˜è®¤åˆå§‹åŒ–å™¨æ‰€æè¿°çš„é‚£æ ·ï¼Œå³ä½¿æ˜¯è‡ªåŠ¨æä¾›çš„é»˜è®¤åˆå§‹åŒ–å™¨ä½ ä¹Ÿå¯ä»¥é‡å†™ã€‚

ä½œä¸ºä¸€ä¸ªé‡å†™çš„å±æ€§ï¼Œæ–¹æ³•æˆ–ä¸‹æ ‡è„šæœ¬ï¼Œ `override` ä¿®é¥°ç¬¦çš„å‡ºç°ä¼šè®© Swift æ¥æ£€æŸ¥çˆ¶ç±»æ˜¯å¦æœ‰ä¸€ä¸ªåŒ¹é…çš„æŒ‡å®šåˆå§‹åŒ–å™¨æ¥é‡å†™ï¼Œå¹¶ä¸”éªŒè¯ä½ é‡å†™çš„åˆå§‹åŒ–å™¨å·²ç»æŒ‰ç…§æ„å›¾æŒ‡å®šäº†å½¢å¼å‚æ•°ã€‚

> æ³¨æ„
> 
> å½“**é‡å†™çˆ¶ç±»æŒ‡å®šåˆå§‹åŒ–å™¨**æ—¶ï¼Œä½ å¿…é¡»å†™ `override` ä¿®é¥°ç¬¦ï¼Œå°±ç®—ä½ å­ç±»åˆå§‹åŒ–å™¨çš„å®ç°æ˜¯ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ã€‚

ç›¸åï¼Œå¦‚åŒä¸Šè¾¹ç±»ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜æ‰€æè¿°çš„è§„åˆ™é‚£æ ·ï¼Œå¦‚æœä½ å†™äº†ä¸€ä¸ª**åŒ¹é…çˆ¶ç±»ä¾¿æ·åˆå§‹åŒ–å™¨çš„å­ç±»åˆå§‹åŒ–å™¨**ï¼Œçˆ¶ç±»çš„ä¾¿æ·åˆå§‹åŒ–å™¨å°†æ°¸è¿œä¸ä¼šé€šè¿‡ä½ çš„å­ç±»ç›´æ¥è°ƒç”¨ã€‚å› æ­¤ï¼Œä½ çš„å­ç±»ä¸èƒ½ (ä¸¥æ ¼æ¥è®²) æä¾›çˆ¶ç±»åˆå§‹åŒ–å™¨çš„é‡å†™ã€‚å½“æä¾›ä¸€ä¸ªåŒ¹é…çš„çˆ¶ç±»ä¾¿æ·åˆå§‹åŒ–å™¨çš„å®ç°æ—¶ï¼Œä½ ä¸ç”¨å†™ `override` ä¿®é¥°ç¬¦ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `Vehicle` çš„åŸºç±»ã€‚åŸºç±»å£°æ˜äº†ä¸€ä¸ªåä¸º `numberOfWheels` çš„å­˜å‚¨å±æ€§ï¼Œç±»å‹ä¸º `Int` çš„é»˜è®¤å€¼ 0 ã€‚`numberOfWheels` å±æ€§é€šè¿‡ä¸€ä¸ªåä¸º `description` çš„**è®¡ç®—å±æ€§**æ¥åˆ›å»ºä¸€ä¸ª `String` ç±»å‹çš„è½¦è¾†ç‰¹å¾å­—ç¬¦ä¸²æè¿°ï¼š

```swift
class Vehicle {
    var numberOfWheels = 0
    var description: String {
        return "\(numberOfWheels) wheel(s)"
    }
}

let vehicle = Vehicle()
print("Vehicle: \(vehicle.description)")
// Vehicle: 0 wheel(s)
```

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `Bicycle` ç»§æ‰¿è‡ª `Vehicle` çš„å­ç±»ï¼š

```swift
class Bicycle: Vehicle {
    override init() {
        super.init()
        numberOfWheels = 2
    }
}
```

å­ç±» `Bicycle` å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰åˆå§‹åŒ–å™¨ `init()`ã€‚è¿™ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨å’Œ `Bicycle` çš„çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç›¸åŒ¹é…ï¼Œæ‰€ä»¥ `Bicycle` ä¸­çš„æŒ‡å®šåˆå§‹åŒ–å™¨éœ€è¦å¸¦ä¸Š `override` ä¿®é¥°ç¬¦ã€‚

`Bicycle` ç±»çš„ `init()` åˆå§‹åŒ–å™¨ä»¥è°ƒç”¨ `super.init()` å¼€å§‹ï¼Œè¿™ä¸ªæ–¹æ³•ä½œç”¨æ˜¯è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–å™¨ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ `Bicycle` åœ¨ä¿®æ”¹å±æ€§ä¹‹å‰å®ƒæ‰€ç»§æ‰¿çš„å±æ€§ `numberOfWheels` èƒ½è¢« `Vehicle` ç±»åˆå§‹åŒ–ã€‚åœ¨è°ƒç”¨ `super.init()` ä¹‹åï¼Œä¸€å¼€å§‹çš„ `numberOfWheels` å€¼ä¼šè¢«æ–°å€¼ `2` æ›¿æ¢ã€‚

å¦‚æœä½ åˆ›å»ºä¸€ä¸ª `Bicycle` å®ä¾‹ï¼Œä½ å¯ä»¥è°ƒç”¨ç»§æ‰¿çš„ `description` è®¡ç®—å±æ€§æ¥æŸ¥çœ‹å±æ€§ `numberOfWheels` æ˜¯å¦æœ‰æ”¹å˜ã€‚

```swift
let bicycle = Bicycle()
print("Bicycle: \(bicycle.description)")
// Bicycle: 2 wheel(s)
```

> æ³¨æ„
> 
> å­ç±»å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ä¿®æ”¹ç»§æ‰¿çš„**å˜é‡å±æ€§**ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹ç»§æ‰¿è¿‡æ¥çš„**å¸¸é‡å±æ€§**ã€‚


### åˆå§‹åŒ–å™¨çš„è‡ªåŠ¨ç»§æ‰¿

å¦‚ä¸Šæ‰€è¿°ï¼Œ**å­ç±»é»˜è®¤ä¸ä¼šç»§æ‰¿çˆ¶ç±»åˆå§‹åŒ–å™¨**ã€‚æ€»ä¹‹ï¼Œåœ¨ç‰¹å®šçš„æƒ…å†µä¸‹çˆ¶ç±»åˆå§‹åŒ–å™¨æ˜¯å¯ä»¥è¢«è‡ªåŠ¨ç»§æ‰¿çš„ã€‚å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€åœ¨è®¸å¤šåœºæ™¯ä¸­ä½ ä¸å¿…é‡å†™çˆ¶ç±»åˆå§‹åŒ–å™¨ï¼Œåªè¦å¯ä»¥å®‰å…¨æ“ä½œï¼Œä½ å°±å¯ä»¥æ¯«ä¸è´¹åŠ›åœ°ç»§æ‰¿çˆ¶ç±»çš„åˆå§‹åŒ–å™¨ã€‚

å‡è®¾ä½ ä¸ºä½ å­ç±»å¼•å…¥çš„ä»»ä½•æ–°çš„å±æ€§éƒ½æä¾›äº†é»˜è®¤å€¼ï¼Œè¯·éµå®ˆä»¥ä¸‹ 2 ä¸ªè§„åˆ™ï¼š
1. å¦‚æœä½ çš„å­ç±»æ²¡æœ‰å®šä¹‰ä»»ä½•æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œå®ƒä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»æ‰€æœ‰çš„**æŒ‡å®šåˆå§‹åŒ–å™¨**ã€‚
2ã€‚ å¦‚æœä½ çš„å­ç±»æä¾›äº†æ‰€æœ‰**çˆ¶ç±»æŒ‡å®šåˆå§‹åŒ–å™¨**çš„å®ç° â€”â€” è¦ä¹ˆæ˜¯é€šè¿‡è§„åˆ™ 1 ç»§æ‰¿æ¥çš„ï¼Œè¦ä¹ˆé€šè¿‡åœ¨å®šä¹‰ä¸­æä¾›è‡ªå®šä¹‰å®ç°çš„ â€”â€” é‚£ä¹ˆå®ƒ**è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰çš„çˆ¶ç±»ä¾¿æ·åˆå§‹åŒ–å™¨**ã€‚

### æŒ‡å®šå’Œä¾¿æ·åˆå§‹åŒ–å™¨çš„å®æˆ˜

ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†åœ¨æ“ä½œä¸­æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä¾¿æ·åˆå§‹åŒ–å™¨å’Œåˆå§‹åŒ–å™¨çš„è‡ªåŠ¨ç»§æ‰¿ã€‚è¿™ä¸ªä¾‹å­å®šä¹‰äº† `Food` ï¼Œ `RecipeIngredient` å’Œ `ShoppingListItem` ä¸‰ä¸ªç±»çš„å±‚çº§å…³ç³»ï¼Œå¹¶æ¼”ç¤ºäº†å®ƒä»¬çš„ç»§æ‰¿å…³ç³»æ˜¯å¦‚ä½•ç›¸äº’ä½œç”¨çš„ã€‚

åœ¨å±‚çº§å…³ç³»ä¸­çš„åŸºç±»ç§°ä¸º `Food`ï¼Œå®ƒæ˜¯ä¸€ä¸ªç®€å•çš„ç±»ç”¨æ¥å°è£…äº†é£Ÿå“çš„åç§°ã€‚`Food` ç±»å¼•å…¥äº†ä¸€ä¸ªåä¸º `name` çš„ `String` å±æ€§è¿˜æä¾›äº†ä¸¤ä¸ªåˆ›å»º `Food` å®ä¾‹çš„åˆå§‹åŒ–å™¨ï¼š

```swift
class Food {
    var name: String
    init(name: String) {
        self.name = name
    }
    convenience init() {
        self.init(name: "[Unnamed]")
    }
}
```

ä¸‹é¢çš„å›¾è¡¨å±•ç¤ºäº† `Food` ç±»çš„åˆå§‹åŒ–é“¾ï¼š

![](https://www.logcg.com/wp-content/uploads/2015/08/initializersExample01_2x.png)

ç±»æ²¡æœ‰é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œæ‰€ä»¥ `Food` ç±»æä¾›äº†ä¸€ä¸ªæ¥å—å•ä¸€å®é™…å‚æ•°çš„æŒ‡å®šåˆå§‹åŒ–å™¨å«åš `name` ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå…·ä½“çš„åç§°æ¥åˆ›å»ºæ–°çš„ `Food` å®ä¾‹ï¼š

```swift
// é€šè¿‡æŒ‡å®šåˆå§‹åŒ–å™¨åˆ›å»º Food å®ä¾‹
let nameMeat = Food(name: "Bacon")
// nameMeat's name is Bacon
```

`Food` ç±»çš„ `init(name: String)` åˆå§‹åŒ–å™¨æ˜¯ä¸€ä¸ª**æŒ‡å®šåˆå§‹åŒ–å™¨**ï¼Œå› ä¸ºå®ƒç¡®ä¿ `Food` ç±»æ–°å®ä¾‹çš„æ‰€æœ‰å­˜å‚¨å±æ€§éƒ½è¢«å®Œå…¨åˆå§‹åŒ–ã€‚`Food` ç±»æ²¡æœ‰çˆ¶ç±»ï¼Œæ‰€ä»¥ `init(name: String)` åˆå§‹åŒ–å™¨ä¸ç”¨è°ƒç”¨ `super.init()` æ¥å®Œæˆå®ƒçš„åˆå§‹åŒ–ã€‚

`Food` ç±»ä¹Ÿæä¾›äº†æ²¡æœ‰å®é™…å‚æ•°çš„**ä¾¿æ·åˆå§‹åŒ–å™¨** `init()`ã€‚`init()` åˆå§‹åŒ–å™¨é€šè¿‡å§”æ‰˜è°ƒç”¨åŒä¸€ç±»ä¸­å®šä¹‰çš„æŒ‡å®šåˆå§‹åŒ–å™¨ `init(name: String)` å¹¶ç»™å‚æ•° `name` ä¼ å€¼ `[Unnamed]` æ¥å®ç°æä¾›é»˜è®¤çš„åç§°å ä½ç¬¦ï¼š

```swift
// é€šè¿‡ä¾¿æ·åˆå§‹åŒ–å™¨åˆ›å»º Food å®ä¾‹
let mysteryMeat = Food()
// nameMeat's name is [Unnamed]
```

ç±»å±‚çº§ä¸­çš„ç¬¬äºŒä¸ªç±»æ˜¯ `Food` çš„å­ç±» `RecipeIngredient`ã€‚`RecipeIngredient` ç±»æ¨¡å‹æ„å»ºäº†é£Ÿè°±ä¸­ä¸€ä¸ªè°ƒå‘³å‰‚ã€‚å®ƒå¼•å…¥äº† `Int` ç±»å‹çš„æ•°é‡å±æ€§ `quantity` ï¼ˆä»¥åŠä» `Food` ç»§æ‰¿è¿‡æ¥çš„ `name` å±æ€§) å¹¶ä¸”å®šä¹‰äº†ä¸¤ä¸ªåˆå§‹åŒ–å™¨æ¥åˆ›å»º `RecipeIngredient` å®ä¾‹ï¼š

```swift
class RecipeIngredient: Food {
    var quantity: Int
    init(name: String, quantity: Int) {
        self.quantity = quantity
        super.init(name: name)
    }
    override convenience init(name: String) {
        self.init(name: name, quantity: 1)
    }
}
```

ä¸‹é¢çš„å›¾æ ‡å±•ç¤ºäº† `RecipeIngredient` çš„åˆå§‹åŒ–é“¾:

![](https://www.logcg.com/wp-content/uploads/2015/08/initializersExample02_2x.png)

`RecipeIngredient` ç±»åªæœ‰ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œ`init(name: String, quantity: Int)`ï¼Œå®ƒå¯ä»¥ç”¨æ¥å¡«å……æ–°çš„ `RecipeIngredient` å®ä¾‹ä¸­æ‰€æœ‰çš„å±æ€§ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨ä¸€å¼€å§‹å…ˆå°†ä¼ å…¥çš„ `quantity` å®é™…å‚æ•°èµ‹å€¼ç»™ `quantity` å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¹Ÿæ˜¯å”¯ä¸€ä¸€ä¸ªé€šè¿‡ `RecipeIngredient` å¼•å…¥çš„æ–°å±æ€§ã€‚éšåï¼Œåˆå§‹åŒ–å™¨å°†å‘ä¸Šå§”æ‰˜ç»™çˆ¶ç±» `Food` çš„ `init(name: String)` åˆå§‹åŒ–å™¨ã€‚è¿™ä¸ªè¿‡ç¨‹æ»¡è¶³ä¸Šè¾¹æ‰€è¿°çš„ä¸¤æ®µå¼åˆå§‹åŒ–çš„å®‰å…¨æ£€æŸ¥ 1ã€‚

`RecipeIngredient` åŒæ ·å®šä¹‰äº†ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ï¼Œ`init(name: String)`ï¼Œå®ƒåªé€šè¿‡ `name` æ¥åˆ›å»º `RecipeIngredient` çš„å®ä¾‹ã€‚è¿™ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨å‡è®¾ä»»æ„ `RecipeIngredient` æ²¡æœ‰æ˜ç¡®æ•°é‡çš„å®ä¾‹çš„ `quantity` å€¼éƒ½ä¸º 1 ã€‚ä¾¿æ·åˆå§‹åŒ–å™¨çš„å®šä¹‰è®© `RecipeIngredient` å®ä¾‹åˆ›å»ºçš„æ–¹ä¾¿æ›´å¿«æ·ï¼Œå¹¶ä¸”å½“åˆ›å»ºå¤šä¸ªå•æ•°å®ä¾‹æ—¶å¯ä»¥é¿å…ä»£ç å†—ä½™ã€‚è¿™ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨åªæ˜¯ç®€å•çš„å§”æ‰˜äº†ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä¼ é€’äº†å€¼ä¸º `1` çš„ `quantity` ã€‚

`RecipeIngredient` ç±»æä¾›çš„ `init(name: String)` ä¾¿æ·åˆå§‹åŒ–å™¨æ¥æ”¶ä¸ `Food` ä¸­æŒ‡å®šåˆå§‹åŒ–å™¨ `init(name: String)` ç›¸åŒçš„å½¢å¼å‚æ•°ã€‚å› ä¸ºè¿™ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ä»å®ƒçš„çˆ¶ç±»é‡å†™äº†ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œå®ƒå¿…é¡»ä½¿ç”¨ `override` ä¿®é¥°ç¬¦ (å¦‚åŒåœ¨åˆå§‹åŒ–å™¨çš„ç»§æ‰¿å’Œé‡å†™ä¸­æè¿°çš„é‚£æ ·)ã€‚

å°½ç®¡ `RecipeIngredient` æä¾›äº† `init(name: String)` åˆå§‹åŒ–å™¨ä½œä¸ºä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ï¼Œç„¶è€Œ `RecipeIngredient` ç±»ä¸ºæ‰€æœ‰çš„çˆ¶ç±»æŒ‡å®šåˆå§‹åŒ–å™¨æä¾›äº†å®ç°ã€‚å› æ­¤ï¼Œ `RecipeIngredient` ç±»ä¹Ÿè‡ªåŠ¨ç»§æ‰¿äº†çˆ¶ç±»æ‰€æœ‰çš„ä¾¿æ·åˆå§‹åŒ–å™¨ã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ `RecipeIngredient` çš„çˆ¶ç±»æ˜¯ `Food` ï¼Œå®ƒåªæœ‰ä¸€ä¸ª `init()` ä¾¿æ·åˆå§‹åŒ–å™¨ã€‚å› æ­¤è¿™ä¸ªåˆå§‹åŒ–å™¨ä¹Ÿè¢« `RecipeIngredient` ç±»ç»§æ‰¿ã€‚è¿™ä¸ªç»§æ‰¿çš„ `init()` å‡½æ•°å’Œ `Food` æä¾›çš„æ˜¯ä¸€æ ·çš„ï¼Œé™¤äº†å®ƒæ˜¯å§”æ‰˜ç»™ `RecipeIngredient` ç‰ˆæœ¬çš„ `init(name: String)` è€Œä¸æ˜¯ `Food` ç‰ˆæœ¬ã€‚

æ‰€æœ‰çš„è¿™ä¸‰ç§åˆå§‹åŒ–å™¨éƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºæ–°çš„ `RecipeIngredient` å®ä¾‹ï¼š

```swift
let oneMysteryItem = RecipeIngredient()
let oneBacon = RecipeIngredient(name: "Bacon")
let sixEggs = RecipeIngredient(name: "Eggs", quantity: 6)
```

ç±»å±‚çº§ä¸­ç¬¬ä¸‰ä¸ªä¹Ÿæ˜¯æœ€åä¸€ä¸ªç±»æ˜¯ `RecipeIngredient` çš„å­ç±»ï¼Œå«åš `ShoppingListItem` ã€‚è¿™ä¸ªç±»æ„å»ºäº†è´­ç‰©å•ä¸­å‡ºç°çš„æŸä¸€ç§è°ƒå‘³æ–™ã€‚

åœ¨è´­ç‰©è¡¨é‡Œæ¯ä¸€é¡¹éƒ½æ˜¯ä»æœªè´­ä¹°çŠ¶æ€å¼€å§‹çš„ã€‚ä¸ºäº†å±•ç°è¿™ä¸€äº‹å®ï¼Œ`ShoppingListItem` å¼•å…¥äº†ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„å±æ€§ `purchased` ï¼Œé»˜è®¤å€¼ `false` ã€‚ `ShoppingListItem` ä¹Ÿæ·»åŠ äº†ä¸€ä¸ªè®¡ç®—å±æ€§ `description` å±æ€§ï¼Œå®ƒæä¾›äº†å…³äº `ShoppingListItem` å®ä¾‹çš„ä¸€äº›æ–‡å­—æè¿°ï¼š

```swift
class ShoppingListItem: RecipeIngredient {
    var purchased = false
    var description: String {
        var output = "\(quantity) x \(name)"
        output += purchased ? " âœ”" : " âœ˜"
        return output
    }
}
```

`ShoppingListItem` æ²¡æœ‰å®šä¹‰åˆå§‹åŒ–å™¨æ¥ç»™ `purchased` ä¸€ä¸ªåˆå§‹å€¼ï¼Œè¿™æ˜¯å› ä¸ºä»»ä½•æ·»åŠ åˆ°è´­ç‰©å•ï¼ˆè¿™é‡Œçš„æ¨¡å‹ï¼‰çš„é¡¹çš„åˆå§‹çŠ¶æ€æ€»æ˜¯æœªè´­ä¹°ã€‚

ç”±äºå®ƒä¸ºè‡ªå·±å¼•å…¥çš„æ‰€æœ‰å±æ€§æä¾›äº†ä¸€ä¸ªé»˜è®¤å€¼å¹¶ä¸”è‡ªå·±æ²¡æœ‰å®šä¹‰ä»»ä½•åˆå§‹åŒ–å™¨ï¼Œ `ShoppingListItem` ä¼šè‡ªåŠ¨ä»çˆ¶ç±»ç»§æ‰¿æ‰€æœ‰çš„æŒ‡å®šå’Œä¾¿æ·åˆå§‹åŒ–å™¨ã€‚

ä¸‹å›¾å±•ç¤ºäº†ä¸‰ä¸ªç±»çš„åˆå§‹åŒ–é“¾ï¼š

![](https://www.logcg.com/wp-content/uploads/2015/08/initializersExample03_2x.png)

ä½ å¯ä»¥ä½¿ç”¨å…¨éƒ¨ä¸‰ä¸ªç»§æ‰¿æ¥çš„åˆå§‹åŒ–å™¨æ¥åˆ›å»º `ShoppingListItem` çš„æ–°å®ä¾‹ï¼š

```swift
var breakfastList = [
    ShoppingListItem(),
    ShoppingListItem(name: "Bacon"),
    ShoppingListItem(name: "Eggs", quantity: 6),
]

breakfastList[0].name = "Orange juice"
breakfastList[0].purchased = true
for item in breakfastList {
    print(item.description)
}
// 1 x Orange juice âœ”
// 1 x Bacon âœ˜
// 6 x Eggs âœ˜
```

è¿™é‡Œï¼Œåä¸º `breakfastList` çš„æ•°ç»„é€šè¿‡åŒ…å«ä¸‰ä¸ª `ShoppingListItem` å®ä¾‹çš„æ•°ç»„å­—é¢é‡åˆ›å»ºã€‚æ•°ç»„çš„ç±»å‹è¢«æ¨æ–­ä¸º `[ShoppingListItem]` ã€‚æ•°ç»„åˆ›å»ºä¹‹åï¼Œæ•°ç»„ç¬¬ä¸€ä¸ª `ShoppingListItem` çš„ `name` ä» `"[Unnamed]"` ä¿®æ”¹ä¸º `"Orange juice"` ï¼Œå¹¶ä¸”å®ƒçš„ `purchased` ä¹Ÿæ ‡è®°ä¸ºäº† `true` ã€‚ç„¶åé€šè¿‡éå†æ‰“å°æ¯ä¸ªæ•°ç»„çš„æè¿°ï¼Œå±•ç¤ºäº†å®ƒä»¬çš„é»˜è®¤çŠ¶æ€éƒ½æŒ‰ç…§é¢„æœŸè¢«è®¾ç½®äº†ã€‚



## 6. å¯å¤±è´¥åˆå§‹åŒ–å™¨

å®šä¹‰ç±»ã€ç»“æ„ä½“æˆ–æšä¸¾åˆå§‹åŒ–æ—¶å¯ä»¥å¤±è´¥åœ¨æŸäº›æƒ…å†µä¸‹ä¼šç®¡å¤§ç”¨ã€‚è¿™ä¸ªå¤±è´¥å¯èƒ½ç”±ä»¥ä¸‹å‡ ç§æ–¹å¼è§¦å‘ï¼ŒåŒ…æ‹¬ç»™åˆå§‹åŒ–ä¼ å…¥æ— æ•ˆçš„å½¢å¼å‚æ•°å€¼ï¼Œæˆ–ç¼ºå°‘æŸç§å¤–éƒ¨æ‰€éœ€çš„èµ„æºï¼Œåˆæˆ–æ˜¯å…¶ä»–é˜»æ­¢åˆå§‹åŒ–çš„æƒ…å†µã€‚

ä¸ºäº†å¦¥å–„å¤„ç†è¿™ç§å¯èƒ½å¤±è´¥çš„æƒ…å†µï¼Œåœ¨ç±»ã€ç»“æ„ä½“æˆ–æšä¸¾ä¸­å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªå¯å¤±è´¥çš„åˆå§‹åŒ–å™¨ã€‚é€šè¿‡åœ¨ `init` å…³é”®å­—åé¢æ·»åŠ é—®å·ï¼ˆ`init?`ï¼‰æ¥å†™ã€‚

> æ³¨æ„
> 
> ä½ ä¸èƒ½å®šä¹‰**å¯å¤±è´¥**å’Œ**éå¯å¤±è´¥**çš„åˆå§‹åŒ–å™¨ä¸ºç›¸åŒçš„å½¢å¼å‚æ•°ç±»å‹å’Œåç§°ã€‚

å¯å¤±è´¥çš„åˆå§‹åŒ–å™¨åˆ›å»ºäº†ä¸€ä¸ªåˆå§‹åŒ–ç±»å‹çš„å¯é€‰å€¼ã€‚ä½ é€šè¿‡åœ¨å¯å¤±è´¥åˆå§‹åŒ–å™¨å†™ `return nil` è¯­å¥ï¼Œæ¥è¡¨æ˜å¯å¤±è´¥åˆå§‹åŒ–å™¨åœ¨ä½•ç§æƒ…å†µä¸‹ä¼šè§¦å‘åˆå§‹åŒ–å¤±è´¥ã€‚

> æ³¨æ„
> 
> ä¸¥æ ¼æ¥è®²ï¼Œåˆå§‹åŒ–å™¨ä¸ä¼šæœ‰è¿”å›å€¼ã€‚ç›¸åï¼Œå®ƒä»¬çš„è§’è‰²æ˜¯ç¡®ä¿åœ¨åˆå§‹åŒ–ç»“æŸæ—¶ï¼Œ`self` èƒ½å¤Ÿè¢«æ­£ç¡®åˆå§‹åŒ–ã€‚è™½ç„¶ä½ å†™äº† `return nil` æ¥è§¦å‘åˆå§‹åŒ–å¤±è´¥ï¼Œä½†æ˜¯ä½ ä¸èƒ½ä½¿ç”¨ `return` å…³é”®å­—æ¥è¡¨ç¤ºåˆå§‹åŒ–æˆåŠŸäº†ã€‚

æ¯”å¦‚è¯´ï¼Œå¯å¤±è´¥åˆå§‹åŒ–å™¨ä¸ºæ•°å­—ç±»å‹è½¬æ¢å™¨åšå®ç°ã€‚ä¸ºäº†ç¡®ä¿æ•°å­—ç±»å‹ä¹‹é—´çš„è½¬æ¢ä¿æŒå€¼ä¸å˜ï¼Œä½¿ç”¨ `init(exactly:) ` åˆå§‹åŒ–å™¨ã€‚å¦‚æœç±»å‹è½¬æ¢ä¸èƒ½ä¿æŒå€¼ä¸å˜ï¼Œåˆå§‹åŒ–å™¨å¤±è´¥ã€‚

```swift
let wholeNumber: Double = 12345.0
let pi = 3.14159

if let valueMaintained = Int(exactly: wholeNumber) {
    print("\(wholeNumber) conversion to int maintains value")
}
// 12345.0 conversion to int maintains value
let valueChanged = Int(exactly: pi)
// valueChanged æ˜¯ Int? ç±»å‹ï¼Œè€Œä¸æ˜¯ Int ç±»å‹

if valueChanged == nil {
    print("\(pi) conversion to int does not maintain value")
}
// 3.14159 conversion to int does not maintain value
```

è‡ªå®šä¹‰çš„ `Animal` ç»“æ„ä½“ç¤ºä¾‹ï¼š

```swift
// ------------------------------------------------------------
// 1. ä¸€ä¸ªåä¸º Animal çš„ç»“æ„ä½“
struct Animal {
    let species: String
    
    // å¯å¤±è´¥åˆå§‹åŒ–å™¨ï¼Œæ£€æŸ¥ä¼ å…¥çš„ species å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™åˆå§‹åŒ–å¤±è´¥
    init?(species: String) {
        if species.isEmpty { return nil }
        self.species = species
    }
}

// ------------------------------------------------------------
// 2. é€šè¿‡å¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Animal å®ä¾‹ï¼Œå¹¶æ£€æŸ¥åˆå§‹åŒ–æ˜¯å¦æˆåŠŸ
let someCreature = Animal(species: "Giraffe")
// è¿™é‡Œçš„ someCreature æ˜¯ Animal? ç±»å‹ï¼Œè€Œä¸æ˜¯ Animal ç±»å‹

if let gifaffe = someCreature {
    print("An animal was initialized with a species of \(gifaffe)")
}
// An animal was initialized with a species of Animal(species: "Giraffe")

// ------------------------------------------------------------
// 3. å¦‚æœç»™å¯å¤±è´¥åˆå§‹åŒ–å™¨çš„ species å‚æ•°ä¼ é€’ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆ™åˆå§‹åŒ–å¤±è´¥
let anonymousCreature = Animal(species: "")
// è¿™é‡Œçš„ anonymousCreature æ˜¯ Animal? ç±»å‹ï¼Œè€Œä¸æ˜¯ Animal ç±»å‹

if anonymousCreature == nil {
    print("anonymousCreature creature could not be initialized")
}
// anonymousCreature creature could not be initialized
```


### æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨

ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥åœ¨å¸¦ä¸€ä¸ªæˆ–å¤šä¸ªå½¢å¼å‚æ•°çš„æšä¸¾ä¸­é€‰æ‹©åˆé€‚çš„æƒ…å†µã€‚å¦‚æœæä¾›çš„å½¢å¼å‚æ•°æ²¡æœ‰åŒ¹é…åˆé€‚çš„æƒ…å†µåˆå§‹åŒ–å™¨å°±å¯èƒ½å¤±è´¥ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰ä¸€ä¸ªåä¸º `TemperatureUnit` çš„æšä¸¾ï¼Œæœ‰ä¸‰ç§å¯èƒ½çš„çŠ¶æ€ (`Kelvin`ï¼Œ`Celsius` å’Œ `Fahrenheit` )ã€‚ä½¿ç”¨ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥æ‰¾ä¸€ä¸ªåˆé€‚ç”¨æ¥è¡¨ç¤ºæ°”æ¸©ç¬¦å·çš„ `Character` å€¼ï¼š

```swift
enum TemperatureUnit {
    case Kelvin, Celsius, Fahrenheit
    init?(symbol: Character) {
        switch symbol {
        case "K":
            self = .Kelvin
        case "C":
            self = .Celsius
        case "F":
            self = .Fahrenheit
        default:
            return nil
        }
    }
}
```

ä½ å¯ä»¥ä½¿ç”¨å¯å¤±è´¥åˆå§‹åŒ–å™¨ä¸ºå¯èƒ½çš„ä¸‰ç§çŠ¶æ€æ¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æšä¸¾æƒ…å†µï¼Œå½“å‚æ•°çš„å€¼ä¸èƒ½ä¸ä»»æ„ä¸€æšä¸¾æˆå‘˜ç›¸åŒ¹é…æ—¶ï¼Œè¯¥æšä¸¾ç±»å‹åˆå§‹åŒ–å¤±è´¥ï¼š

```swift
let fahrenheitUnit = TemperatureUnit(symbol: "F")
if fahrenheitUnit != nil {
    print("è¿™æ˜¯å·²å®šä¹‰çš„æ¸©åº¦å•ä½ï¼Œå› æ­¤åˆå§‹åŒ–æˆåŠŸã€‚")
}

let unknowUnit = TemperatureUnit(symbol: "X")
if unknowUnit == nil {
    print("è¿™æ˜¯æœªå®šä¹‰çš„æ¸©åº¦å•ä½ï¼Œå› æ­¤åˆå§‹åŒ–å¤±è´¥ã€‚")
}
```

### å¸¦æœ‰åŸå§‹å€¼æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨

> ğŸ’¡ å¦‚æœæšä¸¾ç±»å‹æœ‰åŸå§‹å€¼ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºå®ƒåˆ›å»ºä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ï¼š`init?(rawValue:)`ã€‚

å¸¦æœ‰åŸå§‹å€¼çš„æšä¸¾ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ `init?(rawValue:)`ï¼Œè¯¥å¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥æ”¶ä¸€ä¸ªåä¸º `rawValue` çš„åˆé€‚çš„åŸå§‹å€¼ç±»å‹å½¢å¼å‚æ•°å¦‚æœæ‰¾åˆ°äº†åŒ¹é…çš„æšä¸¾æƒ…å†µå°±é€‰æ‹©å…¶ä¸€ï¼Œæˆ–è€…æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å€¼å°±è§¦å‘åˆå§‹åŒ–å¤±è´¥ã€‚

ä½ å¯ä»¥æŠŠä¸Šé¢çš„ `TemperatureUnit` çš„ä¾‹å­å¯ä»¥é‡å†™ä¸ºä½¿ç”¨ `Character` åŸå§‹å€¼å¹¶å¸¦æœ‰æ”¹è¿‡çš„ `init?(rawValue:)` åˆå§‹åŒ–å™¨ï¼š

```swift
enum TemperatureUnit: Character {
    case Kelvin = "K", Celsius = "C", Fahrenheit = "F"
}

let fahrenheitUnit = TemperatureUnit(rawValue: "F")
if fahrenheitUnit != nil {
    print("è¿™æ˜¯å·²å®šä¹‰çš„æ¸©åº¦å•ä½ï¼Œå› æ­¤åˆå§‹åŒ–æˆåŠŸã€‚")
}

let unknowUnit = TemperatureUnit(rawValue: "X")
if unknowUnit == nil {
    print("è¿™æ˜¯æœªå®šä¹‰çš„æ¸©åº¦å•ä½ï¼Œå› æ­¤åˆå§‹åŒ–å¤±è´¥ã€‚")
}
```

### åˆå§‹åŒ–å¤±è´¥çš„ä¼ é€’

ç±»ï¼Œç»“æ„ä½“æˆ–æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨å¯ä»¥æ¨ªå‘å§”æ‰˜åˆ°åŒä¸€ä¸ªç±»ï¼Œç»“æ„ä½“æˆ–æšä¸¾é‡Œçš„å¦ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ã€‚ç±»ä¼¼åœ°ï¼Œå­ç±»çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨å¯ä»¥å‘ä¸Šå§”æ‰˜åˆ°çˆ¶ç±»çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨ã€‚

æ— è®ºå“ªç§æƒ…å†µï¼Œå¦‚æœä½ å§”æ‰˜åˆ°å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨å¯¼è‡´äº†åˆå§‹åŒ–å¤±è´¥ï¼Œé‚£ä¹ˆæ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ä¹Ÿä¼šç«‹å³å¤±è´¥ï¼Œå¹¶ä¸”ä¹‹åä»»ä½•åˆå§‹åŒ–ä»£ç éƒ½ä¸ä¼šæ‰§è¡Œã€‚

> æ³¨æ„
> 
> **å¯å¤±è´¥åˆå§‹åŒ–å™¨**ä¹Ÿå¯ä»¥å§”æ‰˜å…¶ä»–çš„**éå¯å¤±è´¥åˆå§‹åŒ–å™¨**ã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥ä¸ºå·²æœ‰çš„åˆå§‹åŒ–è¿‡ç¨‹æ·»åŠ åˆå§‹åŒ–å¤±è´¥çš„æ¡ä»¶ã€‚


```swift
import UIKit

// çˆ¶ç±» Product
class Product {
    let name: String
    init?(name: String) {
        if name.isEmpty { return nil }
        self.name = name
    }
}

// å­ç±» CartItem ç±»å»ºç«‹äº†ä¸€ä¸ªåœ¨çº¿è´­ç‰©è½¦ä¸­çš„ç‰©å“æ¨¡å‹
class CartItem: Product {
    let quantity: Int
    init?(name: String, quantity: Int) {
        if quantity < 1 { return nil }
        self.quantity = quantity
        super.init(name: name)
    }
}

// åˆ›å»º2åŒè¢œå­
if let twoSocks = CartItem(name: "sock", quantity: 2) {
    print("Item: \(twoSocks.name), quantity: \(twoSocks.quantity)")
}
// Item: sock, quantity: 2

// å¦‚æœåˆ›å»ºäº† 0 åŒè¡¬è¡«ï¼Œåˆ™å­ç±»åˆå§‹åŒ–å™¨å¯¼è‡´å¤±è´¥
if let zeroShirts = CartItem(name: "shirt", quantity: 0) {
    print("Item: \(zeroShirts.name), quantity: \(zeroShirts.quantity)")
} else {
    print("Unable to initialize zero shirts")
}
// Unable to initialize zero shirts

// ç±»ä¼¼çš„ï¼Œå¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªæ²¡æœ‰åå­—çš„å•†å“ï¼Œé‚£ä¹ˆçˆ¶ç±» Product çš„åˆå§‹åŒ–å™¨å°±ä¼šå¯¼è‡´åˆå§‹åŒ–å¤±è´¥
if let oneUnnamed = CartItem(name: "", quantity: 1) {
    print("Item: \(oneUnnamed.name), quantity: \(oneUnnamed.quantity)")
} else {
    print("Unable to initialize one unnamed product")
}
// Unable to initialize one unnamed product

```

### é‡å†™å¯å¤±è´¥åˆå§‹åŒ–å™¨

ä½ å¯ä»¥åœ¨å­ç±»é‡Œé‡å†™çˆ¶ç±»çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨ã€‚å°±å¥½æ¯”å…¶ä»–çš„åˆå§‹åŒ–å™¨ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥ç”¨å­ç±»çš„éå¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥é‡å†™çˆ¶ç±»å¯å¤±è´¥åˆå§‹åŒ–å™¨ã€‚è¿™æ ·å…è®¸ä½ å®šä¹‰ä¸€ä¸ªåˆå§‹åŒ–ä¸ä¼šå¤±è´¥çš„å­ç±»ï¼Œå°½ç®¡çˆ¶ç±»çš„åˆå§‹åŒ–å…è®¸å¤±è´¥ã€‚

æ³¨æ„å¦‚æœä½ ç”¨éå¯å¤±è´¥çš„å­ç±»åˆå§‹åŒ–å™¨é‡å†™äº†ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ï¼Œå‘ä¸Šå§”æ‰˜åˆ°çˆ¶ç±»åˆå§‹åŒ–å™¨çš„å”¯ä¸€åŠæ³•æ˜¯**å¼ºåˆ¶å±•å¼€çˆ¶ç±»å¯å¤±è´¥åˆå§‹åŒ–å™¨çš„ç»“æœ**ã€‚

> æ³¨æ„
> 
> ä½ å¯ä»¥ç”¨ä¸€ä¸ª**éå¯å¤±è´¥åˆå§‹åŒ–å™¨é‡å†™ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨**ï¼Œä½†åè¿‡æ¥æ˜¯ä¸è¡Œçš„ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `Document` çš„ç±»ã€‚è¿™ä¸ªç±»å»ºæ¨¡äº†ä¸€ä¸ªæ–‡æ¡£ï¼Œå…¶ä¸­çš„ `name` å±æ€§è¦ä¹ˆæ˜¯ä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸²å€¼è¦ä¹ˆä¸º `nil` ï¼Œä½†ä¸èƒ½æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼š

```swift
class Document {
    var name: String?
    
    // è¯¥åˆå§‹åŒ–å™¨åˆ›å»ºäº†ä¸€ä¸ªåå­—ä¸º nil çš„æ–‡æ¡£
    init() { }
    
    // è¯¥ã€Œå¯å¤±è´¥åˆå§‹åŒ–å™¨ã€åˆ›å»ºäº†ä¸€ä¸ªåå­—éç©ºçš„æ–‡æ¡£
    init?(name: String) {
        self.name = name
        if name.isEmpty { return nil }
    }
}
```

ä¸‹é¢è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `AutomaticallyNamedDocument` çš„ `Document` ç±»çš„å­ç±»ã€‚è¿™ä¸ªå­ç±»é‡å†™äº† `Document` ç±»çš„ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ã€‚è¿™äº›é‡å†™ç¡®ä¿äº† `AutomaticallyNamedDocument` å®ä¾‹åœ¨åˆå§‹åŒ–æ—¶æ²¡æœ‰åå­—æˆ–è€…ä¼ ç»™ `init(name:)` åˆå§‹åŒ–å™¨ä¸€ä¸ªç©ºå­—ç¬¦ä¸²æ—¶ `name` çš„åˆå§‹å€¼ä¸º `"[Untitled]"`ï¼š

```swift
class AutomaticallyNamedDocument: Document {
    override init() {
        super.init()
        self.name = "[Untitled]"
    }
    override init(name: String) {
        super.init()
        if name.isEmpty {
            self.name = "[Untitled]"
        } else {
            self.name = name
        }
    }
}
```

`AutomaticallyNamedDocument` ç±»ç”¨éå¯å¤±è´¥çš„ `init(name:)` åˆå§‹åŒ–å™¨é‡å†™äº†çˆ¶ç±»çš„å¯å¤±è´¥ `init?(name:)` åˆå§‹åŒ–å™¨ã€‚å› ä¸º `AutomaticallyNamedDocument` ç±»ç”¨ä¸åŒçš„æ–¹å¼å¤„ç†äº†ç©ºå­—ç¬¦ä¸²çš„æƒ…å†µï¼Œå®ƒçš„åˆå§‹åŒ–å™¨ä¸ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒæä¾›äº†éå¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥ä»£æ›¿ã€‚

ä½ å¯ä»¥åœ¨åˆå§‹åŒ–å™¨é‡Œä½¿ç”¨å¼ºåˆ¶å±•å¼€æ¥ä»çˆ¶ç±»è°ƒç”¨ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ä½œä¸ºå­ç±»éå¯å¤±è´¥åˆå§‹åŒ–å™¨çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œä¸‹è¾¹çš„ `UntitledDocument` å­ç±»å°†æ€»æ˜¯è¢«å‘½åä¸º `"[Untitled]"`ï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–æœŸé—´å®ƒä½¿ç”¨äº†çˆ¶ç±»çš„å¯å¤±è´¥ `init(name:)` åˆå§‹åŒ–å™¨ï¼š

```swift
class UntitleDocument: Document {
    override init() {
        super.init(name: "[Untitled]")!
    }
}
```

è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœçˆ¶ç±»çš„ `init(name:)` åˆå§‹åŒ–å™¨æ›¾ä»¥ç©ºå­—ç¬¦ä¸²åšåå­—è°ƒç”¨ï¼Œå¼ºåˆ¶å±•å¼€æ“ä½œä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚æ€»ä¹‹ï¼Œç”±äºå®ƒè°ƒç”¨äº†ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œé‚£ä¹ˆä½ å¯ä»¥çœ‹åˆ°åˆå§‹åŒ–å™¨ä¸ä¼šå¤±è´¥ï¼Œæ‰€ä»¥è¿™æ—¶ä¸ä¼šæœ‰è¿è¡Œæ—¶é”™è¯¯å‘ç”Ÿã€‚

### å¯å¤±è´¥åˆå§‹åŒ–å™¨ `init!`

é€šå¸¸æ¥è®²æˆ‘ä»¬é€šè¿‡åœ¨ `init` å…³é”®å­—åæ·»åŠ é—®å· ( `init?` ) çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ª**å¯å¤±è´¥åˆå§‹åŒ–å™¨**ä»¥åˆ›å»ºä¸€ä¸ªåˆé€‚ç±»å‹çš„å¯é€‰é¡¹å®ä¾‹ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¯å¤±è´¥åˆå§‹åŒ–å™¨åˆ›å»ºä¸€ä¸ª**éšå¼å±•å¼€å…·æœ‰åˆé€‚ç±»å‹çš„å¯é€‰é¡¹å®ä¾‹**ã€‚é€šè¿‡åœ¨ `init` åé¢æ·»åŠ æƒŠå¹å· ( `init!` ) è€Œä¸æ˜¯é—®å·ã€‚

ä½ å¯ä»¥åœ¨ `init?` åˆå§‹åŒ–å™¨ä¸­å§”æ‰˜è°ƒç”¨ `init!` åˆå§‹åŒ–å™¨ï¼Œåä¹‹äº¦ç„¶ã€‚ ä½ ä¹Ÿå¯ä»¥ç”¨ `init!` é‡å†™ `init?`ã€‚ ä½ è¿˜å¯ä»¥ç”¨ `init` å§”æ‰˜è°ƒç”¨ `init!` ï¼Œå°½ç®¡å½“ `init!` åˆå§‹åŒ–å™¨å¯¼è‡´åˆå§‹åŒ–å¤±è´¥æ—¶ä¼šè§¦å‘æ–­è¨€ã€‚



## 7. å¿…è¦åˆå§‹åŒ–å™¨ï¼ˆ`required`ï¼‰

åœ¨ç±»çš„åˆå§‹åŒ–å™¨å‰æ·»åŠ  `required` ä¿®é¥°ç¬¦æ¥è¡¨æ˜**æ‰€æœ‰è¯¥ç±»çš„å­ç±»éƒ½å¿…é¡»å®ç°è¯¥åˆå§‹åŒ–å™¨**ï¼š

```swift
class SomeClass {
    required init() {
        // è¿™é‡Œå®ç°åˆå§‹åŒ–æ“ä½œ
    }
}
```

**å½“å­ç±»é‡å†™çˆ¶ç±»çš„å¿…è¦åˆå§‹åŒ–å™¨æ—¶ï¼Œå¿…é¡»åœ¨å­ç±»çš„åˆå§‹åŒ–å™¨å‰åŒæ ·æ·»åŠ  `required` ä¿®é¥°ç¬¦ä»¥ç¡®ä¿å½“å…¶å®ƒç±»ç»§æ‰¿è¯¥å­ç±»æ—¶ï¼Œè¯¥åˆå§‹åŒ–å™¨åŒä¸ºå¿…è¦åˆå§‹åŒ–å™¨ã€‚åœ¨é‡å†™çˆ¶ç±»çš„å¿…è¦åˆå§‹åŒ–å™¨æ—¶ï¼Œä¸éœ€è¦æ·»åŠ  `override` ä¿®é¥°ç¬¦**ï¼š

```swift
class SomeSubclass : SomeClass {
    required init() {
        // è¿™é‡Œå®ç°å­ç±»çš„åˆå§‹åŒ–
    }
}
```

> æ³¨
> 
> å¦‚æœå­ç±»ç»§æ‰¿çš„åˆå§‹åŒ–å™¨èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œåˆ™ä½ æ— éœ€æ˜¾å¼åœ°åœ¨å­ç±»ä¸­æä¾›å¿…è¦åˆå§‹åŒ–å™¨çš„å®ç°ã€‚



## 8. é€šè¿‡é—­åŒ…å’Œå‡½æ•°æ¥è®¾ç½®å±æ€§çš„é»˜è®¤å€¼

å¦‚æœæŸä¸ªå­˜å‚¨å±æ€§çš„é»˜è®¤å€¼éœ€è¦è‡ªå®šä¹‰æˆ–è®¾ç½®ï¼Œä½ å¯ä»¥ä½¿ç”¨**é—­åŒ…**æˆ–**å…¨å±€å‡½æ•°**æ¥ä¸ºå±æ€§æä¾›é»˜è®¤å€¼ã€‚å½“è¿™ä¸ªå±æ€§å±äºçš„å®ä¾‹åˆå§‹åŒ–æ—¶ï¼Œé—­åŒ…æˆ–å‡½æ•°å°±ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”å®ƒçš„è¿”å›å€¼å°±ä¼šä½œä¸ºå±æ€§çš„é»˜è®¤å€¼ã€‚

è¿™ç§é—­åŒ…æˆ–å‡½æ•°é€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ªå’Œå±æ€§ç›¸åŒçš„ä¸´æ—¶å€¼ï¼Œå¤„ç†è¿™ä¸ªå€¼ä»¥è¡¨ç¤ºåˆå§‹çš„çŠ¶æ€ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªä¸´æ—¶å€¼è¿”å›ä½œä¸ºå±æ€§çš„é»˜è®¤å€¼ã€‚

ä¸‹é¢çš„ä»£ç æ¡†æ¶å±•ç¤ºäº†é—­åŒ…æ˜¯å¦‚ä½•æä¾›é»˜è®¤å€¼ç»™å±æ€§çš„ï¼š

```swift
class SomeClass {
    let someProperty: someType = {
        // ä¸ºæ­¤é—­åŒ…å†…çš„ someProperty åˆ›å»ºé»˜è®¤å€¼
        // someValue å¿…é¡»ä¸ SomeType å±äºåŒä¸€ç±»å‹
        return someValue
    }()
}
```

æ³¨æ„é—­åŒ…èŠ±æ‹¬å·çš„ç»“å°¾è·Ÿç€ä¸€å¯¹æ²¡æœ‰å‚æ•°çš„åœ†æ‹¬å·ã€‚è¿™æ˜¯å‘Šè¯‰ Swift ç«‹å³æ‰§è¡Œé—­åŒ…ã€‚å¦‚æœä½ å¿½ç•¥äº†è¿™å¯¹åœ†æ‹¬å·ï¼Œä½ å°±ä¼šæŠŠé—­åŒ…ä½œä¸ºå€¼èµ‹ç»™äº†å±æ€§ï¼Œå¹¶ä¸”ä¸ä¼šè¿”å›é—­åŒ…çš„å€¼ã€‚

> æ³¨æ„
> 
> å¦‚æœä½ ä½¿ç”¨äº†é—­åŒ…æ¥åˆå§‹åŒ–å±æ€§ï¼Œè¯·è®°ä½é—­åŒ…æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ä¾‹çš„å…¶ä»–éƒ¨åˆ†è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ã€‚è¿™å°±æ„å‘³ç€**ä½ ä¸èƒ½åœ¨é—­åŒ…é‡Œè¯»å–ä»»ä½•å…¶ä»–çš„å±æ€§å€¼ï¼Œå³ä½¿è¿™äº›å±æ€§æœ‰é»˜è®¤å€¼**ã€‚ä½ ä¹Ÿä¸èƒ½ä½¿ç”¨éšå¼ `self` å±æ€§ï¼Œæˆ–è€…è°ƒç”¨å®ä¾‹çš„æ–¹æ³•ã€‚


ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º `Checkerboard` ç»“æ„ä½“ï¼Œå»ºæ¨¡äº†ä¸€ä¸ªå›½é™…è±¡æ£‹çš„æ£‹ç›˜ã€‚å›½é™…è±¡æ£‹åœ¨ä¸€ä¸ª 8Ã—8 çš„æ£‹ç›˜ä¸Šè¿›è¡Œï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨é»‘ç™½è‰²å—æ¥ä»£æ›¿ã€‚

![](https://cnswift.content-delivery.top/wp-content/uploads/2015/08/chessBoard_2x.png)

ä¸ºäº†å‘ˆç°æ¸¸æˆçš„æ£‹ç›˜ï¼Œ`Checkerboard` ç»“æ„ä½“åªæœ‰ä¸€ä¸ªåä¸º `boardColors` çš„å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å« 64 ä¸ª `Bool` å€¼çš„æ•°ç»„ã€‚æ•°ç»„ä¸­çš„ `true` ä»£è¡¨é»‘è‰²çš„æ ¼å­ï¼Œ false ä»£è¡¨ç™½è‰²çš„æ ¼å­ã€‚æ•°ç»„ä¸­ç¬¬ä¸€é¡¹ä»£è¡¨æ£‹ç›˜çš„å·¦ä¸Šè§’æ–¹æ ¼ï¼Œæ•°ç»„æœ€åä¸€é¡¹ä»£è¡¨æ£‹ç›˜çš„å³ä¸‹è§’æ–¹æ ¼ã€‚

`boardColors` æ•°ç»„åœ¨ä¸€ä¸ªé—­åŒ…é‡Œåˆå§‹åŒ–ï¼Œæ¥è®¾ç½®å®ƒçš„é¢œè‰²å€¼ï¼š

```swift
struct Chessboard {
    
    // é€šè¿‡é—­åŒ…çš„æ–¹å¼åˆå§‹åŒ–æ£‹ç›˜æ ¼å­é¢œè‰²
    let boardColors: [Bool] = {
        var temporaryBoard = [Bool]()
        var isBlack = false
        for i in 1...8 {
            for j in 1...8 {
                temporaryBoard.append(isBlack)
                isBlack = !isBlack
            }
            isBlack = !isBlack
        }
       return temporaryBoard
    }()
    
    // è¿”å›å½“å‰æ£‹ç›˜æ ¼å­çš„é¢œè‰²
    func squareIsBlackAt(row: Int, column: Int) -> Bool {
        return boardColors[(row * 8) + column]
    }
}
```

æ— è®ºä½•æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ `Checkboard` ï¼Œé—­åŒ…å°±ä¼šæ‰§è¡Œï¼Œå¹¶ä¸” `boardColors` çš„é»˜è®¤å€¼å°±ä¼šè®¡ç®—å’Œè¿”å›ã€‚ä¸Šé¢ä¾‹å­ä¸­çš„é—­åŒ…åœ¨ä¸€ä¸ªåä¸º `temporaryBoard` çš„ä¸´æ—¶æ•°ç»„ä¸­ä¸ºæ¯ä¸ªæ–¹æ ¼è®¡ç®—å¹¶ä¸”è®¾ç½®åˆé€‚çš„é¢œè‰²ï¼Œç„¶åä¸€æ—¦è®¾ç½®å®Œæ¯•ï¼Œå°±æŠŠè¿™ä¸ªä¸´æ—¶æ•°ç»„ä½œä¸ºé—­åŒ…çš„è¿”å›å€¼è¿”å›ã€‚è¿”å›çš„æ•°ç»„å€¼å‚¨å­˜åœ¨ `boardColors` ä¸­ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ `squareIsBlackAtRow` å·¥å…·å‡½æ•°æ¥æŸ¥è¯¢ï¼š


```swift
let board = Chessboard()
print(board.squareIsBlackAt(row: 0, column: 1))
// true
print(board.squareIsBlackAt(row: 7, column: 7))
// false
```