åœ¨ç±»å®ä¾‹è¢«é‡Šæ”¾çš„æ—¶å€™ï¼Œååˆå§‹åŒ–å™¨å°±ä¼šç«‹å³è¢«è°ƒç”¨ã€‚ä½ å¯ä»¥æ˜¯ç”¨ `deinit` å…³é”®å­—æ¥å†™ååˆå§‹åŒ–å™¨ï¼Œå°±å¦‚åŒå†™åˆå§‹åŒ–å™¨è¦ç”¨ `init` å…³é”®å­—ä¸€æ ·ã€‚ååˆå§‹åŒ–å™¨åªåœ¨ `Class` ç±»å‹ä¸­æœ‰æ•ˆã€‚

> ğŸ’¡ ç±»ä¼¼ Objective-C è¯­è¨€ä¸­çš„ `dealloc` è¯­æ³•ã€‚

## ååˆå§‹åŒ–å™¨åŸç†

å½“å®ä¾‹ä¸å†è¢«éœ€è¦çš„æ—¶å€™ Swift ä¼šè‡ªåŠ¨å°†å…¶é‡Šæ”¾æ‰ï¼Œä»¥èŠ‚çœèµ„æºã€‚å¦‚åŒè‡ªåŠ¨å¼•ç”¨è®¡æ•°ä¸­æè¿°çš„é‚£æ ·ï¼ŒSwift é€šè¿‡è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰æ¥å¤„ç†å®ä¾‹çš„å†…å­˜ç®¡ç†ã€‚åŸºæœ¬ä¸Šï¼Œå½“ä½ çš„å®ä¾‹è¢«é‡Šæ”¾æ—¶ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨æ¸…é™¤å®ƒä»¬ã€‚æ€»ä¹‹ï¼Œå½“ä½ åœ¨æ“ä½œè‡ªå·±çš„èµ„æºæ—¶ï¼Œä½ å¯èƒ½è¿˜æ˜¯éœ€è¦åœ¨é‡Šæ”¾å®ä¾‹æ—¶æ‰§è¡Œä¸€äº›é¢å¤–çš„æ¸…ç†å·¥ä½œã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰ç±»æ¥æ‰“å¼€æŸæ–‡ä»¶å†™ç‚¹æ•°æ®è¿›å»ï¼Œä½ å°±å¾—åœ¨å®ä¾‹é‡Šæ”¾ä¹‹å‰å…³é—­è¿™ä¸ªæ–‡ä»¶ã€‚

æ¯ä¸ªç±»å½“ä¸­åªèƒ½æœ‰ä¸€ä¸ªååˆå§‹åŒ–å™¨ã€‚ååˆå§‹åŒ–å™¨ä¸æ¥æ”¶ä»»ä½•å½¢å¼å‚æ•°ï¼Œå¹¶ä¸”ä¸éœ€è¦å†™åœ†æ‹¬å·ï¼š

```swift
deinit {
    // perform the deinitialization
}
```

ååˆå§‹åŒ–å™¨ä¼šåœ¨å®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰è‡ªåŠ¨è¢«è°ƒç”¨ã€‚ä½ ä¸èƒ½è‡ªè¡Œè°ƒç”¨ååˆå§‹åŒ–å™¨ã€‚çˆ¶ç±»çš„ååˆå§‹åŒ–å™¨å¯ä»¥è¢«å­ç±»ç»§æ‰¿ï¼Œå¹¶ä¸”å­ç±»çš„ååˆå§‹åŒ–å™¨å®ç°ç»“æŸä¹‹åçˆ¶ç±»çš„ååˆå§‹åŒ–å™¨ä¼šè¢«è°ƒç”¨ã€‚çˆ¶ç±»çš„ååˆå§‹åŒ–å™¨æ€»ä¼šè¢«è°ƒç”¨ï¼Œå°±ç®—å­ç±»æ²¡æœ‰ååˆå§‹åŒ–å™¨ã€‚

ç”±äºå®ä¾‹åœ¨ååˆå§‹åŒ–å™¨è¢«è°ƒç”¨ä¹‹å‰éƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼Œååˆå§‹åŒ–å™¨å¯ä»¥è®¿é—®å®ä¾‹ä¸­çš„æ‰€æœ‰å±æ€§å¹¶ä¸”å¯ä»¥åŸºäºè¿™äº›å±æ€§ä¿®æ”¹è‡ªèº«è¡Œä¸ºï¼ˆæ¯”å¦‚è¯´æŸ¥æ‰¾éœ€è¦è¢«å…³é—­çš„é‚£ä¸ªæ–‡ä»¶çš„æ–‡ä»¶åï¼‰ã€‚


## åº”ç”¨ååˆå§‹åŒ–å™¨

ç¤ºä¾‹ã€‚

```swift
import UIKit

/**
 Bank ç±»ç”¨æ¥ç®¡ç†è™šæ‹Ÿè´§å¸ï¼Œæ•°é‡æ€»é¢æ°¸è¿œä¸ä¼šè¶…è¿‡ 10000 æšé‡‘å¸ã€‚
 */
class Bank {
    // ç±»å±æ€§
    static var coinsInBank = 10_000
    
    // ç±»æ–¹æ³•ï¼Œåˆ†å‘é‡‘å¸æ–¹æ³•
    static func distribute(coins numberOfCoinsRequested: Int) -> Int {
        // å¯æå–çš„é‡‘å¸
        let numberOfCoinsToVend = min(numberOfCoinsRequested, coinsInBank)
        coinsInBank -= numberOfCoinsRequested
        return numberOfCoinsToVend
    }
    
    // ç±»æ–¹æ³•ï¼Œæ”¶é›†é‡‘å¸æ–¹æ³•
    static func receive(coins: Int) {
        coinsInBank += coins
    }
}

/**
 Player ç±»æè¿°æ¸¸æˆä¸­çš„ç©å®¶
 */
class Player {
    // é’±åŒ…ä¸­çš„é‡‘å¸
    var coinsInPurse: Int
    
    // æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼Œä»¥ä¸€å®šçš„é‡‘å¸æ•°é‡åˆå§‹åŒ–å®ä¾‹å¯¹è±¡
    init(coins: Int) {
        coinsInPurse = Bank.distribute(coins: coins)
    }
    
    // ä»é“¶è¡Œè·å–é‡‘å¸ï¼Œæ·»åŠ åˆ°è‡ªå·±çš„é’±åŒ…ä¸­
    func win(coins: Int) {
        coinsInPurse += Bank.distribute(coins: coins)
    }
    
    // MARK: å½“è¯¥ç©å®¶çš„å®ä¾‹ååˆå§‹åŒ–æ—¶ï¼Œè¿”è¿˜é‡‘å¸åˆ°é“¶è¡Œ
    deinit {
        Bank.receive(coins: coinsInPurse)
    }
}

var playerOne: Player? = Player(coins: 100)
print("å½“å‰æ–°åŠ å…¥çš„ç©å®¶æ‹¥æœ‰ \(playerOne!.coinsInPurse) æšé‡‘å¸")
// å½“å‰æ–°åŠ å…¥çš„ç©å®¶æ‹¥æœ‰ 100 æšé‡‘å¸

print("ç°åœ¨ï¼Œé“¶è¡Œä»…å‰© \(Bank.coinsInBank) æšé‡‘å¸")
// ç°åœ¨ï¼Œé“¶è¡Œä»…å‰© 9900 æšé‡‘å¸

playerOne!.win(coins: 2_000)
print("å½“å‰ç©å®¶èµ¢å¾—äº† 2000 æšé‡‘å¸ï¼Œç°åœ¨æ€»è®¡æ‹¥æœ‰  \(playerOne!.coinsInPurse) æšé‡‘å¸")
// å½“å‰ç©å®¶èµ¢å¾—äº† 2000 æšé‡‘å¸ï¼Œç°åœ¨æ€»è®¡æ‹¥æœ‰  2100 æšé‡‘å¸

print("ç°åœ¨ï¼Œé“¶è¡Œä»…å‰© \(Bank.coinsInBank) æšé‡‘å¸")
// ç°åœ¨ï¼Œé“¶è¡Œä»…å‰© 7900 æšé‡‘å¸

playerOne = nil
// ç©å®¶æ¨å‡ºäº†æ¸¸æˆï¼Œå½“ playerOne å®ä¾‹è¢«é‡Šæ”¾çš„ç¬é—´ï¼Œååˆå§‹åŒ–æ–¹æ³•è¢«è°ƒç”¨

print("ç°åœ¨ï¼Œé“¶è¡Œæœ‰ \(Bank.coinsInBank) æšé‡‘å¸")
// ç°åœ¨ï¼Œé“¶è¡Œæœ‰ 10000 æšé‡‘å¸

```



