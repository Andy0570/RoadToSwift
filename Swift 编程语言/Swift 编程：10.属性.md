## å­˜å‚¨å±æ€§

* åœ¨æœ€ç®€å•çš„å½¢å¼ä¸‹ï¼Œå­˜å‚¨å±æ€§æ˜¯ä¸€ä¸ªï¼ˆä½œä¸ºç‰¹å®šç±»å’Œç»“æ„ä½“å®ä¾‹ä¸€éƒ¨åˆ†çš„ï¼‰å¸¸é‡æˆ–å˜é‡ã€‚
* å­˜å‚¨å±æ€§è¦ä¹ˆæ˜¯**å˜é‡å­˜å‚¨å±æ€§**ï¼ˆç”± `var`  å…³é”®å­—å¼•å…¥ï¼‰è¦ä¹ˆæ˜¯**å¸¸é‡å­˜å‚¨å±æ€§**ï¼ˆç”± `let`  å…³é”®å­—å¼•å…¥ï¼‰ã€‚
* é»˜è®¤å±æ€§å€¼ï¼šä½ å¯ä»¥ä¸ºå­˜å‚¨å±æ€§æä¾›ä¸€ä¸ªé»˜è®¤å€¼ä½œä¸ºå®ƒå®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚
* åˆå§‹åŒ–å±æ€§å€¼ï¼šä½ ä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­è®¾ç½®å’Œä¿®æ”¹å­˜å‚¨å±æ€§çš„åˆå§‹å€¼ã€‚

```Swift
// å®šä¹‰ä¸€ä¸ªåä¸º FixedLengthRange å›ºå®šé•¿åº¦èŒƒå›´çš„ç»“æ„ä½“
struct FixedLengthRange {
    var firstVale: Int // å˜é‡å­˜å‚¨å±æ€§
    let length: Int    // å¸¸é‡å­˜å‚¨å±æ€§
}

var rangeOfThreeItems = FixedLengthRange(firstVale: 0, length: 3)
// è¯¥èŒƒå›´ä»£è¡¨äº†æ•´å½¢å€¼ 0ï¼Œ1 å’Œ 2
rangeOfThreeItems.firstVale = 6
// ç°åœ¨ï¼Œè¯¥èŒƒå›´ä»£è¡¨äº†æ•´å½¢å€¼ 6ï¼Œ7 å’Œ 8
```

### å¸¸é‡ç»“æ„ä½“å®ä¾‹çš„å­˜å‚¨å±æ€§

**å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªç»“æ„ä½“çš„å®ä¾‹å¹¶ä¸”æŠŠè¿™ä¸ªå®ä¾‹èµ‹ç»™å¸¸é‡ï¼Œä½ ä¸èƒ½ä¿®æ”¹è¿™ä¸ªå®ä¾‹çš„å±æ€§ï¼Œå³ä½¿æ˜¯å£°æ˜ä¸ºå˜é‡çš„å±æ€§**ï¼š

```Swift
let rangeofFourItems = FixedLengthRange(firstVale: 0, length: 4)
// è¯¥èŒƒå›´ä»£è¡¨äº†æ•´å½¢å€¼ 0ï¼Œ1ï¼Œ2 å’Œ 3
rangeofFourItems.firstVale = 6
// error: cannot assign to property: 'rangeofFourItems' is a 'let' constant
```

ç”±äº `rangeOfFourItems` è¢«å£°æ˜ä¸ºå¸¸é‡ï¼ˆç”¨ `let` å…³é”®å­—ï¼‰ï¼Œæˆ‘ä»¬ä¸èƒ½æ”¹å˜å…¶ `firstValue` å±æ€§ï¼Œå³ä½¿ `firstValue` æ˜¯ä¸€ä¸ªå˜é‡å±æ€§ã€‚

è¿™æ˜¯ç”±äº**ç»“æ„ä½“æ˜¯å€¼ç±»å‹**ã€‚å½“ä¸€ä¸ªå€¼ç±»å‹çš„å®ä¾‹è¢«æ ‡è®°ä¸ºå¸¸é‡æ—¶ï¼Œè¯¥å®ä¾‹çš„å…¶ä»–å±æ€§ä¹Ÿå‡ä¸ºå¸¸é‡ã€‚

å¯¹äºç±»æ¥è¯´åˆ™ä¸åŒï¼Œå®ƒæ˜¯å¼•ç”¨ç±»å‹ã€‚å¦‚æœä½ ç»™ä¸€ä¸ªå¸¸é‡èµ‹å€¼å¼•ç”¨ç±»å‹å®ä¾‹ï¼Œä½ ä»ç„¶å¯ä»¥ä¿®æ”¹é‚£ä¸ªå®ä¾‹çš„å˜é‡å±æ€§ã€‚


### å»¶è¿Ÿå­˜å‚¨å±æ€§ï¼ˆ`lazy`ï¼‰

å»¶è¿Ÿå­˜å‚¨å±æ€§çš„åˆå§‹å€¼åœ¨å…¶ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰è¿›è¡Œè®¡ç®—ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨å…¶å£°æ˜å‰æ ‡æ³¨ `lazy` ä¿®é¥°è¯­æ¥è¡¨ç¤ºä¸€ä¸ªå»¶è¿Ÿå­˜å‚¨å±æ€§ã€‚

ä½ å¿…é¡»æŠŠ**å»¶è¿Ÿå­˜å‚¨å±æ€§**å£°æ˜ä¸º**å˜é‡**ï¼ˆä½¿ç”¨ `var` å…³é”®å­—ï¼‰ï¼Œå› ä¸ºå®ƒçš„åˆå§‹å€¼å¯èƒ½åœ¨å®ä¾‹åˆå§‹åŒ–å®Œæˆä¹‹å‰æ— æ³•å–å¾—ã€‚å¸¸é‡å±æ€§åˆ™å¿…é¡»åœ¨åˆå§‹åŒ–å®Œæˆä¹‹å‰æœ‰å€¼ï¼Œå› æ­¤ä¸èƒ½å£°æ˜ä¸ºå»¶è¿Ÿå±æ€§ã€‚

* ä¸€ä¸ªå±æ€§çš„*åˆå§‹å€¼å¯èƒ½ä¾èµ–äºæŸäº›å¤–éƒ¨å› ç´ *ï¼Œå½“è¿™äº›å¤–éƒ¨å› ç´ çš„å€¼åªæœ‰åœ¨å®ä¾‹çš„åˆå§‹åŒ–å®Œæˆåæ‰èƒ½å¾—åˆ°æ—¶ï¼Œå»¶è¿Ÿå±æ€§å°±å¯ä»¥å‘æŒ¥ä½œç”¨äº†ã€‚
* å½“å±æ€§çš„åˆå§‹å€¼éœ€è¦*æ‰§è¡Œå¤æ‚æˆ–ä»£ä»·é«˜æ˜‚çš„é…ç½®*æ‰èƒ½è·å¾—ï¼Œä½ åˆæƒ³è¦åœ¨éœ€è¦æ—¶æ‰æ‰§è¡Œï¼Œå»¶è¿Ÿå±æ€§å°±èƒ½å¤Ÿæ´¾ä¸Šç”¨åœºäº†ã€‚

> ğŸ’¡ ç±»ä¼¼ Objective-C ä¸­çš„ Lazy Loading æœºåˆ¶ï¼ˆé€šè¿‡é‡å†™å±æ€§çš„ `Getter` æ–¹æ³•å®ç°ï¼‰ï¼Œå¾ˆæ˜¾ç„¶ï¼ŒSwift ä¸­çš„è¯­æ³•æ›´ç®€æ´ã€‚

```Swift
class DataImporter {
    
    // DataImporter æ˜¯ä¸€ä¸ªç”¨äºä»å¤–éƒ¨æ–‡ä»¶ä¸­å¯¼å…¥æ•°æ®çš„ç±»
    // å‡å®šè¯¥ç±»éœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´æ¥åˆå§‹åŒ–
    
    var fileNmae = "data.txt"
    // DataImporter ç±»å°†åœ¨è¿™é‡Œæä¾›æ•°æ®å¯¼å…¥åŠŸèƒ½
}

class DataManager {
    lazy var importer = DataImporter()
    var data = [String]()
    // DataManager ç±»å°†åœ¨è¿™é‡Œæä¾›æ•°æ®ç®¡ç†åŠŸèƒ½
}

let manager = DataManager()
manager.data.append("Some data")
manager.data.append("Some more data")
// å°šæœªåˆ›å»ºå¯¼å…¥ç¨‹åºå±æ€§çš„ DataImporter å®ä¾‹
```

ç±» `DataManager` æœ‰ä¸€ä¸ªåä¸º `data` çš„å­˜å‚¨å±æ€§ï¼Œå®ƒè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªç©ºçš„æ–° `String` æ•°ç»„ã€‚å°½ç®¡å®ƒçš„å…¶ä½™åŠŸèƒ½æ²¡æœ‰å±•ç¤ºå‡ºæ¥ï¼Œè¿˜æ˜¯å¯ä»¥çŸ¥é“ç±» `DataManager` çš„ç›®çš„æ˜¯ç®¡ç†å¹¶æä¾›è®¿é—®è¿™ä¸ª `String` æ•°ç»„çš„æ–¹æ³•ã€‚

`DataManager` ç±»çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯ä»æ–‡ä»¶å¯¼å…¥æ•°æ®ã€‚æ­¤åŠŸèƒ½ç”± `DataImporter` ç±»æä¾›ï¼Œå®ƒå‡å®šä¸ºéœ€è¦ä¸€å®šæ—¶é—´æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚è¿™å¤§æ¦‚æ˜¯å› ä¸º `DataImporter` å®ä¾‹åœ¨è¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™éœ€è¦æ‰“å¼€æ–‡ä»¶å¹¶è¯»å–å…¶å†…å®¹åˆ°å†…å­˜ä¸­ã€‚

`DataManager` å®ä¾‹å¹¶ä¸è¦ä»æ–‡ä»¶å¯¼å…¥æ•°æ®å°±å¯ä»¥ç®¡ç†å…¶æ•°æ®çš„æƒ…å†µæ˜¯æœ‰å¯èƒ½å‘ç”Ÿçš„ï¼Œæ‰€ä»¥å½“ `DataManager` æœ¬èº«åˆ›å»ºçš„æ—¶å€™æ²¡æœ‰å¿…è¦å»å†åˆ›å»ºä¸€ä¸ªæ–°çš„ `DataImporter` å®ä¾‹ã€‚åä¹‹ï¼Œåœ¨ `DataImporter` ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨çš„æ—¶å€™å†åˆ›å»ºå®ƒæ‰æ›´æœ‰æ„ä¹‰ã€‚

å› ä¸ºå®ƒè¢« `lazy` ä¿®é¥°ç¬¦æ‰€æ ‡è®°ï¼Œåªæœ‰åœ¨ `importer` å±æ€§ç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶æ‰ä¼šåˆ›å»º `DataImporter` å®ä¾‹ï¼Œæ¯”å¦‚å½“æŸ¥è¯¢å®ƒçš„ `fileName` å±æ€§æ—¶ï¼š

```Swift
print(manager.importer.fileName)
// importer å±æ€§çš„ DataImporter å®ä¾‹ç°åœ¨å·²ç»è¢«åˆ›å»ºäº†
// æ‰“å° â€œdata.txtâ€
```

> æ³¨æ„
> 
> å¦‚æœè¢«æ ‡è®°ä¸º `lazy` ä¿®é¥°ç¬¦çš„å±æ€§åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®å¹¶ä¸”å±æ€§è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™æ— æ³•ä¿è¯å±æ€§åªåˆå§‹åŒ–ä¸€æ¬¡ã€‚

### å­˜å‚¨å±æ€§ä¸å®ä¾‹å˜é‡

å¦‚æœä½ æœ‰ Objective-C çš„å¼€å‘ç»éªŒï¼Œé‚£ä½ åº”è¯¥çŸ¥é“åœ¨ç±»å®ä¾‹é‡Œæœ‰ä¸¤ç§æ–¹æ³•æ¥å­˜å‚¨å€¼å’Œå¼•ç”¨ï¼ˆinstance å®ä¾‹å˜é‡å’Œ `@property` å±æ€§ï¼‰ã€‚å¦å¤–ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨å®ä¾‹å˜é‡ä½œä¸ºå±æ€§ä¸­æ‰€å‚¨å­˜çš„å€¼çš„å¤‡ä»½å­˜å‚¨ã€‚

Swift æŠŠè¿™äº›æ¦‚å¿µéƒ½ç»Ÿä¸€åˆ°äº†å±æ€§å£°æ˜é‡Œã€‚**Swift å±æ€§æ²¡æœ‰ä¸ä¹‹ç›¸å¯¹åº”çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”å±æ€§çš„åå¤‡å­˜å‚¨ä¸èƒ½è¢«ç›´æ¥è®¿é—®**ã€‚è¿™é¿å…äº†ä¸åŒç¯å¢ƒä¸­å¯¹å€¼çš„è®¿é—®çš„æ··æ·†å¹¶ä¸”å°†å±æ€§çš„å£°æ˜ç®€åŒ–ä¸ºä¸€æ¡å•ä¸€çš„ã€é™å®šçš„è¯­å¥ã€‚æ‰€æœ‰å…³äºå±æ€§çš„ä¿¡æ¯ â€”â€” åŒ…æ‹¬å®ƒçš„åå­—ï¼Œç±»å‹å’Œå†…å­˜ç®¡ç†ç‰¹å¾ â€”â€” éƒ½ä½œä¸ºç±»çš„å®šä¹‰æ”¾åœ¨äº†åŒä¸€ä¸ªåœ°æ–¹ã€‚


## è®¡ç®—å±æ€§

é™¤äº†å­˜å‚¨å±æ€§ï¼Œç±»ã€ç»“æ„ä½“å’Œæšä¸¾ä¹Ÿèƒ½å¤Ÿå®šä¹‰**è®¡ç®—å±æ€§**ï¼Œè€Œå®ƒå®é™…å¹¶ä¸å­˜å‚¨å€¼ã€‚ç›¸åï¼Œä»–ä»¬æä¾›ä¸€ä¸ªè¯»å–å™¨å’Œä¸€ä¸ªå¯é€‰çš„è®¾ç½®å™¨æ¥é—´æ¥å¾—åˆ°å’Œè®¾ç½®å…¶ä»–çš„å±æ€§å’Œå€¼ã€‚

> ğŸ’¡ ä¸€ä¸ªå±æ€§çš„å€¼æ˜¯é€šè¿‡å…¶ä»–å±æ€§çš„å€¼ï¼Œé—´æ¥è®¡ç®—æˆ–æ¨å¯¼è·å¾—çš„ã€‚æ¯”å¦‚è¯´ï¼ŒçŸ©å½¢çš„é¢ç§¯ã€è®¢å•çš„åˆè®¡é‡‘é¢ã€è€ƒè¯•æˆç»©çš„å¹³å‡åˆ†...

```swift
// Point ç»“æ„ä½“ï¼Œå°è£…äº†ä¸€ä¸ª (x, y) åæ ‡
struct Point {
    var x = 0.0, y = 0.0
}

// Size ç»“æ„ä½“ï¼Œå°è£…äº†ä¸€ä¸ªçŸ©å½¢çš„å®½ã€é«˜å°ºå¯¸
struct Size {
    var width = 0.0, height = 0.0
}

// Rect ç»“æ„ä½“ï¼Œå°è£…äº†ä¸€ä¸ªé•¿æ–¹å½¢ï¼ŒåŒ…æ‹¬åŸç‚¹åæ ‡å’Œå¤§å°
// Rect ç»“æ„è¿˜æœ‰ä¸ªåä¸º center çš„è®¡ç®—å±æ€§
struct Rect {
    var origin = Point()
    var size = Size()
    var center: Point {
        get {
            let centerX = origin.x + (size.width / 2)
            let centerY = origin.y + (size.height / 2)
            return Point(x: centerX, y: centerY)
        }
        set(newCenter) {
            origin.x = newCenter.x - (size.width / 2)
            origin.y = newCenter.y - (size.height / 2)
        }
    }
}

// çŸ©å½¢ï¼š(0.0, 0.0, 10.0, 10.0)
var square = Rect(origin: Point(x: 0.0, y: 0.0),
                  size: Size(width: 10.0, height: 10.0))
let initialSquareCenter = square.center
square.center = Point(x: 15.0, y: 15.0)
print("square.origin is now at (\(square.origin.x), \(square.origin.y))")
// prints "square.origin is now at (10.0, 10.0)"
// ä¿®æ”¹ä¸­å¿ƒç‚¹åï¼ŒçŸ©å½¢ï¼š(10.0, 10.0, 10.0, 10.0)
```



### ç®€å†™è®¾ç½®å™¨ï¼ˆsetterï¼‰å£°æ˜

å¦‚æœä¸€ä¸ªè®¡ç®—å±æ€§çš„è®¾ç½®å™¨æ²¡æœ‰ä¸ºå°†è¦è¢«è®¾ç½®çš„å€¼å®šä¹‰ä¸€ä¸ªåå­—ï¼Œé‚£ä¹ˆä»–å°†è¢«é»˜è®¤å‘½åä¸º `newValue` ã€‚ä¸‹é¢æ˜¯ç»“æ„ä½“ `Rect` çš„å¦ä¸€ç§å†™æ³•ï¼Œå…¶ä¸­åˆ©ç”¨äº†ç®€å†™è®¾ç½®å™¨å£°æ˜çš„ç‰¹æ€§ã€‚

> ğŸ’¡ `set` æ–¹æ³•ä¸­ï¼Œå½¢å¼å‚æ•°çš„é»˜è®¤åç§°ä¸º `newValue`ã€‚

```swift
struct AlternativeRect {
    var origin = Point()
    var size = Size()
    var center: Point {
        get {
            let centerX = origin.x + (size.width / 2)
            let centerY = origin.y + (size.height / 2)
            return Point(x: centerX, y: centerY)
        }
        set {
            origin.x = newValue.x - (size.width / 2)
            origin.y = newValue.y - (size.height / 2)
        }
    }
}
```


### ç¼©å†™è¯»å–å™¨ï¼ˆgetterï¼‰å£°æ˜

å¦‚æœæ•´ä¸ª `getter` çš„å‡½æ•°ä½“æ˜¯ä¸€ä¸ªå•ä¸€çš„è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆ `getter` éšå¼è¿”å›è¿™ä¸ªè¡¨è¾¾å¼ã€‚è¿™é‡Œæ˜¯å¦ä¸€ä¸ªç‰ˆæœ¬çš„ `Rect` ç»“æ„ä½“ï¼Œå®ƒåˆ©ç”¨ `getter` å’Œ `setter` åº”ç”¨äº†ç¼©å†™æ ‡è®°ï¼š

> ğŸ’¡ å•è¡Œè¡¨è¾¾å¼ä¸­ï¼Œå¯ä»¥çœç•¥ `return` å…³é”®å­—ã€‚

```swift
struct CompactRect {
    var origin = Point()
    var size = Size()
    var center: Point {
        get {   
            Point(x: origin.x + (size.width / 2),
                  y: origin.y + (size.height / 2))
        }
        set {
            origin.x = newValue.x - (size.width / 2)
            origin.y = newValue.y - (size.height / 2)
        }
    }
}
```

åœ¨ `getter` é‡Œçœç•¥ `return` ä¸åœ¨å‡½æ•°é‡Œçœç•¥ `return` è§„åˆ™ç›¸åŒã€‚


### åªè¯»è®¡ç®—å±æ€§

ä¸€ä¸ªæœ‰è¯»å–å™¨ä½†æ˜¯æ²¡æœ‰è®¾ç½®å™¨çš„è®¡ç®—å±æ€§å°±æ˜¯æ‰€è°“çš„**åªè¯»è®¡ç®—å±æ€§**ã€‚åªè¯»è®¡ç®—å±æ€§è¿”å›ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç‚¹è¯­æ³•è®¿é—®ï¼Œä½†æ˜¯ä¸èƒ½è¢«ä¿®æ”¹ä¸ºå¦ä¸€ä¸ªå€¼ã€‚

> âš ï¸
> 
> ä½ å¿…é¡»ç”¨ `var` å…³é”®å­—å®šä¹‰è®¡ç®—å±æ€§ â€”â€” åŒ…æ‹¬åªè¯»è®¡ç®—å±æ€§ â€”â€” ä¸ºå˜é‡å±æ€§ï¼Œå› ä¸ºå®ƒä»¬çš„å€¼ä¸æ˜¯å›ºå®šçš„ã€‚ `let` å…³é”®å­—åªç”¨äºå¸¸é‡å±æ€§ï¼Œç”¨äºæ˜ç¡®é‚£äº›å€¼ä¸€æ—¦ä½œä¸ºå®ä¾‹åˆå§‹åŒ–å°±ä¸èƒ½æ›´æ”¹ã€‚

ä½ å¯ä»¥é€šè¿‡å»æ‰ `get` å…³é”®å­—å’Œå®ƒçš„å¤§æ‰©å·æ¥ç®€åŒ–åªè¯»è®¡ç®—å±æ€§çš„å£°æ˜ï¼š

```swift
struct Cuboid {
    var width = 0.0, height = 0.0, depth = 0.0
    // è¯¥é•¿æ–¹ä½“çš„ä½“ç§¯ï¼ˆvolumeï¼‰æ˜¯ä¸€ä¸ªåªè¯»è®¡ç®—å±æ€§
    var volume: Double {
        return width * height * depth
    }
}

let fourByFiveByTwo = Cuboid(width: 4.0, height: 5.0, depth: 2.0)
print("the volume of fourByFiveByTwo is \(fourByFiveByTwo.volume)")
// prints "the volume of fourByFiveByTwo is 40.0"
```


## å±æ€§è§‚å¯Ÿè€…

å±æ€§è§‚å¯Ÿè€…ä¼šè§‚å¯Ÿå¹¶å¯¹å±æ€§å€¼çš„å˜åŒ–åšå‡ºå›åº”ã€‚æ¯å½“ä¸€ä¸ªå±æ€§çš„å€¼è¢«**è®¾ç½®**æ—¶ï¼Œå±æ€§è§‚å¯Ÿè€…éƒ½ä¼šè¢«è°ƒç”¨ï¼Œå³ä½¿è¿™ä¸ªå€¼ä¸è¯¥å±æ€§å½“å‰çš„å€¼ç›¸åŒã€‚

ä½ å¯ä»¥åœ¨å¦‚ä¸‹åœ°æ–¹æ·»åŠ å±æ€§è§‚å¯Ÿè€…ï¼š

* ä½ å®šä¹‰çš„å­˜å‚¨å±æ€§ï¼›
* ä½ ç»§æ‰¿çš„å­˜å‚¨å±æ€§ï¼›
* ä½ ç»§æ‰¿çš„è®¡ç®—å±æ€§ã€‚

å¯¹äºç»§æ‰¿çš„å±æ€§ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨å­ç±»é‡Œé‡å†™å±æ€§æ¥æ·»åŠ å±æ€§è§‚å¯Ÿè€…ã€‚å¯¹äºä½ å®šä¹‰çš„è®¡ç®—å±æ€§ï¼Œä½¿ç”¨å±æ€§çš„è®¾ç½®å™¨æ¥è§‚å¯Ÿå’Œå“åº”å€¼å˜åŒ–ï¼Œè€Œä¸æ˜¯åˆ›å»ºè§‚å¯Ÿè€…ã€‚

ä½ å¯ä»¥é€‰æ‹©å°†è¿™äº›è§‚å¯Ÿè€…æˆ–å…¶ä¸­ä¹‹ä¸€å®šä¹‰åœ¨å±æ€§ä¸Šï¼š

* `willSet` ä¼šåœ¨è¯¥å€¼è¢«å­˜å‚¨ä¹‹å‰è¢«è°ƒç”¨ã€‚
* `didSet` ä¼šåœ¨ä¸€ä¸ªæ–°å€¼è¢«å­˜å‚¨åè¢«è°ƒç”¨ã€‚

å¦‚æœä½ å®ç°äº†ä¸€ä¸ª `willSet` è§‚å¯Ÿè€…ï¼Œæ–°çš„å±æ€§å€¼ä¼šä»¥å¸¸é‡å½¢å¼å‚æ•°ä¼ é€’ã€‚ä½ å¯ä»¥åœ¨ä½ çš„ `willSet` å®ç°ä¸­ä¸ºè¿™ä¸ªå‚æ•°å®šä¹‰åå­—ã€‚å¦‚æœä½ æ²¡æœ‰ä¸ºå®ƒå‘½åï¼Œé‚£ä¹ˆå®ƒä¼šä½¿ç”¨é»˜è®¤çš„åå­— `newValue` ã€‚

åŒæ ·ï¼Œå¦‚æœä½ å®ç°äº†ä¸€ä¸ª `didSet` è§‚å¯Ÿè€…ï¼Œä¸€ä¸ªåŒ…å«æ—§å±æ€§å€¼çš„å¸¸é‡å½¢å¼å‚æ•°å°†ä¼šè¢«ä¼ é€’ã€‚ä½ å¯ä»¥ä¸ºå®ƒå‘½åï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤çš„å½¢å¼å‚æ•°å `oldValue` ã€‚å¦‚æœä½ åœ¨å±æ€§è‡ªå·±çš„ `didSet` è§‚å¯Ÿè€…é‡Œç»™è‡ªå·±èµ‹å€¼ï¼Œä½ èµ‹å€¼çš„æ–°å€¼å°±ä¼šå–ä»£åˆšåˆšè®¾ç½®çš„å€¼ã€‚

> ğŸ’¡ å±æ€§è§‚å¯Ÿå™¨è¿™ä¸ªç‰¹æ€§ä¹Ÿå¾ˆå¥½ç”¨ï¼Œåœ¨ Objective-C ä¸­åªèƒ½é€šè¿‡é‡å†™ setter æ–¹æ³•æ¨¡ä»¿ Swift ä¸­çš„ `didSet` çš„åŠŸèƒ½ï¼Œå®ç°ä¸€äº›è®¾ç½®æ¨¡å‹åæ¸²æŸ“ UI æˆ–è€…è®¾ç½® NSURL ä¹‹åå‘èµ·ç½‘ç»œè¯·æ±‚åŠŸèƒ½ã€‚

```swift
// å®šä¹‰ä¸€ä¸ª StepCounter ç±»ï¼Œå®ƒè¿½è¸ªäººæ•£æ­¥çš„æ€»æ•°é‡
class StepCounter {
    var totalSteps: Int = 0 {
        willSet(newTotalStpes) {
            print("About to set totalSteps to \(newTotalStpes)")
        }
        didSet {
            if totalSteps > oldValue {
                print("Added \(totalSteps - oldValue) steps")
            }
        }
    }
}

let stepCounter = StepCounter()
stepCounter.totalSteps = 200
// About to set totalSteps to 200
// Added 200 steps
stepCounter.totalSteps = 360
// About to set totalSteps to 360
// Added 160 steps
stepCounter.totalSteps = 896
// About to set totalSteps to 896
// Added 536 steps
```

> âš ï¸
> 
> å¦‚æœä½ ä»¥è¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°ä¼ ä¸€ä¸ªæ‹¥æœ‰è§‚å¯Ÿè€…çš„å±æ€§ç»™å‡½æ•°ï¼Œ `willSet` å’Œ `didSet` è§‚å¯Ÿè€…ä¸€å®šä¼šè¢«è°ƒç”¨ã€‚è¿™æ˜¯ç”±äºè¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°çš„æ‹·è´å…¥æ‹·è´å‡ºå­˜å‚¨æ¨¡å‹å¯¼è‡´çš„ï¼šå€¼ä¸€å®šä¼šåœ¨å‡½æ•°ç»“æŸåå†™å›å±æ€§ã€‚


## å±æ€§åŒ…è£…ï¼ˆ`@propertyWrapper`ï¼‰

å±æ€§åŒ…è£…ç»™ä»£ç ä¹‹é—´æ·»åŠ äº†ä¸€å±‚åˆ†ç¦»å±‚ï¼Œå®ƒç”¨æ¥ç®¡ç†**å±æ€§å¦‚ä½•å­˜å‚¨æ•°æ®**ä»¥åŠ**ä»£ç å¦‚ä½•å®šä¹‰å±æ€§**ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªæä¾›çº¿ç¨‹å®‰å…¨æ£€æŸ¥æˆ–è€…æŠŠè‡ªèº«æ•°æ®å­˜å…¥æ•°æ®åº“çš„å±æ€§ï¼Œä½ å¿…é¡»åœ¨æ¯ä¸ªå±æ€§é‡Œå†™ç›¸å…³ä»£ç ã€‚å½“ä½ ä½¿ç”¨å±æ€§åŒ…è£…ï¼Œä½ åªéœ€è¦åœ¨å®šä¹‰åŒ…è£…æ—¶å†™ä¸€éå°±å¥½äº†ï¼Œç„¶åæŠŠç®¡ç†ä»£ç åº”ç”¨åˆ°å¤šä¸ªå±æ€§ä¸Šã€‚

> ğŸ’¡ ç”¨äºå°è£…å±æ€§é€šç”¨åŠŸèƒ½çš„ä¸€æ®µä»£ç å—ã€‚

è¦å®šä¹‰ä¸€ä¸ªåŒ…è£…ï¼Œä½ å¯åˆ›å»ºä¸€ä¸ª**ç»“æ„ä½“**ã€**æšä¸¾**æˆ–è€…**å®šä¹‰äº† `wrappedValue` å±æ€§çš„ç±»**ã€‚

```swift
// å®šä¹‰ä¸€ä¸ª TwelveOrLess ç»“æ„ä½“ï¼Œå®ƒç¡®ä¿å†…éƒ¨çš„æ•°å­—æ°¸è¿œå°äº 12.
@propertyWrapper
struct TwelveOrLess {
    private var number = 0
    var wrappedValue: Int {
        get { return number }
        set { number = min(newValue, 12) }
    }
}
```

ä½ å¯åœ¨å±æ€§å‰ä»¥ç‰¹æ€§çš„æ–¹å¼å†™åŒ…è£…çš„åå­—ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¿å­˜å°å››è¾¹å½¢çš„ç»“æ„ä½“ï¼Œä½¿ç”¨äº†å’Œ `TwelveOrLess` ä¸­ç›¸åŒï¼ˆè€Œä¸æ˜¯ç»å¯¹ï¼‰çš„å¯¹äº â€œå°â€ çš„å®šä¹‰åŒ…è£…å®ç°ï¼š

```swift
// ä¸€ä¸ªä¿å­˜å››è¾¹å½¢çš„ç»“æ„ä½“
struct SmallRectangle {
    @TwelveOrLess var height: Int
    @TwelveOrLess var width: Int
}

var rectangle = SmallRectangle()
print(rectangle.height)
// Prints "0"

rectangle.height = 10
print(rectangle.height)
// Prints "10"

rectangle.height = 24
print(rectangle.height)
// Prints "12"
```

å½“ä½ ç»™å±æ€§åº”ç”¨åŒ…è£…æ—¶ï¼Œç¼–è¯‘å™¨ä¼š**ä¸ºåŒ…è£…ç”Ÿæˆæä¾›å­˜å‚¨çš„ä»£ç **ä»¥åŠ**é€šè¿‡åŒ…è£…è®¿é—®å±æ€§**çš„ä»£ç ã€‚ï¼ˆå±æ€§åŒ…è£…è´Ÿè´£å­˜å‚¨åŒ…è£…äº†çš„å€¼ï¼Œæ‰€ä»¥ä¸éœ€è¦åˆæˆä»£ç ã€‚ï¼‰ä½ ä¹Ÿå¯ä»¥è‡ªå·±å†™åº”ç”¨å±æ€§åŒ…è£…è¡Œä¸ºçš„ä»£ç ï¼Œä¸ä½¿ç”¨ç‰¹æ®Šç‰¹æ€§è¯­æ³•å¸¦æ¥çš„ä¼˜åŠ¿ã€‚æ¯”å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå‰é¢ `SmallRectangle` çš„ä¾‹å­ï¼Œå®ƒåœ¨ `TwelveOrLess` ç»“æ„ä½“ä¸­æ˜¾å¼åœ°åŒ…è£…äº†è‡ªå·±çš„å±æ€§ï¼Œè€Œä¸æ˜¯ç”¨ `@TwelveOrLess` è¿™ä¸ªç‰¹æ€§ï¼š

```swift
// ä¸€ä¸ªä¿å­˜å››è¾¹å½¢çš„ç»“æ„ä½“
struct SmallRectangle {
    // _heightã€_width å±æ€§å­˜å‚¨äº†ä¸€ä¸ªå±æ€§åŒ…è£…çš„å®ä¾‹ TwelveOrLess
    private var _height = TwelveOrLess()
    private var _width = TwelveOrLess()
    
    // heightã€width çš„ getter å’Œ setter åŒ…è£…äº† wrappedValue å±æ€§çš„å€¼
    var height: Int {
        get { return _height.wrappedValue }
        set { _height.wrappedValue = newValue }
    }
    var width: Int {
        get { return _width.wrappedValue }
        set { _width.wrappedValue = newValue }
    }
}
```

### è®¾å®šåŒ…è£…å±æ€§çš„åˆå§‹å€¼

ä¸Šé¢ä¾‹å­ä¸­çš„ä»£ç é€šè¿‡åœ¨ç»“æ„ä½“ `TwelveOrLess` çš„å®šä¹‰ä¸­ç»™ `number` åˆå§‹å€¼æ¥ç»™åŒ…è£…å±æ€§è®¾å®šåˆå§‹å€¼ã€‚ä½¿ç”¨å±æ€§åŒ…è£…çš„ä»£ç ï¼Œä¸èƒ½ä¸ºè¢« `TwelveOrLess` åŒ…è£…çš„å±æ€§è®¾ç½®ä¸åŒçš„åˆå§‹å€¼ â€”â€” æ¯”å¦‚è¿‡ï¼Œ `SmallRectangle` çš„å®šä¹‰ä¸­ï¼Œä¸èƒ½ç»™ `height` æˆ–è€… `width` åˆå§‹å€¼ã€‚è¦æ”¯æŒè®¾ç½®åˆå§‹å€¼æˆ–è€…å…¶ä»–è‡ªå®šä¹‰ï¼Œå±æ€§åŒ…è£…å¿…é¡»**æ·»åŠ åˆå§‹åŒ–å™¨**ã€‚è¿™é‡Œæœ‰ä¸€ä¸ª `TwelveOrLess` çš„æ‰©å±•ç‰ˆæœ¬å«åš `SmallNumber` ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªåˆå§‹åŒ–å™¨æ¥è®¾ç½®åŒ…è£…äº†çš„æœ€å¤§å€¼ï¼š

> ğŸ’¡ ä¸ºã€Œå±æ€§åŒ…è£…ã€æ·»åŠ åˆå§‹åŒ–æ–¹æ³•ã€‚

```swift
@propertyWrapper
struct SmallNumber {
    private var maximum: Int
    private var number: Int
    
    var wrappedValue: Int {
        get { return number }
        set { number = min(newValue, maximum) }
    }
    
    // MARK: æ·»åŠ ä¸‰ä¸ªåˆå§‹åŒ–å™¨
    init() {
        maximum = 12
        number = 0
    }
    init(wrappedValue: Int) {
        maximum = 12
        number = min(wrappedValue, maximum)
    }
    init(wrappedValue: Int, maximum: Int) {
        self.maximum = maximum
        number = min(wrappedValue, maximum)
    }
}
```

å½“ä½ ç»™å±æ€§åº”ç”¨åŒ…è£…ä½†å¹¶ä¸æŒ‡å®šåˆå§‹å€¼æ—¶ï¼ŒSwift ä½¿ç”¨ `init()` åˆå§‹åŒ–å™¨æ¥è®¾ç½®åŒ…è£…ã€‚æ¯”å¦‚è¯´ï¼š

```swift
struct ZeroRectangle {
    @SmallNumber var height: Int
    @SmallNumber var width: Int
}

var zeroRectangle = ZeroRectangle()
print(zeroRectangle.height, zeroRectangle.width)
// Prints "0 0"
```

å½“ä½ ä¸ºå±æ€§æŒ‡å®šä¸€ä¸ªåˆå§‹å€¼æ—¶ï¼ŒSwift ä½¿ç”¨ `init(wrappedValue:)` åˆå§‹åŒ–å™¨æ¥è®¾ç½®åŒ…è£…ã€‚æ¯”å¦‚ï¼š

```swift
struct UnitRectangle {
    // ä¸ºå±æ€§æŒ‡å®šä¸€ä¸ªåˆå§‹å€¼
    @SmallNumber var height: Int = 1
    @SmallNumber var width: Int = 1
}

var unitRectangle = UnitRectangle()
print(unitRectangle.height, unitRectangle.width)
// Prints "1 1"
```

å½“ä½ åœ¨åº”ç”¨äº†åŒ…è£…çš„å±æ€§ä¸Šä½¿ç”¨ = 1 æ—¶ï¼Œå®ƒè¢«ç¿»è¯‘æˆè°ƒç”¨ `init(wrappedValue:)` åˆå§‹åŒ–å™¨ã€‚åŒ…è£…äº† `height` å’Œ `width` çš„å®ä¾‹ `SmallNumber` é€šè¿‡è°ƒç”¨ `SmallNumber(wrappedValue: 1)` ç”Ÿæˆã€‚åˆå§‹åŒ–å™¨ä½¿ç”¨è¿™é‡ŒæŒ‡å®šçš„åŒ…è£…å€¼ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨é»˜è®¤ 12 æœ€å¤§å€¼ã€‚

å½“ä½ åœ¨è‡ªå®šä¹‰ç‰¹æ€§åçš„æ‹¬å·ä¸­å†™å®é™…å‚æ•°æ—¶ï¼ŒSwift ä½¿ç”¨æ¥å—é‚£äº›å®é™…å‚æ•°çš„åˆå§‹åŒ–å™¨æ¥è®¾ç½®åŒ…è£…ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ æä¾›åˆå§‹å€¼å’Œæœ€å¤§å€¼ï¼ŒSwift ä½¿ç”¨ `init(wrappedValue:maximum:)` åˆå§‹åŒ–å™¨ï¼š

```swift
struct NarrowRectangle {
    @SmallNumber(wrappedValue: 2, maximum: 5) var height: Int
    @SmallNumber(wrappedValue: 3, maximum: 4) var width: Int
}

var narrowRectangle = NarrowRectangle()
print(narrowRectangle.height, narrowRectangle.width)
// Prints "2 3"

narrowRectangle.height = 100
narrowRectangle.width = 100
print(narrowRectangle.height, narrowRectangle.width)
// Prints "5 4"
```

* åŒ…è£… `height` çš„ `SmallNumber` å®ä¾‹é€šè¿‡è°ƒç”¨ `SmallNumber(wrappedValue: 2, maximum: 5)` ç”Ÿæˆï¼›
* åŒ…è£… `width` çš„ `SmallNumber` å®ä¾‹é€šè¿‡è°ƒç”¨ `SmallNumber(wrappedValue: 3, maximum: 4)` ç”Ÿæˆï¼›

å½“ä½ åŒ…å«å±æ€§åŒ…è£…å®é™…å‚æ•°æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡èµ‹å€¼æ¥æŒ‡å®šåˆå§‹å€¼ã€‚Swift æŠŠèµ‹å€¼çœ‹ä½œæ˜¯ `wrappedValue` å®é™…å‚æ•°å¹¶ä¸”ä½¿ç”¨æ¥å—ä½ åŒ…å«çš„å®é™…å‚æ•°çš„åˆå§‹åŒ–å™¨æ¥åˆå§‹åŒ–ã€‚æ¯”å¦‚è¯´ï¼š

```swift
struct MixedRectangle {
    @SmallNumber var height: Int = 1
    @SmallNumber(maximum: 9) var width: Int = 2
}

var mixedRectangle = MixedRectangle()
print(mixedRectangle.height)
// Prints "1"

mixedRectangle.height = 20
print(mixedRectangle.height)
// Prints "12"
```

* åŒ…è£… `height` çš„ `SmallNumber` å®ä¾‹é€šè¿‡è°ƒç”¨ `SmallNumber(wrappedValue: 1)` ç”Ÿæˆ
* åŒ…è£… `width` çš„ `SmallNumber` å®ä¾‹é€šè¿‡è°ƒç”¨ `SmallNumber(wrappedValue: 2, maximum: 9)` ç”Ÿæˆã€‚å…¶ä¸­ï¼Œèµ‹å€¼ 2 è¢«å½“ä½œäº† `wrappedValue` çš„å®é™…å‚æ•°



### é€šè¿‡å±æ€§åŒ…è£…æ˜ å°„å€¼

å¯¹äºåŒ…è£…å€¼æ¥è¯´ï¼ŒåŒ…è£…å±æ€§å¯ä»¥é€šè¿‡å®šä¹‰æ˜ å°„å€¼æ¥æš´éœ²é¢å¤–åŠŸèƒ½ â€”â€” æ¯”å¦‚è¯´ï¼Œç®¡ç†è®¿é—®æ•°æ®åº“çš„å±æ€§åŒ…è£…å¯ä»¥ç»™å®ƒæ˜ å°„çš„å€¼æš´éœ²ä¸€ä¸ª `flushDatabaseConnection()` æ–¹æ³•ã€‚æ˜ å°„å€¼çš„åç§°å’ŒåŒ…è£…çš„å€¼ä¸€æ ·ï¼Œé™¤äº†å®ƒèµ·å§‹äºä¸€ä¸ªç¾å…ƒç¬¦å·ï¼ˆ `$` ï¼‰ã€‚å› ä¸ºä½ çš„ä»£ç ä¸èƒ½å®šä¹‰ `$` å¼€å¤´çš„å±æ€§ï¼Œæ‰€ä»¥æ˜ å°„å€¼ä¸å¯èƒ½å½±å“åˆ°ä½ å®šä¹‰çš„å±æ€§ã€‚

åœ¨ä¸Šé¢ `SmallNumber` çš„ä¾‹å­ä¸­ï¼Œå¦‚æœä½ å°è¯•è®¾ç½®ä¸€ä¸ªè¿‡å¤§çš„å€¼ç»™å±æ€§ï¼Œå±æ€§åŒ…è£…å°±ä¼šåœ¨ä¿å­˜å€¼ä¹‹å‰è°ƒæ•´ã€‚ä¸‹é¢çš„ä»£ç ç»™ `SmallNumber` ç»“æ„ä½“æ·»åŠ äº† `projectedValue` å±æ€§ä»¥è¿½è¸ªå±æ€§åŒ…è£…æ˜¯å¦åœ¨ä¿å­˜æ–°å€¼ä¹‹å‰è°ƒæ•´äº†æ–°å€¼çš„å¤§å°ã€‚

> ğŸ’¡ ç»™å±æ€§åŒ…è£…å…³è”é¢å¤–å±æ€§ï¼Œç„¶åé€šè¿‡ `$` å…³é”®å­—è®¿é—®ã€‚

```swift
@propertyWrapper
struct SmallNumber {
    private var number = 0
    var projectedValue = false
    var wrappedValue: Int {
        get { return number }
        set {
            if newValue > 12 {
                number = 12
                projectedValue = true
            } else {
                number = newValue
                projectedValue = false
            }
        }
    }
}

struct SomeStructure {
    @SmallNumber var someNumber: Int
}

var someStructure = SomeStructure()

someStructure.someNumber = 4
print(someStructure.$someNumber)
// Prints "false"

someStructure.someNumber = 55
print(someStructure.$someNumber)
// Prints "true"
```

ä½¿ç”¨ `s.$someNumber` æ¥è®¿é—®åŒ…è£…çš„æ˜ å°„å€¼ã€‚

å±æ€§åŒ…è£…å¯ä»¥è¿”å›å®ƒæ˜ å°„çš„ä»»æ„ç±»å‹å€¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå±æ€§åŒ…è£…åªæš´éœ²äº†ä¸€ç‚¹ä¿¡æ¯ â€”â€” æ•°å­—æ˜¯å¦è¢«è°ƒæ•´è¿‡ â€”â€” æ‰€ä»¥å®ƒæš´éœ²äº†å¸ƒå°”å€¼ä½œä¸ºå®ƒæ˜ å°„çš„å€¼ã€‚éœ€è¦æš´éœ²æ›´å¤šä¿¡æ¯çš„åŒ…è£…å¯ä»¥è¿”å›ä¸€ä¸ªæŸç§æ•°æ®ç±»å‹çš„å®ä¾‹ï¼Œæˆ–è€…å¯ä»¥è¿”å› `self` æ¥æš´éœ²åŒ…è£…è‡ªèº«å®ä¾‹ä½œä¸ºæ˜ å°„å€¼ã€‚

å½“ä½ ä»æŸç±»å‹è®¿é—®æ˜ å°„å€¼ï¼Œæ¯”å¦‚å±æ€§çš„ `getter` æˆ–è€…å®ä¾‹æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨å±æ€§åå‰é¢çœç•¥ `self.` ï¼Œå°±åƒè®¿é—®å…¶ä»–å±æ€§ä¸€æ ·ã€‚ä¸‹é¢ä¾‹å­ä¸­çš„ä»£ç å°†åŒ…è£…çš„ `height` å’Œ `width` ä½œä¸º `$height` å’Œ `$width` æ¥è®¿é—®ï¼š

```swift
@propertyWrapper
struct SmallNumber {
    private var number = 0
    var projectedValue = false
    var wrappedValue: Int {
        get { return number }
        set {
            if newValue > 12 {
                number = 12
                projectedValue = true
            } else {
                number = newValue
                projectedValue = false
            }
        }
    }
}

enum Size {
    case small, large
}

struct SizeRectangle {
    @SmallNumber var height: Int
    @SmallNumber var width: Int
    
    mutating func resize(to size: Size) -> Bool {
        switch size {
        case .small:
            height = 10
            width = 20
        case .large:
            height = 100
            width = 100
        }
        // $height å’Œ $width è¿”å›çš„æ˜¯å…³è”çš„ Bool ç±»å‹å˜é‡ projectedValue
        return $height || $width
    }
}
```

ç”±äºå±æ€§åŒ…è£…è¯­æ³•ä»…ä»…æ˜¯å±æ€§ `getter` å’Œ `setter` çš„è¯­æ³•ç³–ï¼Œè®¿é—® `height` å’Œ `width` çš„è¡Œä¸ºå’Œè®¿é—®å…¶ä»–ä»»æ„å±æ€§ç›¸åŒã€‚æ¯”å¦‚è¯´ï¼Œ `resize(to:)` é‡Œçš„ä»£ç ä½¿ç”¨ä»–ä»¬çš„å±æ€§åŒ…è£…è®¿é—® `height` å’Œ `width` ã€‚å¦‚æœä½ è°ƒç”¨ `resize(to: .large)` ï¼Œ`switch` æƒ…å†µ `.large` å°±ä¼šè®¾ç½®é•¿æ–¹å½¢çš„é«˜å’Œå®½åˆ° `100`. åŒ…è£…è¿™äº›å±æ€§çš„å€¼å¤§äº `12`ï¼Œç„¶åå®ƒè®¾ç½®æ˜ å°„å€¼ä¸º `true` ï¼Œä»¥è®°å½•å®ƒè°ƒæ•´äº†å®ƒä»¬å€¼è¿™ä¸ªäº‹å®ã€‚åœ¨ `resize(to:)` ç»“å°¾ï¼Œè¿”å›è¯­å¥æ£€æŸ¥ `$height` å’Œ `$width` æ¥å†³å®šå±æ€§åŒ…è£…æ˜¯å¦è°ƒæ•´äº† `height` æˆ– `width` ã€‚


## å…¨å±€å’Œå±€éƒ¨å˜é‡

ä¸Šè¾¹æè¿°çš„è®¡ç®—å±æ€§å’Œè§‚å¯Ÿå±æ€§çš„èƒ½åŠ›åŒæ ·å¯¹å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡æœ‰æ•ˆã€‚**å…¨å±€å˜é‡æ˜¯å®šä¹‰åœ¨ä»»ä½•å‡½æ•°ã€æ–¹æ³•ã€é—­åŒ…æˆ–è€…ç±»å‹ç¯å¢ƒä¹‹å¤–çš„å˜é‡**ã€‚**å±€éƒ¨å˜é‡æ˜¯å®šä¹‰åœ¨å‡½æ•°ã€æ–¹æ³•æˆ–è€…é—­åŒ…ç¯å¢ƒä¹‹ä¸­çš„å˜é‡**ã€‚

ä½ åœ¨ä¹‹å‰ç« èŠ‚ä¸­æ‰€é‡åˆ°çš„å…¨å±€å’Œå±€éƒ¨å˜é‡éƒ½æ˜¯**å­˜å‚¨å˜é‡**ã€‚å­˜å‚¨å˜é‡ï¼Œç±»ä¼¼äºå­˜å‚¨å±æ€§ï¼Œä¸ºç‰¹å®šç±»å‹çš„å€¼æä¾›å­˜å‚¨å¹¶ä¸”å…è®¸è¿™ä¸ªå€¼è¢«è®¾ç½®å’Œå–å›ã€‚

æ€»ä¹‹ï¼Œä½ åŒæ ·å¯ä»¥å®šä¹‰è®¡ç®—å±æ€§ä»¥åŠç»™å­˜å‚¨å˜é‡å®šä¹‰è§‚å¯Ÿè€…ï¼Œæ— è®ºæ˜¯å…¨å±€è¿˜æ˜¯å±€éƒ¨ç¯å¢ƒã€‚è®¡ç®—å˜é‡è®¡ç®—è€Œä¸æ˜¯å­˜å‚¨å€¼ï¼Œå¹¶ä¸”ä¸è®¡ç®—å±æ€§çš„å†™æ³•ä¸€è‡´ã€‚

> âš ï¸
> 
> **å…¨å±€å¸¸é‡å’Œå˜é‡æ°¸è¿œæ˜¯å»¶è¿Ÿè®¡ç®—çš„ï¼Œä¸å»¶è¿Ÿå­˜å‚¨å±æ€§æœ‰ç€ç›¸åŒçš„è¡Œä¸º**ã€‚ä¸åŒäºå»¶è¿Ÿå­˜å‚¨å±æ€§ï¼Œå…¨å±€å¸¸é‡å’Œå˜é‡ä¸éœ€è¦æ ‡è®° `lazy` ä¿®é¥°ç¬¦ã€‚

## ç±»å‹å±æ€§

å®ä¾‹å±æ€§æ˜¯å±äºç‰¹å®šç±»å‹å®ä¾‹çš„å±æ€§ã€‚æ¯æ¬¡ä½ åˆ›å»ºè¿™ä¸ªç±»å‹çš„æ–°å®ä¾‹ï¼Œå®ƒå°±æ‹¥æœ‰ä¸€å †å±æ€§å€¼ï¼Œä¸å…¶ä»–å®ä¾‹ä¸åŒã€‚

ä½ åŒæ ·å¯ä»¥å®šä¹‰**å±äºç±»å‹æœ¬èº«çš„å±æ€§**ï¼Œå®ƒä¸æ˜¯è¿™ä¸ªç±»å‹çš„æŸä¸€ä¸ªå®ä¾‹çš„å±æ€§ã€‚è¿™ä¸ªå±æ€§åªæœ‰ä¸€ä¸ªæ‹·è´ï¼Œæ— è®ºä½ åˆ›å»ºäº†å¤šå°‘ä¸ªç±»å¯¹åº”çš„å®ä¾‹ã€‚è¿™æ ·çš„å±æ€§å«åš**ç±»å‹å±æ€§**ã€‚

ç±»å‹å±æ€§åœ¨å®šä¹‰é‚£äº›å¯¹ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹éƒ½é€šç”¨çš„å€¼çš„æ—¶å€™å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚å®ä¾‹è¦ä½¿ç”¨çš„å¸¸é‡å±æ€§ï¼ˆç±»ä¼¼ C é‡Œçš„é™æ€å¸¸é‡ï¼‰ï¼Œæˆ–è€…å‚¨å­˜å¯¹è¿™ä¸ªç±»å‹çš„æ‰€æœ‰å®ä¾‹å…¨å±€å¯è§çš„å€¼çš„å­˜å‚¨å±æ€§ï¼ˆç±»ä¼¼ C é‡Œçš„é™æ€å˜é‡ï¼‰ã€‚

å­˜å‚¨ç±»å‹å±æ€§å¯ä»¥æ˜¯å˜é‡æˆ–è€…å¸¸é‡ã€‚è®¡ç®—ç±»å‹å±æ€§æ€»è¦è¢«å£°æ˜ä¸ºå˜é‡å±æ€§ï¼Œä¸è®¡ç®—å®ä¾‹å±æ€§ä¸€è‡´ã€‚

> ğŸ’¡ åŒºåˆ†ï¼šå®ä¾‹å±æ€§ã€ç±»å‹å±æ€§ã€‚

### ç±»å‹å±æ€§è¯­æ³•ï¼ˆ`static`ï¼‰

åœ¨ C å’Œ  Objective-C ä¸­ï¼Œä½ ä½¿ç”¨**å…¨å±€é™æ€å˜é‡**æ¥å®šä¹‰ä¸€ä¸ªä¸ç±»å‹å…³è”çš„é™æ€å¸¸é‡å’Œå˜é‡ã€‚åœ¨ Swift ä¸­ï¼Œæ€»ä¹‹ï¼Œç±»å‹å±æ€§æ˜¯å†™åœ¨ç±»å‹çš„å®šä¹‰ä¹‹ä¸­çš„ï¼Œåœ¨ç±»å‹çš„èŠ±æ‹¬å·é‡Œï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªç±»å‹å±æ€§éƒ½æ˜¾å¼åœ°æ”¾åœ¨å®ƒæ”¯æŒçš„ç±»å‹èŒƒå›´å†…ã€‚

**ä½¿ç”¨ `static` å…³é”®å­—æ¥å£°æ˜ç±»å‹å±æ€§**ã€‚å¯¹äºç±»ç±»å‹çš„è®¡ç®—ç±»å‹å±æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨ `class` å…³é”®å­—æ¥å…è®¸å­ç±»é‡å†™çˆ¶ç±»çš„å®ç°ã€‚ä¸‹é¢çš„æ —å­å±•ç¤ºäº†å­˜å‚¨å’Œè®¡ç®—ç±»å‹å±æ€§çš„è¯­æ³•ï¼š

```swift
// ç»“æ„ä½“
struct SomeStructure {
    static var storedTypeProperty = "Some value."
    // å£°æ˜ä¸€ä¸ªåªè¯»è®¡ç®—å±æ€§
    static var computedTypeProperty: Int {
        return 1
    }
}

// æšä¸¾ç±»å‹
enum SomeEnumeration {
    static var storedTypeProperty = "Some value."
    static var computedTypeProperty: Int {
        return 6
    }
}

// ç±»
class SomeClass {
    static var storedTypeProperty = "Some value."
    static var computedTypeProperty: Int {
        return 27
    }
    class var overrideableComputedTypeProperty: Int {
        return 107
    }
}
```


### æŸ¥è¯¢å’Œè®¾ç½®ç±»å‹å±æ€§

ç±»å‹å±æ€§ä½¿ç”¨ç‚¹è¯­æ³•æ¥æŸ¥è¯¢å’Œè®¾ç½®ï¼Œä¸å®ä¾‹å±æ€§ä¸€è‡´ã€‚æ€»ä¹‹ï¼Œ**ç±»å‹å±æ€§åœ¨ç±»é‡ŒæŸ¥è¯¢å’Œè®¾ç½®ï¼Œè€Œä¸æ˜¯è¿™ä¸ªç±»å‹çš„å®ä¾‹**ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š

```swift
print(SomeStructure.storedTypeProperty)
// Prints "Some value."
SomeStructure.storedTypeProperty = "Another value."
print(SomeStructure.storedTypeProperty)
// Prints "Another value."

print(SomeEnumeration.computedTypeProperty)
// Prints "6"

print(SomeClass.computedTypeProperty)
// Prints "27"
```

