> 原文：[Enum-Driven TableView Development](https://www.raywenderlich.com/5542-enum-driven-tableview-development)
>
> 在本教程中，您将学习如何使用 Swift 枚举来处理应用程序的不同状态以填充列表视图。



在 iOS 开发中，还有什么比 UITableView 更基础的吗？这是一个简单、干净的控件。不幸的是，很多复杂性都隐藏在底层：您的代码需要在正确的时间显示加载指示器、处理错误、等待服务调用完成并在结果出现时显示结果。

在本教程中，您将学习如何使用 Enum-Driven TableView Development 来管理这种复杂性。

要遵循此技术，您将重构一个名为 Chirper 的现有应用程序。在此过程中，您将了解以下内容：

* 如何使用枚举来管理 ViewController 的状态。
* 在视图中反映状态对用户的重要性。
* 定义不明确的状态的危险
* 如何使用属性观察器使您的视图保持最新。
* 如何使用分页来模拟无穷无尽的搜索结果列表。



您将为本教程重构的 Chirper 应用程序提供了一个可搜索的来自 xeno-canto 公共 API 的鸟鸣声列表。

如果您在应用程序中搜索某种鸟类，它会为您提供与您的搜索查询匹配的记录列表。您可以通过点击每行中的按钮来播放录音。
要下载入门项目，请使用本教程顶部或底部的“下载材料”按钮。下载后，在 Xcode 中打开启动项目。

## 不同的状态
一个设计良好的表格视图有四种不同的状态：

* 正在加载：应用程序正忙于获取新数据。
* 错误：服务调用或其他操作失败。
* Empty：服务调用没有返回数据。
* 已填充：应用已检索到要显示的数据。

已填充状态是最明显的，但其他状态也很重要。您应该始终让用户知道应用程序状态，这意味着在加载状态期间显示加载指示器，告诉用户如何处理空数据集并在出现问题时显示友好的错误消息。

首先，打开 MainViewController.swift 查看代码。视图控制器根据其某些属性的状态做了一些非常重要的事情：
当 isLoading 设置为 true 时，视图会显示一个加载指示器。
当错误为非零时，视图会告诉用户出现问题。
如果录音数组为 nil 或为空，视图会显示一条消息，提示用户搜索不同的内容。
如果上述条件均不成立，则视图将显示结果列表。
`tableView.tableFooterView` 设置为当前状态的正确视图。
修改代码时要记住很多事情。而且，更糟糕的是，当您通过应用程序添加更多功能时，这种模式会变得更加复杂。









