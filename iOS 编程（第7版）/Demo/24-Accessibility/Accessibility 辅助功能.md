iOS是世界上最易访问的移动平台。无论用户在视觉、听力、运动技能或学习挑战方面需要支持，iOS都可以提供帮助。

大多数辅助功能都内置于系统中，因此您作为开发人员不需要做任何事情。有些允许开发人员为用户提供更丰富的体验，通常开发人员只需很少的工作。让我们看看一个确实需要开发人员输入的辅助功能选项：VoiceOver（旁白）。

## VoiceOver（旁白）

VoiceOver 是一个无障碍功能，帮助有视觉障碍的用户浏览应用程序的界面。苹果在系统中提供了hooks，允许你向用户描述你的界面的各个方面。大多数 UIKit 视图和控件会自动向用户提供信息，但提供（系统）无法推断的额外信息往往是有益的。此外，对于你创建的自定义视图或控件，你总是需要自己提供这些信息。

这些对用户的提示主要是通过 **UIAccessibility** 协议实现的。**UIAccessibility** 是一个非正式的协议，在所有标准的 UIKit 视图和控件上实现。非正式协议是一个比之前介绍过的正式协议更松散的 "契约"。正式协议是用 **protocol** 关键字声明的，它声明了一个方法和属性的列表，这些方法和属性必须由符合该协议的东西来实现。非正式协议是作为 **NSObject** 的一个扩展来实现的；因此，**NSObject** 的所有子类都隐含地遵守该协议。

你可能想知道为什么 **UIAccessibility** 不是一个正规的、正式的协议，就像你在本书中看到的其他协议一样。非正式协议是 Objective-C 在正式协议中没有可选的方法时遗留下来的。非正式协议是解决这个问题的一种变通方法。从本质上讲，他们要求每个 NSObject 都有没有意义的实现的方法。然后，子类可以重写他们感兴趣的方法。

**UIAccessibility** 协议所提供的一些有用的属性如下：

* `accessibilityLabel`: 一个元素的简短描述。对于有文本的视图，这通常是视图所显示的文本。
* `accessibilityHint`: 与关联元素交互的结果的简短描述。例如，停止视频录制的按钮的辅助功能提示可能是“停止录制”。
* `accessibilityFrame`: 可访问性元素的边框尺寸。对于 **UIView** 对象，这等于视图的边框。
* `accessibilityTraits`: 元素特征的描述。有很多特征，并且可以用多个特征来描述元素。要查看所有可能特性的列表，请查看 **UIAccessibilityTraits** 的文档。
* `accessibilityValue`: 一个元素的值的描述，独立于其标签描述。例如，一个 UITextField 的无障碍值，是文本字段的内容，而一个 UISlider 的无障碍值，是滑块被设置的百分比。

让我们来看看如何通过 Photorama 应用程序实现 VoiceOver 无障碍功能。Photorama 已经通过iOS 内置的功能向有视觉障碍的用户提供了相当多的信息。首先考虑一下有视觉障碍的人的当前体验。



有几种方法可以在开启 VoiceOver 的情况下进行导航。首先，在屏幕上滑动你的手指。请注意，系统会对你的手指目前所在的任何元素进行描述。现在点击屏幕左上角的 "返回 "按钮，上面写着 "辅助功能"。系统会告诉你这个元素是 "辅助功能--返回按钮"。系统正在为你读取 accessibilityLabel 以及本质上是 accessibilityTraits 的内容。

请注意，点击可触摸的 "返回 "按钮并不能让你回到上一个屏幕。要激活所选的项目，在屏幕的任何地方点两下。这相当于禁用 VoiceOver 时的单点。这将使你回到无障碍设施的前一个屏幕。
另一种导航方式是在屏幕上向左和向右轻扫。这将分别选择屏幕上的上一个和下一个无障碍元素。VoiceOver这一行应该被选中。玩玩左右滑动，在屏幕上移动焦点。

用三个手指滑动来滚动。注意，要想滚动，滚动视图或其子视图之一必须是当前关注的元素。玩玩单点和双点来选择和激活项目，以及用三个手指来滚动。这就是你在启用VoiceOver时的导航方式。
还有一个需要了解的手势是如何启用屏幕幕布。用三根手指，在屏幕上的任何地方敲三下。整个屏幕会变黑，让你真正测试和体验你的应用程序对有视觉障碍的人来说是什么感觉。再用三根手指在任何地方点一下，就可以关闭屏幕幕布。