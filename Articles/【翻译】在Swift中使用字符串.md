> åŽŸæ–‡ï¼š[Working with Strings in Swift](https://tanaschita.com/20210605-understanding-swift-strings/)
>
> å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Swift ä¸­çš„ `String` ç±»åž‹åŠå…¶åŒä¼´ `Character`ã€`Index` å’Œ `Substring`ã€‚



ä½œä¸ºæ–‡æœ¬å€¼çš„ä»£è¡¨ï¼Œå­—ç¬¦ä¸²æ˜¯æˆ‘ä»¬ç¼–ç æ—¶æœ€å¸¸ç”¨çš„æ•°æ®ç»“æž„ç±»åž‹ä¹‹ä¸€ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Swift çš„ `String` ç±»åž‹å’Œå®ƒçš„åŒä¼´ `Character`ã€`Index` å’Œ `Substring`ã€‚

è®©æˆ‘ä»¬ç›´æŽ¥è·³åˆ°ä¸€ä¸ªä¾‹å­ä¸­ï¼š

```swift
var fruit = "apple" // fruit æ˜¯ä¸€ä¸ª String ç±»åž‹çš„å˜é‡

fruit.isEmpty // false
fruit.count // 5
fruit.uppercased() // "APPLE"
fruit.first // "a"
fruit.last // "e"
fruit.append("!") // "apple!"
```

åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›å­—ç¬¦ä¸²çš„å±žæ€§å’Œæ–¹æ³•ï¼Œå®ƒä»¬å¤§å¤šæ˜¯ä¸è¨€è‡ªæ˜Žçš„ã€‚

åœ¨ç³»ç»Ÿåº•å±‚ï¼ŒSwift çš„ `String` ç±»åž‹è¢«å»ºæ¨¡ä¸º `Character` ç±»åž‹æ‰€ä»£è¡¨çš„å­—ç¬¦é›†åˆã€‚å­—ç¬¦ä¸²åœ¨è®¸å¤šæ–¹é¢çš„è¡Œä¸ºä¸Žå…¶ä»–é›†åˆç±»ä¼¼ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åƒåœ¨æ•°ç»„ä¸Šæ‰§è¡ŒéåŽ†ä¸€æ ·éåŽ†å…¶å­—ç¬¦ï¼š

```swift
for character in "hello ðŸŒ" {
    print(character) // // prints "h", "e", "l", "l", "o", "ðŸŒ"
}
```

æ¯ä¸€ä¸ª `character` ç±»åž‹éƒ½ä»£è¡¨ç€ä¸€ä¸ªå¯ä»¥ç”±ä¸€ä¸ªæˆ–å¤šä¸ª Unicode å­—ç¬¦ç»„æˆçš„ï¼Œäººç±»å¯è¯»çš„å­—ç¬¦ã€‚Unicode æ˜¯ä¸€ä¸ªç”¨äºŽç¼–ç ã€è¡¨ç¤ºå’Œå¤„ç†æ–‡æœ¬çš„å›½é™…æ ‡å‡†ã€‚å®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿä»¥æ ‡å‡†åŒ–çš„å½¢å¼è¡¨ç¤ºä»»ä½•è¯­è¨€ä¸­çš„å‡ ä¹Žä»»ä½•å­—ç¬¦ã€‚

```swift
let emoji: String = "ðŸŒ"
emoji.count // 1
emoji.utf16.count // 2
emoji.utf8.count // 4
```

æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çœ‹åˆ°çš„ï¼ŒSwift characters çš„æ•°é‡å’Œ  UTF-16 characters ä»¥åŠ UTF-8 characters çš„å®žé™…æ•°é‡å¹¶ä¸æ€»æ˜¯ç›¸ç­‰çš„ã€‚



## å­—ç¬¦ä¸²æ’å€¼

å­—ç¬¦ä¸²æ’å€¼æä¾›äº†ä¸€ç§ä»Žå¸¸é‡æˆ–å˜é‡çš„æ··åˆä¸­æž„é€ ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚æˆ‘ä»¬æ’å…¥å­—ç¬¦ä¸²å­—é¢é‡çš„æ¯ä¸ªå˜é‡éƒ½å¿…é¡»ç”¨ä¸€å¯¹å°æ‹¬å·åŒ…è£¹ï¼Œå‰ç¼€ä¸ºåæ–œæ ã€‚

```swift
let age = 10
let description = "\(age) years old"
print(description) // prints "10 years old"
```

Swift çš„å­—ç¬¦ä¸²æ’å€¼èƒ½å¤Ÿè‡ªåŠ¨å¤„ç†å„ç§ä¸åŒçš„æ•°æ®ç±»åž‹ã€‚



## å­—ç¬¦ä¸²ç´¢å¼•å’Œå­å­—ç¬¦ä¸²

ä¸ºäº†è®¿é—®å­—ç¬¦ä¸²çš„æŸäº›éƒ¨åˆ†æˆ–ä¿®æ”¹å®ƒï¼ŒSwift æä¾›äº† `Swift.Index` ç±»åž‹ï¼Œå®ƒè¡¨ç¤ºæ¯ä¸ª `Character` å­—ç¬¦åœ¨ä¸€ä¸ª `String` å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ã€‚

æ¯ä¸ªå­—ç¬¦ä¸²éƒ½æœ‰ä¸€ä¸ª `startIndex` å’Œä¸€ä¸ª `endIndex`ã€‚ä½¿ç”¨è¿™äº›ï¼Œæˆ‘ä»¬å¯ä»¥è¡ç”Ÿå‡ºä»»ä½•å…¶ä»–çš„ç´¢å¼•ï¼Œå°±åƒè¿™æ ·ï¼š

```swift
let hello = "hello world"
let index = hello.index(hello.startIndex, offsetBy: 6)
// index æ˜¯ä¸€ä¸ª String.Index ç±»åž‹

hello[index] // "w"
hello.prefix(upTo: index) // "hello "
```

ä¸Šé¢çš„ `prefix(upTo:)` æ–¹æ³•è¿”å›žä¸€ä¸ª `Substring`ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª `String`ã€‚ä¸ºä»€ä¹ˆï¼Ÿå­—ç¬¦ä¸²æ˜¯å€¼ç±»åž‹ï¼Œä¾‹å¦‚ï¼Œæ¯æ¬¡æˆ‘ä»¬ä¼ é€’æˆ–é‡æ–°åˆ†é…å®ƒä»¬æ—¶ï¼Œå®ƒä»¬éƒ½ä¼šè¢«å¤åˆ¶ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯åˆ«äººä¸ä¼šåœ¨æˆ‘ä»¬ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹æ”¹å˜å®ƒï¼Œä½†ä¹Ÿæœ‰æ•ˆçŽ‡ä¸Šçš„ç¼ºç‚¹ã€‚

`Substring` ç±»åž‹æ˜¯ä¸€ç§æ›´æœ‰æ•ˆçš„å­—ç¬¦ä¸²ç±»åž‹ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸å¤åˆ¶çš„æƒ…å†µä¸‹æ£€ç´¢å’Œä¼ é€’ `Substring`ã€‚`Substring` æ˜¯ä¸ºäº†çŸ­æœŸä½¿ç”¨ã€‚

## æ€»ç»“

åœ¨å¤„ç†å­—ç¬¦ä¸²æ—¶ï¼ŒSwift æä¾›äº†ä¸€ä¸ªçŽ°ä»£åŒ–çš„å¼ºå¤§ APIã€‚ç„¶è€Œï¼Œæœ‰äº›éƒ¨åˆ†ï¼Œä¾‹å¦‚ç´¢å¼•ï¼ˆindicesï¼‰çš„ä½¿ç”¨å¯èƒ½çœ‹èµ·æ¥å¾ˆå¤æ‚ã€‚

ä¸ºäº†ç®€åŒ–ç´¢å¼•ï¼ˆindicesï¼‰çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€äº›æ‰©å±•æ¥æŠ½è±¡å‡ºå®žçŽ°çš„ç»†èŠ‚ã€‚ä¾‹å¦‚ï¼Œ`prefix` æ–¹æ³•çš„æ‰©å±•å¯ä»¥æ˜¯è¿™æ ·çš„ï¼š

```swift
extension String {
    func prefix(upTo: Int) -> String {
        let toIndex = self.index(startIndex, offsetBy: upTo)
        return String(self[..<toIndex])
    }
}
```

è¿™ä¸ªæ‰©å±•å…è®¸æˆ‘ä»¬ç›´æŽ¥ä½¿ç”¨ `Int` ç±»åž‹è€Œä¸æ˜¯ `Index` ç±»åž‹ã€‚æˆ‘ä»¬çŽ°åœ¨å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•´æ•°`hello.prefix(upTo: 5)` æ¥èŽ·å¾—ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŸä¸ªå‰ç¼€ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ª indexã€‚