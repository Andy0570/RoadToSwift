æ‰©å±•å¯ä»¥ç»™ä¸€ä¸ªç°æœ‰çš„ç±»ï¼Œç»“æ„ä½“ï¼Œæšä¸¾ï¼Œè¿˜æœ‰åè®®æ·»åŠ æ–°çš„åŠŸèƒ½ã€‚å®ƒè¿˜æ‹¥æœ‰ä¸éœ€è¦è®¿é—®è¢«æ‰©å±•ç±»å‹æºä»£ç å°±èƒ½å®Œæˆæ‰©å±•çš„èƒ½åŠ›ï¼ˆå³é€†å‘å»ºæ¨¡ï¼‰ã€‚æ‰©å±•å’Œ Objective-C çš„åˆ†ç±»å¾ˆç›¸ä¼¼ã€‚ï¼ˆä¸ Objective-C åˆ†ç±»ä¸åŒçš„æ˜¯ï¼ŒSwift æ‰©å±•æ˜¯æ²¡æœ‰åå­—çš„ã€‚ï¼‰


Swift ä¸­çš„æ‰©å±•å¯ä»¥ï¼š
* æ·»åŠ è®¡ç®—å‹å®ä¾‹å±æ€§å’Œè®¡ç®—å‹ç±»å±æ€§
* å®šä¹‰å®ä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•
* æä¾›æ–°çš„æ„é€ å™¨
* å®šä¹‰ä¸‹æ ‡
* å®šä¹‰å’Œä½¿ç”¨æ–°çš„åµŒå¥—ç±»å‹
* ä½¿å·²ç»å­˜åœ¨çš„ç±»å‹éµå¾ªï¼ˆ``conform``ï¼‰ä¸€ä¸ªåè®®

> æ³¨æ„
> 
> * æ‰©å±•å¯ä»¥ç»™ä¸€ä¸ªç±»å‹æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œä½†æ˜¯**ä¸èƒ½é‡å†™å·²ç»å­˜åœ¨çš„åŠŸèƒ½**ã€‚
> * æ‰©å±•å¯ä»¥æ·»åŠ æ–°çš„è®¡ç®—å±æ€§ï¼Œä½†æ˜¯å®ƒä»¬**ä¸èƒ½æ·»åŠ å­˜å‚¨å±æ€§ï¼Œæˆ–å‘ç°æœ‰çš„å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿè€…**ã€‚


## 1. æ‰©å±•çš„è¯­æ³•

ä½¿ç”¨ extension å…³é”®å­—å£°æ˜æ‰©å±•ï¼š

```swift
extension SomeType {
  // åœ¨è¿™é‡Œç»™ SomeType æ·»åŠ æ–°çš„åŠŸèƒ½
}
```

æ‰©å±•å¯ä»¥æ‰©å……ä¸€ä¸ªç°æœ‰çš„ç±»å‹ï¼Œç»™å®ƒæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªåè®®ã€‚åè®®åç§°çš„å†™æ³•å’Œç±»æˆ–è€…ç»“æ„ä½“ä¸€æ ·ï¼š

```swift
// æ‰©å±•æŸä¸ªç±»çš„åŒæ—¶ï¼Œè®©è¯¥ç±»éµå®ˆæŒ‡å®šçš„åè®®
extension SomeType: SomeProtocol, AnotherProtocol {
  // åè®®æ‰€éœ€è¦çš„å®ç°å†™åœ¨è¿™é‡Œ
}
```


> æ³¨æ„
> 
> å¯¹ä¸€ä¸ªç°æœ‰çš„ç±»å‹ï¼Œå¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ªæ‰©å±•æ¥æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å‹çš„æ‰€æœ‰å®ä¾‹éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–°åŠŸèƒ½ï¼ŒåŒ…æ‹¬é‚£äº›åœ¨æ‰©å±•å®šä¹‰ä¹‹å‰å°±å­˜åœ¨çš„å®ä¾‹ã€‚


## 2. è®¡ç®—å‹å±æ€§

æ‰©å±•å¯ä»¥ç»™ç°æœ‰ç±»å‹æ·»åŠ **è®¡ç®—å‹å®ä¾‹å±æ€§**å’Œ**è®¡ç®—å‹ç±»å±æ€§**ã€‚

```swift
// ç»™ Swift å†…å»ºçš„ Double ç±»å‹æ·»åŠ  5 ä¸ªè®¡ç®—å‹å®ä¾‹å±æ€§
// æŠŠä¸€ä¸ª Double å€¼çœ‹ä½œæ˜¯æŸå•ä½ä¸‹çš„é•¿åº¦å€¼ã€‚
extension Double {
    var km: Double { return self * 1_000.0 }
    var m: Double { return self }
    var cm: Double { return self / 100.0 }
    var mm: Double { return self / 1_000.0 }
    var ft: Double { return self / 3.28084 }
}

let oneInch = 25.4.mm
print("ä¸€è‹±å¯¸ç­‰äº \(oneInch) ç±³ã€‚")
// ä¸€è‹±å¯¸ç­‰äº 0.0254 ç±³ã€‚

let threeFeet = 3.ft
print("ä¸‰è‹±å¯¸ç­‰äº \(threeFeet) ç±³ã€‚")
// ä¸‰è‹±å¯¸ç­‰äº 0.914399970739201 ç±³ã€‚
```


## 3. æ„é€ å™¨

æ‰©å±•å¯ä»¥ç»™ç°æœ‰çš„ç±»å‹æ·»åŠ æ–°çš„æ„é€ å™¨ã€‚å®ƒä½¿ä½ å¯ä»¥æŠŠè‡ªå®šä¹‰ç±»å‹ä½œä¸ºå‚æ•°æ¥ä¾›å…¶ä»–ç±»å‹çš„æ„é€ å™¨ä½¿ç”¨ï¼Œæˆ–è€…åœ¨ç±»å‹çš„åŸå§‹å®ç°ä¸Šæ·»åŠ é¢å¤–çš„æ„é€ é€‰é¡¹ã€‚

æ‰©å±•å¯ä»¥ç»™ä¸€ä¸ªç±»æ·»åŠ æ–°çš„**ä¾¿åˆ©æ„é€ å™¨**ï¼Œä½†æ˜¯å®ƒä»¬ä¸èƒ½ç»™ç±»æ·»åŠ æ–°çš„æŒ‡å®šæ„é€ å™¨æˆ–è€…ææ„å™¨ã€‚**æŒ‡å®šæ„é€ å™¨å’Œææ„å™¨å¿…é¡»å§‹ç»ˆç”±ç±»çš„åŸå§‹å®ç°æä¾›**ã€‚

å¦‚æœä½ ä½¿ç”¨æ‰©å±•ç»™ä¸€ä¸ªå€¼ç±»å‹æ·»åŠ æ„é€ å™¨ï¼Œè€Œè¿™ä¸ªå€¼ç±»å‹å·²ç»ä¸ºæ‰€æœ‰å­˜å‚¨å±æ€§æä¾›é»˜è®¤å€¼ï¼Œä¸”æ²¡æœ‰å®šä¹‰ä»»ä½•è‡ªå®šä¹‰æ„é€ å™¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨è¯¥å€¼ç±»å‹æ‰©å±•çš„æ„é€ å™¨ä¸­ä½¿ç”¨é»˜è®¤æ„é€ å™¨å’Œæˆå‘˜æ„é€ å™¨ã€‚å¦‚æœä½ å·²ç»å°†æ„é€ å™¨å†™åœ¨å€¼ç±»å‹çš„åŸå§‹å®ç°ä¸­ï¼Œåˆ™ä¸é€‚ç”¨äºè¿™ç§æƒ…å†µï¼Œå¦‚åŒ å€¼ç±»å‹çš„æ„é€ å™¨å§”æ‰˜ ä¸­æ‰€æè¿°çš„é‚£æ ·ã€‚
å¦‚æœä½ ä½¿ç”¨æ‰©å±•ç»™å¦ä¸€ä¸ªæ¨¡å—ä¸­å®šä¹‰çš„ç»“æ„ä½“æ·»åŠ æ„é€ å™¨ï¼Œé‚£ä¹ˆæ–°çš„æ„é€ å™¨ç›´åˆ°å®šä¹‰æ¨¡å—ä¸­ä½¿ç”¨ä¸€ä¸ªæ„é€ å™¨ä¹‹å‰ï¼Œä¸èƒ½è®¿é—® `self`ã€‚


```swift
struct Size {
    var width = 0.0, height = 0.0
}
struct Point {
    var x = 0.0, y = 0.0
}
struct Rect {
    var orgin = Point()
    var size = Size()
}

// ä½¿ç”¨é»˜è®¤æ„é€ å™¨åˆ›å»ºæ–°çš„å®ä¾‹
let defaultRect = Rect()

// ä½¿ç”¨é»˜è®¤çš„æˆå‘˜æ„é€ å™¨åˆ›å»ºæ–°çš„å®ä¾‹
let memberwiseRect = Rect(orgin: Point(x: 2.0, y: 2.0),
                          size: Size(width: 5.0, height: 5.0))

// æ‰©å±• Rect ç»“æ„ä½“æ¥æä¾›ä¸€ä¸ªå…è®¸æŒ‡å®š point å’Œ size çš„æ„é€ å™¨
extension Rect {
    init(center: Point, size: Size) {
        let originX = center.x - (size.width / 2)
        let originY = center.y - (size.height / 2)
        self.init(orgin: Point(x: originX, y: originY), size: size)
    }
}

// ä½¿ç”¨æ‰©å±•å®ç°çš„ä¾¿æ·æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹
let centerRect = Rect(center: Point(x: 4.0, y: 4.0),
                      size: Size(width: 3.0, height: 3.0))
```

## 4. æ–¹æ³•

æ‰©å±•å¯ä»¥ç»™ç°æœ‰ç±»å‹æ·»åŠ æ–°çš„**å®ä¾‹æ–¹æ³•**å’Œ**ç±»æ–¹æ³•**ã€‚

```swift
extension Int {
    // () -> Void ç±»å‹å‚æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæ²¡æœ‰å‚æ•°æ²¡æœ‰è¿”å›å€¼çš„æ–¹æ³•
    func repetitions(task: () -> Void ) {
        for _ in 0..<self {
            task()
        }
    }
}

3.repetitions {
    print("Hello!")
}
//Hello!
//Hello!
//Hello!
```


### 4.1 å¯å˜å®ä¾‹æ–¹æ³•ï¼ˆ`mutating`ï¼‰

> ğŸ’¡ ä¿®æ”¹å®ä¾‹æœ¬èº«çš„æ–¹æ³•ï¼Œå¯ä»¥è°ƒç”¨ `self`

é€šè¿‡æ‰©å±•æ·»åŠ çš„å®ä¾‹æ–¹æ³•åŒæ ·ä¹Ÿå¯ä»¥ä¿®æ”¹ï¼ˆæˆ– mutatingï¼ˆæ”¹å˜ï¼‰ï¼‰å®ä¾‹æœ¬èº«ã€‚ç»“æ„ä½“å’Œæšä¸¾çš„æ–¹æ³•ï¼Œè‹¥æ˜¯å¯ä»¥ä¿®æ”¹ `self` æˆ–è€…å®ƒè‡ªå·±çš„å±æ€§ï¼Œåˆ™å¿…é¡»å°†è¿™ä¸ªå®ä¾‹æ–¹æ³•æ ‡è®°ä¸º `mutating`ï¼Œå°±åƒæ˜¯æ”¹å˜äº†æ–¹æ³•çš„åŸå§‹å®ç°ã€‚

```swift
extension Int {
    // å¯¹åŸå§‹å€¼æ±‚å¹³æ–¹
    mutating func square() {
        self = self * self
    }
}

var someInt = 3
someInt.square()
// 9
```


## 5. ä¸‹æ ‡

æ‰©å±•å¯ä»¥ç»™ç°æœ‰çš„ç±»å‹æ·»åŠ æ–°çš„ä¸‹æ ‡ã€‚

```swift
// é€šè¿‡æ‰©å±•ï¼Œä¸ºç°æœ‰ç±»å‹æ·»åŠ æ–°çš„ä¸‹æ ‡
// ä¸‹æ ‡ [n] ä»æ•°å­—å³ä¾§å¼€å§‹ï¼Œè¿”å›å°æ•°ç‚¹å‰çš„ç¬¬ n ä½
extension Int {
    subscript(digitIndex: Int) -> Int {
        var decimalBase = 1
        for _ in 0..<digitIndex {
            decimalBase *= 10
        }
        return (self / decimalBase) % 10
    }
}

746381295[0]
// è¿”å› 5
746381295[1]
// è¿”å› 9
746381295[2]
// è¿”å› 2
746381295[8]
// è¿”å› 7
```


## 6. å†…åµŒç±»å‹

æ‰©å±•å¯ä»¥ç»™ç°æœ‰çš„ç±»ï¼Œç»“æ„ä½“ï¼Œè¿˜æœ‰æšä¸¾æ·»åŠ æ–°çš„åµŒå¥—ç±»å‹ï¼š

```swift
// ç»™ Int æ·»åŠ äº†æ–°çš„åµŒå¥—æšä¸¾
// è¡¨ç¤ºç‰¹å®šæ•´æ•°æ‰€ä»£è¡¨çš„æ•°å­—ç±»å‹ï¼šæ­£æ•°ã€è´Ÿæ•°ã€é›¶
extension Int {
    enum Kind {
        case negative, zero, positive
    }
    var kind: Kind {
        switch self {
        case 0:
            return .zero
        case let x where x > 0:
            return .positive
        default:
            return .negative
        }
    }
}

func printIntegerKinds(_ numbers: [Int]) {
    for number in numbers {
        switch number.kind {
        case .negative:
            print("- ", terminator: "")
        case .zero:
            print("0 ", terminator: "")
        case .positive:
            print("+ ", terminator: "")
        }
    }
    print("")
}

printIntegerKinds([3, 19, -27, 0, -6, 0, 7])
// æ‰“å°ï¼š+ + - 0 - 0 + 
```